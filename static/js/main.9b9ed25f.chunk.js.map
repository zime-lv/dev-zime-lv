{"version":3,"sources":["components/locale lazy /^/.*$/ groupOptions: {} namespace object","translations/i18n.js","utils/config.js","components/card/Card.js","components/dropzone/Dropzone.js","components/submitButton/SubmitButton.js","utils/useTimeout.js","components/errorBoundary/ErrorBoundary.js","components/modalMessage/ModalMessage.js","utils/state.js","components/accountRegistration/AccountRegistration.js","components/pagination/Pagination.js","components/transactions/Transactions.js","components/shareholder/Shareholder.js","components/shares/Shares.js","components/transfer/Balance.js","components/transfer/TransferToSelf.js","components/transfer/TransferToPerson.js","components/transfer/TransferToBusiness.js","components/businessRegistration/businessRegistration.js","components/purposeRegistration/PurposeRegistration.js","components/shareholderRegistration/shareholderRegistration.js","components/myBusiness/MyBusiness.js","components/userEditor/UserEditor.js","components/currencies/Currencies.js","components/currencyRegistration/CurrencyRegistration.js","utils/useInterval.js","components/idleTimer/IdleTimer.js","utils/useEventListener.js","components/pages/summary/Summary.js","components/currencyContainer/CurrencyContainer.js","components/transfer/Transfer.js","utils/sockets.js","components/login/LogIn.js","components/signup/SignUp.js","components/alert/Alert.js","components/language-selector/LanguageSelector.js","components/pages/main/Main.js","utils/requestHandler.js","utils/errorHandler.js","utils/responseHandler.js","components/validateEmail/ValidateEmail.js","components/changePassword/ChangePassword.js","components/logout/Logout.js","components/passwordReset/passwordReset.js","components/loading/Loading.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","i18n","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","debug","ns","defaultNS","keySeparator","interpolation","escapeValue","react","wait","withRef","bindI18n","bindStore","nsMode","config","args","defaults","title","navigation","undefined","footer","header","body","headerContent","onNavigationClick","props","assign","key","Footer","Header","className","Title","Nav","variant","defaultActiveKey","navigationdefaultActiveKey","item","Item","Link","href","link","onClick","style","color","name","Body","React","Children","children","child","cloneElement","styles","baseStyle","flex","display","flexDirection","alignItems","padding","borderWidth","borderRadius","borderColor","borderStyle","backgroundColor","outline","transition","activeStyle","acceptStyle","rejectStyle","data","accountPhotoPath","barrelGetters","sendRequest","barrelFunctions","useState","setFiles","useTranslation","onDrop","useCallback","acceptedFiles","useDropzone","accept","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","Figure","Image","width","height","alt","src","caption","request","namespace","visible","marginTop","timeout","onSubmit","setRequest","barrelSetters","showMessage","requestExpired","setRequestExpired","callback","delay","savedCallback","useRef","useEffect","current","setTimeout","clearTimeout","useTimeout","console","log","Button","type","block","disabled","Spinner","as","animation","size","role","aria-hidden","hidden","ErrorBoundary","state","hasError","error","errorInfo","this","Component","centered","message","onHide","file","backdrop","ExternalFile","lazy","Modal","aria-labelledby","closeButton","Navbar","background","boxShadow","Brand","maxHeight","overflowY","useStickyState","defaultValue","stickyValue","window","localStorage","getItem","JSON","parse","value","setValue","setItem","stringify","signedIn","accountNumber","userData","getReviser","getWorkplace","userAgreementShow","setUserAgreementShow","privacyPolicyShow","setPrivacyPolicyShow","schema","yup","dropzoneHook","required","terms","personalID","matches","RegExp","test","exclusive","params","pid","replace","split","n","parseInt","Alert","Heading","i18nKey","ModalMessage","show","component","handleSubmit","handleChange","values","handleBlur","touched","errors","isValid","validateForm","setFieldValue","Form","noValidate","Group","controlId","Label","Text","Dropzone","Control","onChange","isInvalid","Feedback","InputGroup","Prepend","placeholder","aria-describedby","Check","label","feedback","KeyboardArrowRight","onMouseDown","SubmitButton","validationSchema","reviser","workplace","email","sendAccountRegistrationRequest","initialValues","countItems","itemsPerPage","active","align","pages","Math","ceil","getPages","items","number","push","Pagination","Ellipsis","textAlign","margin","First","Prev","Next","Last","getJSX","transactions","countTransactions","activePageTransactions","transactionsPerPage","getTransactions","format","formatDate","formatPerCent","cnt","ListGroup","transaction","keyTransactions","business_title","conv_amount","created","sender_firstname","sender_lastname","purpose_id","purpose_title","recipient_id","roles","share","share_per_cent","i_am_recipient","roles_available","arrRoles","shares_available","action","float","month","day","year","Badge","pill","purpose","shareholder","rangeControl","sharePerCent","businessTitle","purposeTitle","businessOwnerFirstname","businessOwnerLastname","sharesCreated","purposeShareholders","setPurposeShareholders","userQuery","setUserQuery","delayedQuery","_","debounce","q","sendQuery","target","onClose","shareholder_id","ps","sharesLabelId","Toast","minWidth","firstname","lastname","Settings","fontSize","min","max","step","shares","countShares","activePageShares","sharesPerPage","getShares","keyShares","owner_firstname","owner_lastname","shares_created","shares_roles","shares_share","Shareholder","accordionView","setAccountType","setRedirectTo","setAccordionView","getAccountData","userDataParsed","onAccountTypeSelected","available","acc_curr","acc_cred","acc_save","Accordion","Toggle","Card","eventKey","cursor","Collapse","Transactions","Shares","accountType","language","currencyAbbr","parseLocaleNumber","fromAccount","toAccount","amount","custom","uid","Intl","NumberFormat","notation","minimumFractionDigits","transferToSelf","toPersonalID","description","rows","transferToPerson","purposeID","currency","transferToBusiness","barrelEventHandlers","onBusinessRegistration","trim","businessDescription","optional","registerBusiness","businessID","barrels","onPurposeRegistration","purposeDescription","RegisterPurpose","shareholderRoles","typeError","userBusinesses","countBusinesses","businessesPerPage","activePageBusinesses","userBusinessesLoaded","activeBusiness","activeBusinessID","businessPurposes","countBusinessPurposes","businessPurposesPerPage","activePageBusinessPurposes","activeBusinesPurpose","getBusinesses","getBusinessPurposes","getPurposeShareholders","menuItems","purposes","countShareholders","business","keyBusiness","keyPurpose","business_id","TogglePurpose","whiteSpace","Extension","Tab","Pane","bg","keyShareholder","Add","jsx","date","Date","businessSince","DateTimeFormat","ToggleBusiness","Store","Container","Row","Col","sm","Content","border","PurposeRegistration","mode","editFirstname","setEditFirstname","editLastname","setEditLastname","editEmail","setEditEmail","editPassword","setEditPassword","passwordVisible","setPasswordVisible","submitButtonVisible","setSubmitButtonVisible","togglePassword","yupObject","firstName","lastName","password","Close","Edit","Append","VisibilityOff","Visibility","sendUserRegistrationRequest","currencies","countCurrencies","activePageCurrencies","currenciesPerPage","setCurrencyAbbr","getCurrencies","formatExchangeRate","onCurrencySelected","currency_id","onPageSelect","Table","responsive","striped","bordered","hover","keyCUrrency","abbr","rate","region","checked","aria-label","curr_abbr","curr_title","curr_region","curr_rate","useInterval","setInterval","clearInterval","timestamp","stage2","stage3","onTick","onTimerReset","onTimeout","events","onSessionTimeout","seconds","setSeconds","modalMessageShow","setModalMessageShow","eventHandler","i","addEventListener","removeEventListener","useEventListener","currTime","timeFormatted","minute","second","modalMessage","fontWeight","OverlayTrigger","placement","overlay","Tooltip","AvTimer","sessionTimeout","onLastSeenUser","location","useLocation","fluid","paddingRight","paddingLeft","PowerSettingsNew","IdleTimer","collapseOnSelect","expand","pathname","aria-controls","viewBalanceOrTransfer","exact","path","Balance","AccountRegistration","UserEditor","accordionViewCurrency","setAccordionViewCurrency","Currencies","CurrencyRegistration","CurrencyContainer","MyBusiness","transferType","onTransferTypeChange","transferCard","setTransferCard","TransferToSelf","TransferToPerson","TransferToBusiness","Transfer","dev","uri","ENDPOINT","hostname","socket","openSocket","connect","secure","reconnect","sendData","emit","sendUserLogInRequest","rememberMe","validateEmail","info","onAlertClose","dismissible","changeLanguage","lng","selectLanguage","setDebug","loggingOut","setLoggingOut","pageLoading","setPageLoading","now","instance","setInstance","uuidv4","session","setSession","setSessionTimeout","connected","setConnected","setSignedIn","updateInterval","setUpdateInterval","currencyRate","setCurrencyRate","setCurrencies","setTransactions","setShares","setCountCurrencies","setCountTransactions","setCountShares","setActivePageCurrencies","setActivePageTransactions","setActivePageShares","setCurrenciesPerPage","setTransactionsPerPage","setSharesPerPage","setUserData","setUID","setAccountNumber","setUserBusinesses","setCountBusinesses","setBusinessesPerPage","setActivePageBusinesses","setUserBusinessesLoaded","setActiveBusiness","setActiveBusinessID","setBusinessPurposes","setCountBusinessPurposes","setBusinessPurposesPerPage","setActivePageBusinessPurposes","setActiveBusinesPurpose","redirectTo","lastInsertId","setLastInsertId","validateTokenEmail","setValidateTokenEmail","validateTokenPasswordReset","setValidateTokenPasswordReset","passwordResetTokenValidated","setPasswordResetTokenValidated","passwordResetTokenEmail","setPasswordResetTokenEmail","tmrConnected","options","setLanguage","setTransferType","setAccountPhotoPath","setError","setInfo","responseData","setResponseData","on","useSocket","processResponse","processRequest","requestFound","onRequest","requestHandler","status","context","errorFound","onError","res","errorHandler","getTransactionById","updateLastSeenUser","onRedirect","responseFound","onResponse","reqData","results","insertId","affectedRows","currency_abbr","isNaN","currency_rate","queryCnt","rowNum","count_businesses","count_purposes","seconds_since_last_seen","count_currencies","count_transaction_positions","count_shares","responseHandler","hideMessage","getUrlParam","param","queryString","search","URLSearchParams","get","sendEmailValidationRequest","token","msg","maximumFractionDigits","ts","hour","newPage","page","limit","selected","stringNumber","locale","parts_local","formatToParts","group","decimal","forEach","parseFloat","to","onSignUp","onTransferSuccess","onTransfer","onLogOut","endSession","clear","startSession","sendPasswordResetRequest","wrapperClass","innerClass","getContainerClass","appClass","Summary","Login","SignUp","ValidateEmail","ChangePassword","tempError","tempLanguage","Logout","PasswordReset","LanguageSelector","ReactDOM","render","fallback","document","getElementById"],"mappings":"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","file":"static/js/main.9b9ed25f.chunk.js","sourcesContent":["var map = {\n\t\"./document.css\": [\n\t\t269,\n\t\t7,\n\t\t5\n\t],\n\t\"./en/PrivacyPolicy\": [\n\t\t201,\n\t\t9,\n\t\t0\n\t],\n\t\"./en/PrivacyPolicy.js\": [\n\t\t201,\n\t\t9,\n\t\t0\n\t],\n\t\"./en/UserAgreement\": [\n\t\t202,\n\t\t9,\n\t\t1\n\t],\n\t\"./en/UserAgreement.js\": [\n\t\t202,\n\t\t9,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[2]).then(function() {\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 230;\nmodule.exports = webpackAsyncContext;","import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport Backend from \"i18next-xhr-backend\";\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\n// not like to use this?\r\n// have a look at the Quick start guide\r\n// for passing in lng and translations on init\r\n\r\ni18n\r\n  // load translation using xhr -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\r\n  // learn more: https://github.com/i18next/i18next-xhr-backend\r\n  .use(Backend)\r\n  // detect user language\r\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n  .use(LanguageDetector)\r\n  // pass the i18n instance to react-i18next.\r\n  .use(initReactI18next)\r\n  // init i18next\r\n  // for all options read: https://www.i18next.com/overview/configuration-options\r\n  .init({\r\n    fallbackLng: \"lv\",\r\n    debug: false,\r\n    // lng: \"lv\",\r\n    ns: [\"LogIn\", \"SignUp\"],\r\n    defaultNS: \"Default\",\r\n    keySeparator: false,\r\n    interpolation: {\r\n      escapeValue: false, // not needed for react as it escapes by default\r\n    },\r\n    react: {\r\n      wait: false,\r\n      withRef: false,\r\n      bindI18n: \"languageChanged loaded\",\r\n      bindStore: \"added removed\",\r\n      nsMode: \"default\",\r\n    },\r\n  });\r\n\r\nexport default i18n;\r\n","const dev = {\r\n  uri: {\r\n    ENDPOINT: \"http://localhost:9000\",\r\n    // ENDPOINT: \"http://192.168.2.100:9000\"\r\n  },\r\n};\r\n\r\nconst dev2 = {\r\n  uri: {\r\n    ENDPOINT: \"http://192.168.2.100:5000\",\r\n  },\r\n};\r\n\r\nconst staging = {\r\n  uri: {\r\n    ENDPOINT: \"https://dev.zime.lv\",\r\n  },\r\n};\r\n\r\nconst prod = {\r\n  uri: {\r\n    ENDPOINT: \"https://zime.lv\",\r\n  },\r\n};\r\n\r\nconst hostname = window && window.location && window.location.hostname;\r\n\r\nlet config;\r\nswitch (hostname) {\r\n  case \"localhost\":\r\n    config = dev;\r\n    break;\r\n  case \"192.168.2.100\":\r\n    config = dev2;\r\n    break;\r\n  case \"dev.zime.lv\":\r\n    config = staging;\r\n    break;\r\n  case \"zime.lv\":\r\n    config = prod;\r\n    break;\r\n  default:\r\n    config = dev;\r\n    break;\r\n}\r\n\r\nexport default {\r\n  ...config,\r\n};\r\n","import \"./Card.css\";\r\nimport React, { cloneElement } from \"react\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\n// import { Container, Row, Col, Button } from \"react-bootstrap\";\r\n// import Button from \"react-bootstrap/Button\";\r\n\r\nexport default (args) => {\r\n  let defaults = {\r\n    title: \"Untitled\",\r\n    navigation: undefined,\r\n    footer: undefined,\r\n    header: true,\r\n    body: true,\r\n    headerContent: null,\r\n    onNavigationClick: () => {},\r\n  };\r\n  let props = Object.assign(defaults, args);\r\n\r\n  let key = 0;\r\n\r\n  let footer = props.footer ? <Card.Footer>{props.footer}</Card.Footer> : \"\";\r\n\r\n  return (\r\n    <Card>\r\n      {/* <Card.Img variant=\"top\" src=\"holder.js/100px180?text=Image cap\" /> */}\r\n      {props.header && (\r\n        <Card.Header className=\"custom-card\">\r\n          {props.headerContent !== null ? (\r\n            props.headerContent\r\n          ) : (\r\n            <>\r\n              <Card.Title>{props.title}</Card.Title>\r\n              <Nav\r\n                variant=\"tabs\"\r\n                defaultActiveKey={props.navigationdefaultActiveKey}\r\n              >\r\n                {props.navigation &&\r\n                  props.navigation.map((item, key) => (\r\n                    <Nav.Item key={key}>\r\n                      <Nav.Link\r\n                        className=\"custom-card\"\r\n                        href={item.link}\r\n                        onClick={() => props.onNavigationClick(item.link)}\r\n                        style={{ color: \"black\" }}\r\n                      >\r\n                        {item.name}\r\n                      </Nav.Link>\r\n                    </Nav.Item>\r\n                  ))}\r\n              </Nav>\r\n            </>\r\n          )}\r\n        </Card.Header>\r\n      )}\r\n\r\n      {props.body && (\r\n        <Card.Body className=\"custom-card\">\r\n          {React.Children.map(args.children, (child) => {\r\n            if (typeof child !== \"object\") {\r\n              return child;\r\n            } else {\r\n              key++;\r\n              return cloneElement(child, {\r\n                styles: null,\r\n                key: key,\r\n              });\r\n            }\r\n          })}\r\n        </Card.Body>\r\n      )}\r\n      {footer}\r\n    </Card>\r\n  );\r\n};\r\n","import React, { useCallback, useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useDropzone } from \"react-dropzone\";\r\n\r\nimport { Figure } from \"react-bootstrap\";\r\n\r\nconst baseStyle = {\r\n  flex: 1,\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  padding: \"20px\",\r\n  borderWidth: 2,\r\n  borderRadius: 2,\r\n  borderColor: \"#eeeeee\",\r\n  borderStyle: \"dashed\",\r\n  backgroundColor: \"#fafafa\",\r\n  color: \"#bdbdbd\",\r\n  outline: \"none\",\r\n  transition: \"border .24s ease-in-out\",\r\n};\r\n\r\nconst activeStyle = {\r\n  borderColor: \"#2196f3\",\r\n};\r\n\r\nconst acceptStyle = {\r\n  borderColor: \"#00e676\",\r\n};\r\n\r\nconst rejectStyle = {\r\n  borderColor: \"#ff1744\",\r\n};\r\n\r\n/**\r\n * App: Dropzone\r\n */\r\nexport default (args) => {\r\n  // console.log(\"DROPZONE\", args);\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args.data);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  let { accountPhotoPath } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { sendRequest } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n   * Hooks\r\n   */\r\n  const [, setFiles] = useState(null);\r\n\r\n  /**\r\n   * Custom hooks\r\n   */\r\n  const { t } = useTranslation(\"AccountRegistration\");\r\n\r\n  // let setFieldValue = data.setFieldValue;\r\n  // let data = args.data;\r\n\r\n  // let accountPhotoPath = data.accountPhotoPath;\r\n  if (accountPhotoPath !== \"\") {\r\n    baseStyle.padding = 0;\r\n    baseStyle.borderStyle = \"none\"; // \"solid\";\r\n    baseStyle.backgroundColor = \"none\";\r\n  }\r\n\r\n  // const [thisData] = useState(data);\r\n  // console.log(\"THIS DATA =====\");\r\n\r\n  // console.log(data);\r\n\r\n  const onDrop = useCallback((acceptedFiles) => {\r\n    // console.log(getRootProps());\r\n\r\n    // args.onDrop(1);\r\n    // args.context.dropzoneUntouched = false;\r\n\r\n    setFiles(acceptedFiles);\r\n    // sendRequest({\r\n    //   req: \"upload file\",\r\n    //   data: { acceptedFiles: acceptedFiles },\r\n    // });\r\n    let data = { acceptedFiles: acceptedFiles };\r\n    sendRequest({ req: \"upload file\", data: data });\r\n    // setFieldValue(1);\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const {\r\n    // acceptedFilesItems,\r\n    // rejectedFilesItems,\r\n    getRootProps,\r\n    getInputProps,\r\n    isDragActive,\r\n    isDragAccept,\r\n    isDragReject,\r\n  } = useDropzone({\r\n    accept: \"image/*\",\r\n    onDrop,\r\n  });\r\n\r\n  // const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\r\n  // const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n  //   onDrop\r\n  // });\r\n\r\n  const style = useMemo(\r\n    () => ({\r\n      ...baseStyle,\r\n      ...(isDragActive ? activeStyle : {}),\r\n      ...(isDragAccept ? acceptStyle : {}),\r\n      ...(isDragReject ? rejectStyle : {}),\r\n    }),\r\n    [isDragActive, isDragAccept, isDragReject]\r\n  );\r\n\r\n  if (accountPhotoPath === \"\") {\r\n    return (\r\n      <div className=\"container\">\r\n        <div {...getRootProps({ style })}>\r\n          <input {...getInputProps()} />\r\n          <p>{t(\"Click to select the image file\")}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    // accountPhotoPath = \"http://localhost:9000/\" + accountPhotoPath;\r\n    accountPhotoPath = \"gfx/photo_id.png\";\r\n\r\n    return (\r\n      <>\r\n        <div className=\"container\">\r\n          <div {...getRootProps({ style })}>\r\n            <input {...getInputProps()} />\r\n            <Figure.Image\r\n              width={171}\r\n              height={180}\r\n              alt=\"171x180\"\r\n              src={accountPhotoPath}\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React, { useState } from \"react\";\r\n// import { useTranslation } from \"react-i18next\";\r\nimport { Button, Spinner } from \"react-bootstrap\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\nimport { useTimeout } from \"../../utils/useTimeout\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = {\r\n    caption: \"Submit\",\r\n    request: null,\r\n    namespace: \"Button\",\r\n    visible: true,\r\n    marginTop: 0,\r\n    timeout: 7000, // milliseconds\r\n    onSubmit: () => {},\r\n  };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  const { request } = props.barrelGetters;\r\n  const { setRequest } = props.barrelSetters;\r\n  const { showMessage } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n    * Destructured vars\r\n    ============================================================================ */\r\n  // const { t } = useTranslation([props.namespace]); // adjust namespace\r\n\r\n  const [requestExpired, setRequestExpired] = useState(false);\r\n\r\n  useTimeout(() => {\r\n    if (request !== props.request) return;\r\n    console.log(\"useTimeout\");\r\n\r\n    // Your custom logic here\r\n    // setSeconds(seconds - 1);\r\n    setRequestExpired(true);\r\n    setRequest(null);\r\n    showMessage(\"REQUEST_EXPIRED\", \"error\");\r\n  }, props.timeout);\r\n\r\n  // useEffect(() => {\r\n  //   if (requestExpired)\r\n  // }, [requestExpired]);\r\n\r\n  /**\r\n    * Functions\r\n    ============================================================================ */\r\n  const getJSX = () => {\r\n    return !props.visible ? (\r\n      <></>\r\n    ) : (\r\n      <Button\r\n        type=\"submit\"\r\n        onClick={props.onSubmit}\r\n        block\r\n        disabled={request === props.request && !requestExpired}\r\n        style={{ marginTop: props.marginTop + \"px\" }}\r\n      >\r\n        <Spinner\r\n          as=\"span\"\r\n          animation=\"border\"\r\n          size=\"sm\"\r\n          role=\"status\"\r\n          aria-hidden=\"true\"\r\n          hidden={request !== props.request || requestExpired}\r\n        />\r\n        &nbsp;\r\n        {props.caption}\r\n        &nbsp;\r\n      </Button>\r\n    );\r\n  };\r\n\r\n  /**\r\n    * Return\r\n    ============================================================================ */\r\n  return <>{getJSX()}</>;\r\n};\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport const useTimeout = (callback, delay) => {\r\n  const savedCallback = useRef();\r\n\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  useEffect(() => {\r\n    function tick() {\r\n      if (delay > 0) savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setTimeout(tick, delay);\r\n      return () => clearTimeout(id);\r\n    }\r\n  }, [delay]);\r\n};\r\n","import React from \"react\";\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // You can also log the error to an error reporting service\r\n    // logErrorToMyService(error, errorInfo);\r\n    console.log(\"Error boundary:\", error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      //   return <h1>Something went wrong.</h1>;\r\n      return <></>;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Button, Modal, Navbar, Nav } from \"react-bootstrap\";\r\nimport ErrorBoundary from \"../errorBoundary\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\n// import Card from \"../card\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = {\r\n    namespace: \"ModalMessage\",\r\n    centered: true,\r\n    message: \"\",\r\n    title: null,\r\n    footer: null,\r\n    // bodyStyle: { padding: \"1rem\" },\r\n    onHide: () => {},\r\n    size: \"sm\",\r\n    file: null,\r\n    backdrop: true, // \"static\"\r\n  };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  // const {} = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  // const {} = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n    * Destructured vars\r\n    ============================================================================ */\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  const ExternalFile =\r\n    props.file !== null\r\n      ? React.lazy(() => import(`../locale/${props.file}`))\r\n      : \"\";\r\n\r\n  // async function loadExternalFile() {\r\n  //   await React.preloadLazy(ExternalFile);\r\n  // }\r\n\r\n  // loadExternalFile();\r\n\r\n  /**\r\n    * Functions\r\n    ============================================================================ */\r\n  const getJSX = () => {\r\n    return (\r\n      <Modal\r\n        {...props}\r\n        size={props.size}\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered={props.centered}\r\n        backdrop={props.backdrop}\r\n      >\r\n        {props.title !== null && (\r\n          <Modal.Header closeButton>\r\n            <Navbar\r\n              // className=\"card-header\"\r\n              // className=\"navbar-trans\"\r\n              // bg=\"light\"\r\n              // variant=\"light\"\r\n              style={{\r\n                borderRadius: \"5px\",\r\n                background: \"transparent !important\",\r\n                // color: \"#f7f7f7\",\r\n                backgroundColor: \"\", // e8f6f3\r\n                boxShadow: \"none\",\r\n                // whiteSpace: \"nowrap\",\r\n              }}\r\n            >\r\n              <Navbar.Brand href=\"/\">\r\n                <img\r\n                  src=\"gfx/zlogo_light.png\"\r\n                  width=\"auto\"\r\n                  height=\"30\"\r\n                  className=\"d-inline-block align-top\"\r\n                  alt={t(\"Logo\")}\r\n                />\r\n              </Navbar.Brand>\r\n              <Nav className=\"mr-auto\">\r\n                <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                  {props.title}\r\n                </Modal.Title>\r\n              </Nav>\r\n            </Navbar>\r\n          </Modal.Header>\r\n        )}\r\n        <Modal.Body\r\n          style={{ maxHeight: \"calc(100vh - 210px)\", overflowY: \"auto\" }}\r\n        >\r\n          {props.message !== \"\" ? (\r\n            props.message\r\n          ) : (\r\n            <ErrorBoundary>\r\n              <ExternalFile />\r\n            </ErrorBoundary>\r\n          )}\r\n        </Modal.Body>\r\n        {props.footer !== null && (\r\n          <Modal.Footer>\r\n            <Button block onClick={props.onHide}>\r\n              {t(\"Close\")}\r\n            </Button>\r\n          </Modal.Footer>\r\n        )}\r\n      </Modal>\r\n    );\r\n  };\r\n\r\n  /**\r\n    * Return\r\n    ============================================================================ */\r\n  return <>{getJSX()}</>;\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nexport const useStickyState = (defaultValue, key) => {\r\n  const [value, setValue] = useState(() => {\r\n    const stickyValue = window.localStorage.getItem(key);\r\n    return stickyValue !== null ? JSON.parse(stickyValue) : defaultValue;\r\n  });\r\n  useEffect(() => {\r\n    window.localStorage.setItem(key, JSON.stringify(value));\r\n  }, [key, value]);\r\n  return [value, setValue];\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useTranslation, Trans } from \"react-i18next\";\r\nimport { Form, InputGroup, Alert } from \"react-bootstrap\";\r\n// import { Redirect } from \"react-router-dom\";\r\n// import ChevronRight from \"@material-ui/icons/ArrowForwardIos\";\r\nimport { KeyboardArrowRight } from \"@material-ui/icons\";\r\nimport Card from \"../card\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\n// import { useStickyState } from \"../../utils/state\";\r\nimport Dropzone from \"../dropzone\";\r\nimport SubmitButton from \"../submitButton\";\r\nimport ModalMessage from \"../modalMessage\";\r\nimport { useStickyState } from \"../../utils/state\";\r\n\r\n// const UserAgreement = React.lazy(() => import(\"../locale/en/UserAgreement\"));\r\n\r\nexport default (args) => {\r\n  // console.log(\"ACCOUNT REGISTRATION ARGS:\", args);\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {\r\n    request: \"register account\",\r\n    namespace: \"AccountRegistration\",\r\n  };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const {\r\n    signedIn,\r\n    accountNumber,\r\n    accountPhotoPath,\r\n    userData,\r\n    debug,\r\n  } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { getReviser, getWorkplace, sendRequest } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n   * Hooks\r\n   */\r\n  // const [redirect, setRedirect] = useState(false);\r\n  const [userAgreementShow, setUserAgreementShow] = useStickyState(\r\n    false,\r\n    \"userAgreementShow\"\r\n  );\r\n  const [privacyPolicyShow, setPrivacyPolicyShow] = useStickyState(\r\n    false,\r\n    \"privacyPolicyShow\"\r\n  );\r\n\r\n  /**\r\n   * Custom hooks\r\n   */\r\n  const { t } = useTranslation(props.namespace);\r\n\r\n  /**\r\n   * Yup schema\r\n   */\r\n  const schema = yup.object({\r\n    dropzoneHook: yup.string().required(t(\"Photo ID is required\")),\r\n    terms: yup.array().required(t(\"Terms is required\")),\r\n    personalID: yup\r\n      .string()\r\n      .required(t(\"Personal ID is required\"))\r\n      .matches(\r\n        new RegExp(t(\"Personal ID Regex\")),\r\n        t(\"Wrong Personal ID format\")\r\n      )\r\n      .test({\r\n        name: \"integrity\",\r\n        exclusive: true,\r\n        params: {},\r\n        message: t(\"PersonalID must be valid\"),\r\n        test: (value) => {\r\n          if (typeof value === \"undefined\") return false;\r\n          let pid = value\r\n            .replace(\"-\", \"\")\r\n            .split(\"\")\r\n            .map(function (n) {\r\n              return parseInt(n, 10);\r\n            });\r\n          let calc =\r\n            1 * pid[0] +\r\n            6 * pid[1] +\r\n            3 * pid[2] +\r\n            7 * pid[3] +\r\n            9 * pid[4] +\r\n            10 * pid[5] +\r\n            5 * pid[6] +\r\n            8 * pid[7] +\r\n            4 * pid[8] +\r\n            2 * pid[9];\r\n          let checksum = (1101 - calc) % 11;\r\n\r\n          return checksum === pid[10];\r\n        },\r\n      }),\r\n  });\r\n\r\n  /**\r\n   * Functions\r\n   */\r\n\r\n  /**\r\n   * Send account registration request\r\n   * @param {object} data\r\n   */\r\n  const sendAccountRegistrationRequest = (data) => {\r\n    if (data === null) return false;\r\n\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    // data.data = userData;\r\n    // data.email = JSON.parse(userData).email;\r\n    data.email = userData.email;\r\n\r\n    return sendRequest({ req: props.request, data });\r\n    // return onAccountRegistration(data);\r\n  };\r\n\r\n  /**\r\n   * Event listener: On Form Submit\r\n   * @param {object} data Form data\r\n   */\r\n  const onSubmit = (data) => {\r\n    if (sendAccountRegistrationRequest(data)) {\r\n      // Account registration request was submitted\r\n    }\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   // console.log(modalMessageShow);\r\n  //   // eslint-disable-next-line\r\n  // }, [userAgreementShow]);\r\n\r\n  // const UAText = <p>Permission is hereby granted</p>;\r\n\r\n  // const userAgreement = () => {\r\n  //   let key;\r\n  //   return (\r\n  //     <div>\r\n  //       {Array(4)\r\n  //         .fill()\r\n  //         .map((_, i) => {\r\n  //           key = `AccountRegistration:User Agreement ${i + 1}`;\r\n  //           return (\r\n  //             <p key={i}>\r\n  //               <Trans i18nKey={key}>[html]</Trans>\r\n  //             </p>\r\n  //           );\r\n  //         })}\r\n  //     </div>\r\n  //   );\r\n  // };\r\n\r\n  // let dropzoneUntouched = true;\r\n\r\n  const AccountRegistrationForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    setFieldValue,\r\n    errors,\r\n  }) => (\r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      <Form.Group controlId=\"validationFormikPhotoId\">\r\n        <Form.Label>{t(\"Photo ID\")}</Form.Label>\r\n\r\n        <Form.Text>\r\n          <Trans i18nKey=\"AccountRegistration:Photo ID requirements\">\r\n            Photo of me holding my passport. The personal identification number\r\n            must be clearly legible.\r\n          </Trans>\r\n        </Form.Text>\r\n\r\n        <br />\r\n        <Dropzone data={props} />\r\n      </Form.Group>\r\n\r\n      <Form.Group controlId=\"validationFormikDropzoneHook\">\r\n        <Form.Control\r\n          type=\"text\"\r\n          name=\"dropzoneHook\"\r\n          value={accountPhotoPath}\r\n          onChange={handleChange}\r\n          isInvalid={!!errors.dropzoneHook}\r\n          style={{ display: \"none\" }}\r\n        />\r\n\r\n        <Form.Control.Feedback type=\"invalid\">\r\n          {errors.dropzoneHook}\r\n        </Form.Control.Feedback>\r\n      </Form.Group>\r\n\r\n      {false && (\r\n        <Form.Group controlId=\"validationFormikCountry\">\r\n          <Form.Label>{t(\"Country\")}</Form.Label>\r\n          <Form.Control as=\"select\" custom>\r\n            <option>Latvija</option>\r\n            <option>Deutschland</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n      )}\r\n\r\n      <Form.Group controlId=\"validationFormikPersonalId\">\r\n        <Form.Label>{t(\"Personal ID\")}</Form.Label>\r\n        <InputGroup>\r\n          <InputGroup.Prepend>\r\n            <InputGroup.Text id=\"inputGroupPrepend\">ID</InputGroup.Text>\r\n          </InputGroup.Prepend>\r\n          <Form.Control\r\n            type=\"text\"\r\n            placeholder={t(\"XXXXXX-XXXXX\")}\r\n            aria-describedby=\"inputGroupPrepend\"\r\n            name=\"personalID\"\r\n            value={values.personalID}\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.personalID && touched.personalID}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.personalID}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      <Form.Group>\r\n        <Form.Check\r\n          required\r\n          name=\"terms\"\r\n          label={t(\"Agree to terms and conditions\")}\r\n          onChange={handleChange}\r\n          isInvalid={!!errors.terms && touched.terms}\r\n          feedback={errors.terms}\r\n          id=\"validationFormik0\"\r\n        />\r\n      </Form.Group>\r\n\r\n      <Trans i18nKey=\"AccountRegistration:The User Agreement and the Privacy Policy\">\r\n        <KeyboardArrowRight style={{ color: \"var(--dark)\" }} />\r\n        <a href=\"#\" onMouseDown={() => setUserAgreementShow(true)}>\r\n          User Agreement\r\n        </a>\r\n\r\n        <br />\r\n\r\n        <KeyboardArrowRight style={{ color: \"var(--dark)\" }} />\r\n        <a href=\"#\" onMouseDown={() => setPrivacyPolicyShow(true)}>\r\n          Privacy Policy\r\n        </a>\r\n      </Trans>\r\n\r\n      <br />\r\n      <br />\r\n\r\n      <SubmitButton\r\n        {...args}\r\n        caption={t(\"Submit\")}\r\n        request={props.request}\r\n        namespace={props.namespace}\r\n      />\r\n    </Form>\r\n  );\r\n\r\n  if (signedIn === false)\r\n    return (\r\n      <>\r\n        <Alert variant=\"info\">\r\n          <Alert.Heading>{t(\"User not logged in\")}</Alert.Heading>\r\n          <p>\r\n            <Trans i18nKey=\"AccountRegistration:Please log in first\">\r\n              Please log in first.\r\n            </Trans>\r\n          </p>\r\n        </Alert>\r\n      </>\r\n    );\r\n\r\n  if (!debug && accountNumber !== null)\r\n    return (\r\n      <>\r\n        <Alert variant=\"info\">\r\n          <Alert.Heading>{t(\"Account successfully registered\")}</Alert.Heading>\r\n          <p>\r\n            <Trans\r\n              i18nKey=\"AccountRegistration:Account with your personal ID successfully registered\"\r\n              accountNumber={accountNumber}\r\n            >\r\n              Account with the personal ID\r\n              <strong>{{ accountNumber }}</strong>\r\n              successfully registered.\r\n            </Trans>\r\n          </p>\r\n        </Alert>\r\n      </>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <ModalMessage\r\n        show={userAgreementShow}\r\n        file=\"en/UserAgreement\"\r\n        size=\"lg\"\r\n        centered={false}\r\n        title={t(\"User Agreement\")}\r\n        footer=\"\"\r\n        onHide={() => setUserAgreementShow(false)}\r\n      />\r\n\r\n      <ModalMessage\r\n        show={privacyPolicyShow}\r\n        file=\"en/PrivacyPolicy\"\r\n        size=\"lg\"\r\n        centered={false}\r\n        title={t(\"Privacy Policy\")}\r\n        footer=\"\"\r\n        onHide={() => setPrivacyPolicyShow(false)}\r\n      />\r\n\r\n      <Card title={t(\"Open account\")}>\r\n        <Formik\r\n          component={AccountRegistrationForm}\r\n          validationSchema={schema}\r\n          onSubmit={onSubmit}\r\n          initialValues={{\r\n            personalID: \"\",\r\n            terms: \"\",\r\n            dropzoneHook: accountPhotoPath,\r\n          }}\r\n        />\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n","import \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\n/**\r\n * System imports\r\n ============================================================================ */\r\nimport React from \"react\";\r\n// import { useTranslation } from \"react-i18next\";\r\nimport Pagination from \"react-bootstrap/Pagination\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = {\r\n    namespace: \"Pagination\",\r\n    size: \"md\",\r\n    countItems: 0,\r\n    itemsPerPage: 5,\r\n    active: 0, // active page\r\n    onClick: () => {},\r\n    align: \"center\",\r\n  };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  const pages = Math.ceil(props.countItems / props.itemsPerPage);\r\n\r\n  if (pages < 2) return <></>;\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  // const {} = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  // const {} = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n    * Destructured vars\r\n    ============================================================================ */\r\n  // const { t } = useTranslation([props.namespace]);\r\n\r\n  const onClick = (number) => {\r\n    // console.log(\"on page select\", number);\r\n    switch (number) {\r\n      case \"First\":\r\n        number = 1;\r\n        break;\r\n      case \"Prev\":\r\n        number = props.active > 1 ? props.active - 1 : 1;\r\n        break;\r\n      case \"Next\":\r\n        number =\r\n          props.active < Math.ceil(props.countItems / props.itemsPerPage)\r\n            ? props.active + 1\r\n            : Math.ceil(props.countItems / props.itemsPerPage);\r\n        break;\r\n      case \"Last\":\r\n        number = Math.ceil(props.countItems / props.itemsPerPage);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    // getBusinesses(number);\r\n    props.onClick(number);\r\n  };\r\n\r\n  const getPages = () => {\r\n    let items = [];\r\n    for (let number = 1; number <= pages; number++) {\r\n      if (\r\n        number === 1 ||\r\n        number === pages ||\r\n        (number >= props.active - 2 && number <= props.active + 2)\r\n      ) {\r\n        items.push(\r\n          <Pagination.Item\r\n            key={number}\r\n            active={number === props.active}\r\n            onClick={() => onClick(number)}\r\n          >\r\n            {number}\r\n          </Pagination.Item>\r\n        );\r\n      } else if (number === 2 || number === pages - 1) {\r\n        items.push(<Pagination.Ellipsis key={number} disabled />);\r\n      }\r\n    }\r\n    return items;\r\n  };\r\n\r\n  /**\r\n    * Functions\r\n    ============================================================================ */\r\n  const getJSX = () => {\r\n    const { align } = props;\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          textAlign: `${align}`,\r\n          // backgroundColor: \"red\",\r\n        }}\r\n      >\r\n        <span style={{ display: \"inline-block\" }}>\r\n          <Pagination size={props.size} style={{ padding: 0, margin: 0 }}>\r\n            {pages > 5 && (\r\n              <>\r\n                <Pagination.First onClick={() => props.onClick(\"First\")} />\r\n                <Pagination.Prev onClick={() => props.onClick(\"Prev\")} />\r\n              </>\r\n            )}\r\n\r\n            {getPages()}\r\n\r\n            {pages > 5 && (\r\n              <>\r\n                <Pagination.Next onClick={() => props.onClick(\"Next\")} />\r\n                <Pagination.Last onClick={() => props.onClick(\"Last\")} />\r\n              </>\r\n            )}\r\n          </Pagination>\r\n        </span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n    * Return\r\n    ============================================================================ */\r\n  return <>{getJSX()}</>;\r\n};\r\n","/**\r\n * CSS\r\n ============================================================================ */\r\n// import \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\r\n\r\n/**\r\n * System imports\r\n ============================================================================ */\r\nimport React from \"react\";\r\nimport {\r\n  // Form,\r\n  // InputGroup,\r\n  // Button,\r\n  // Table,\r\n  ListGroup,\r\n  Badge,\r\n} from \"react-bootstrap\";\r\n// import { Formik } from \"formik\";\r\n// import * as yup from \"yup\";\r\nimport { useTranslation } from \"react-i18next\";\r\n// import BootstrapTable from \"react-bootstrap-table-next\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\n// import Card from \"../card\";\r\n// import SubmitButton from \"../submitButton\";\r\nimport Pagination from \"../pagination\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = {\r\n    request: \"get transactions\",\r\n    namespace: \"Transactions\",\r\n  };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  const {\r\n    transactions,\r\n    countTransactions,\r\n    activePageTransactions,\r\n    transactionsPerPage,\r\n    accountNumber,\r\n  } = props.barrelGetters;\r\n  // const { setActivePageTransactions } = props.barrelSetters;\r\n  const {\r\n    // getReviser,\r\n    // getWorkplace,\r\n    // sendRequest,\r\n    getTransactions,\r\n    format,\r\n    formatDate,\r\n    formatPerCent,\r\n  } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n    * Destructured vars\r\n    ============================================================================ */\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  /**\r\n    * Functions\r\n    ============================================================================ */\r\n\r\n  // const indication = () => {\r\n  //   return \"THE TABLE IS EMPTY\";\r\n  // };\r\n\r\n  const onPageSelect = (number) => {\r\n    // console.log(\"on page select\", number);\r\n    switch (number) {\r\n      case \"First\":\r\n        number = 1;\r\n        break;\r\n      case \"Prev\":\r\n        number = activePageTransactions > 1 ? activePageTransactions - 1 : 1;\r\n        break;\r\n      case \"Next\":\r\n        number =\r\n          activePageTransactions <\r\n          Math.ceil(countTransactions / transactionsPerPage)\r\n            ? activePageTransactions + 1\r\n            : Math.ceil(countTransactions / transactionsPerPage);\r\n        break;\r\n      case \"Last\":\r\n        number = Math.ceil(countTransactions / transactionsPerPage);\r\n        break;\r\n      default:\r\n        // number = number;\r\n        break;\r\n    }\r\n    getTransactions(number);\r\n  };\r\n\r\n  let cnt = 0;\r\n\r\n  /**\r\n    * Return\r\n    ============================================================================ */\r\n  return (\r\n    <>\r\n      <ListGroup variant=\"flush\">\r\n        {transactions !== null &&\r\n          transactions.map((transaction, keyTransactions) => {\r\n            cnt++;\r\n\r\n            const {\r\n              // business_description,\r\n              // business_id,\r\n              // business_image,\r\n              // business_link,\r\n              // business_status,\r\n              business_title,\r\n              // comment,\r\n              conv_amount,\r\n              created,\r\n              // currency,\r\n              // exchange_rate,\r\n              sender_firstname,\r\n              sender_lastname,\r\n              // recipient_firstname,\r\n              // recipient_lastname,\r\n              // purpose_description,\r\n              purpose_id,\r\n              // purpose_image,\r\n              // purpose_link,\r\n              // purpose_status,\r\n              purpose_title,\r\n              recipient_id,\r\n              roles,\r\n              share,\r\n              share_per_cent,\r\n              // sender_id,\r\n              // sender_status,\r\n              // recipient_status,\r\n              // to_account,\r\n              type,\r\n            } = transaction;\r\n\r\n            // const i_am_sender = sender_id === accountNumber;\r\n            const i_am_recipient = recipient_id === accountNumber;\r\n\r\n            const roles_available =\r\n              roles !== null && roles !== \"-\" && typeof roles !== \"undefined\";\r\n            const arrRoles = roles_available ? roles.split(\",\") : [];\r\n\r\n            const shares_available =\r\n              typeof share !== \"undefined\" && share !== null && share !== \"-\";\r\n\r\n            if (type === \"allownace\") {\r\n              return (\r\n                <ListGroup.Item key={keyTransactions} action>\r\n                  {t(\"Daily allowance\")}\r\n                  <span style={{ float: \"right\" }}>{format(conv_amount)}</span>\r\n                  <br />\r\n                  <small>\r\n                    {formatDate(created, {\r\n                      month: \"long\",\r\n                      day: \"numeric\",\r\n                      year: \"numeric\",\r\n                    })}\r\n                  </small>\r\n                </ListGroup.Item>\r\n              );\r\n            } else if (type === \"transfer U2S\") {\r\n              return (\r\n                <ListGroup.Item key={keyTransactions} action>\r\n                  {sender_firstname} {sender_lastname}\r\n                  <span style={{ float: \"right\" }}>\r\n                    {i_am_recipient ? \"\" : \"-\"}\r\n                    {format(conv_amount)}\r\n                  </span>\r\n                  <br />\r\n                  <small>{formatDate(created)}</small>\r\n                </ListGroup.Item>\r\n              );\r\n            } else if (type === \"transfer U2U\") {\r\n              return (\r\n                <ListGroup.Item key={keyTransactions} action>\r\n                  {sender_firstname} {sender_lastname}\r\n                  <span style={{ float: \"right\" }}>\r\n                    {i_am_recipient ? \"\" : \"-\"}\r\n                    {format(conv_amount)}\r\n                  </span>\r\n                  <br />\r\n                  <small>{formatDate(created)}</small>\r\n                </ListGroup.Item>\r\n              );\r\n            } else if (type === \"transfer U2B\") {\r\n              return (\r\n                <ListGroup.Item key={keyTransactions} action>\r\n                  {purpose_id}\r\n                  <span style={{ float: \"right\" }}>\r\n                    {i_am_recipient ? \"\" : \"-\"}\r\n                    {format(conv_amount)}\r\n                  </span>\r\n                  <br />\r\n                  {business_title} &middot; {purpose_title}\r\n                  <br />\r\n                  {sender_firstname} {sender_lastname}\r\n                  {roles_available && (\r\n                    <>\r\n                      <br />\r\n                      {arrRoles.map((role, key) => {\r\n                        return (\r\n                          <span key={key}>\r\n                            {\" \"}\r\n                            <Badge pill variant=\"secondary\">\r\n                              {role}\r\n                            </Badge>\r\n                          </span>\r\n                        );\r\n                      })}\r\n                    </>\r\n                  )}{\" \"}\r\n                  {shares_available && (\r\n                    <>\r\n                      <br />\r\n                      {share} {t(\"shares\")} ({formatPerCent(share_per_cent)})\r\n                    </>\r\n                  )}\r\n                  <br />\r\n                  <small>{formatDate(created)}</small>\r\n                </ListGroup.Item>\r\n              );\r\n\r\n              // TODO: check if this works\r\n            } else {\r\n              console.log(\"Unknown transfer type:\", type);\r\n\r\n              return <></>;\r\n            }\r\n          })}\r\n      </ListGroup>\r\n      {cnt === 0 && (\r\n        <p className=\"text-center text-muted\">{t(\"No transactions\")}</p>\r\n      )}\r\n      <br />\r\n\r\n      <Pagination\r\n        {...args}\r\n        size=\"md\"\r\n        countItems={countTransactions}\r\n        itemsPerPage={transactionsPerPage}\r\n        active={activePageTransactions}\r\n        onClick={onPageSelect}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React, { useState, useRef } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, Toast, Badge } from \"react-bootstrap\";\r\nimport { Settings } from \"@material-ui/icons\";\r\nimport _ from \"lodash\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = {\r\n    namespace: \"Shareholder\",\r\n    request: \"change share\",\r\n    purpose: null,\r\n    shareholder: null,\r\n    closeButton: true,\r\n    rangeControl: true,\r\n    sharePerCent: null,\r\n    businessTitle: null,\r\n    purposeTitle: null,\r\n    businessOwnerFirstname: null,\r\n    businessOwnerLastname: null,\r\n    sharesCreated: null,\r\n  };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  const { purposeShareholders } = props.barrelGetters;\r\n  const { setPurposeShareholders } = props.barrelSetters;\r\n  const { sendRequest, formatPerCent, formatDate } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  const [userQuery, setUserQuery] = useState(props.share);\r\n  const delayedQuery = useRef(_.debounce((q) => sendQuery(q), 2000)).current;\r\n\r\n  /**\r\n    * Destructured vars\r\n    ============================================================================ */\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  const onChange = (e) => {\r\n    // console.log(props.shareholder, e.target.value);\r\n    setUserQuery(e.target.value);\r\n    delayedQuery(e.target.value);\r\n  };\r\n\r\n  const onClose = () => {\r\n    // console.log(\"delete\", props.purpose, props.shareholder);\r\n    let data = {};\r\n    data.purpose_id = props.purpose;\r\n    data.shareholder_id = props.shareholder;\r\n    return sendRequest({ req: \"remove shareholder\", data });\r\n  };\r\n\r\n  const sendQuery = (delayedQuery) => {\r\n    // console.log(props.purpose, props.shareholder, delayedQuery);\r\n    const ps = purposeShareholders;\r\n    ps[props.id].share = delayedQuery;\r\n    setPurposeShareholders(JSON.stringify(ps));\r\n    let data = {};\r\n    data.purpose_id = props.purpose;\r\n    data.shareholder_id = props.shareholder;\r\n    data.share = delayedQuery;\r\n    // console.log(data);\r\n    return sendRequest({ req: props.request, data });\r\n  };\r\n\r\n  /**\r\n    * Functions\r\n    ============================================================================ */\r\n  const getJSX = () => {\r\n    const sharesLabelId = `sharesLabel${props.key}`;\r\n    return (\r\n      <Toast key={props.key} onClose={onClose} style={{ minWidth: \"100%\" }}>\r\n        <Toast.Header closeButton={props.closeButton}>\r\n          <strong className=\"mr-auto\">\r\n            {props.firstname} {props.lastname}{\" \"}\r\n            <small>\r\n              <Settings\r\n                hidden={true}\r\n                fontSize=\"small\"\r\n                style={{ color: \"var(--dark)\" }}\r\n              />\r\n            </small>\r\n          </strong>\r\n          <small>\r\n            <span id={sharesLabelId}>{userQuery}</span> {t(\"shares\")}\r\n          </small>\r\n        </Toast.Header>\r\n        <Toast.Body>\r\n          <Form>\r\n            <Form.Group controlId=\"formRoles\">\r\n              <div>\r\n                {props.roles.map((role, key) => {\r\n                  return (\r\n                    <span key={key}>\r\n                      <Badge pill variant=\"secondary\">\r\n                        {role}\r\n                      </Badge>{\" \"}\r\n                    </span>\r\n                  );\r\n                })}\r\n              </div>\r\n            </Form.Group>\r\n\r\n            {props.rangeControl && (\r\n              <Form.Group controlId=\"formBasicRange\">\r\n                <Form.Control\r\n                  type=\"range\"\r\n                  variant=\"light\"\r\n                  // value={share}\r\n                  defaultValue={userQuery}\r\n                  // value={userQuery}\r\n                  min={0}\r\n                  max={1000}\r\n                  step={1}\r\n                  // ref={this.input}\r\n                  onChange={onChange}\r\n                />\r\n              </Form.Group>\r\n            )}\r\n          </Form>\r\n          <span>\r\n            {props.sharePerCent !== null && formatPerCent(props.sharePerCent)}{\" \"}\r\n            {props.businessTitle !== null && props.businessTitle}{\" \"}\r\n            {props.businessTitle !== null && props.purposeTitle !== null && (\r\n              <> &middot; </>\r\n            )}\r\n            {props.purposeTitle !== null && props.purposeTitle}{\" \"}\r\n          </span>\r\n          {props.sharesCreated !== null && (\r\n            <>\r\n              <br />\r\n              {formatDate(props.sharesCreated, {\r\n                month: \"long\",\r\n                day: \"numeric\",\r\n                year: \"numeric\",\r\n              })}\r\n            </>\r\n          )}{\" \"}\r\n          {(props.businessOwnerFirstname !== null ||\r\n            props.businessOwnerLastname !== null) && <br />}\r\n          {props.businessOwnerFirstname !== null &&\r\n            props.businessOwnerFirstname}{\" \"}\r\n          {props.businessOwnerLastname !== null && props.businessOwnerLastname}{\" \"}\r\n        </Toast.Body>\r\n      </Toast>\r\n    );\r\n  };\r\n\r\n  /**\r\n    * Return\r\n    ============================================================================ */\r\n  return <>{getJSX()}</>;\r\n};\r\n","/**\r\n * CSS\r\n ============================================================================ */\r\n// import \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\r\n\r\n/**\r\n * System imports\r\n ============================================================================ */\r\nimport React from \"react\";\r\n// import { Form, InputGroup, Button, Table, ListGroup } from \"react-bootstrap\";\r\n// import { Formik } from \"formik\";\r\n// import * as yup from \"yup\";\r\nimport { useTranslation } from \"react-i18next\";\r\n// import BootstrapTable from \"react-bootstrap-table-next\";\r\n// import Skeleton, { SkeletonTheme } from \"react-loading-skeleton\";\r\n\r\n/**\r\n   * User imports\r\n   ============================================================================ */\r\n// import Card from \"../card\";\r\n// import SubmitButton from \"../submitButton\";\r\nimport Pagination from \"../pagination\";\r\nimport Shareholder from \"../shareholder\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n     * Default Properties\r\n     ============================================================================ */\r\n  let defaults = {\r\n    request: \"get shares\",\r\n    namespace: \"Shares\",\r\n  };\r\n\r\n  /**\r\n     * Properties\r\n     ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n     * Barrels\r\n     ============================================================================ */\r\n  const {\r\n    shares,\r\n    countShares,\r\n    activePageShares,\r\n    sharesPerPage,\r\n    // accountNumber,\r\n    userData,\r\n  } = props.barrelGetters;\r\n  // const {  } = props.barrelSetters;\r\n  const {\r\n    // getReviser,\r\n    // getWorkplace,\r\n    // sendRequest,\r\n    getShares,\r\n    // format,\r\n    // formatPerCent,\r\n    // formatDate,\r\n  } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n     * Destructured vars\r\n     ============================================================================ */\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  /**\r\n     * Functions\r\n     ============================================================================ */\r\n\r\n  // const indication = () => {\r\n  //   return \"THE TABLE IS EMPTY\";\r\n  // };\r\n\r\n  const onPageSelect = (number) => {\r\n    console.log(\"on page select\", number);\r\n    switch (number) {\r\n      case \"First\":\r\n        number = 1;\r\n        break;\r\n      case \"Prev\":\r\n        number = activePageShares > 1 ? activePageShares - 1 : 1;\r\n        break;\r\n      case \"Next\":\r\n        number =\r\n          activePageShares < Math.ceil(countShares / sharesPerPage)\r\n            ? activePageShares + 1\r\n            : Math.ceil(countShares / sharesPerPage);\r\n        break;\r\n      case \"Last\":\r\n        number = Math.ceil(countShares / sharesPerPage);\r\n        break;\r\n      default:\r\n        // number = number;\r\n        break;\r\n    }\r\n    getShares(number);\r\n  };\r\n\r\n  let cnt = 0;\r\n\r\n  /**\r\n     * Return\r\n     ============================================================================ */\r\n  return (\r\n    <>\r\n      {shares !== null &&\r\n        shares.map((share, keyShares) => {\r\n          cnt++;\r\n\r\n          const {\r\n            // business_description,\r\n            // business_id,\r\n            // business_image,\r\n            // business_link,\r\n            // business_status,\r\n            business_title,\r\n            owner_firstname,\r\n            owner_lastname,\r\n            // owner_status,\r\n            // owner_uid,\r\n            // purpose_description,\r\n            purpose_id,\r\n            // purpose_image,\r\n            // purpose_link,\r\n            // purpose_status,\r\n            purpose_title,\r\n            shareholder_id,\r\n            shares_created,\r\n            // shares_description,\r\n            share_per_cent,\r\n            shares_roles,\r\n            shares_share,\r\n            // shares_status,\r\n            // shares_title,\r\n          } = share;\r\n\r\n          const arrRoles = shares_roles !== null ? shares_roles.split(\",\") : [];\r\n          // const content = `${owner_firstname} ${owner_lastname} / ${formatDate(\r\n          //   shares_created\r\n          // )}`;\r\n\r\n          // console.log(\"keyShares:\", keyShares);\r\n\r\n          return (\r\n            <Shareholder\r\n              {...args}\r\n              key={keyShares}\r\n              id={keyShares}\r\n              shareholder={shareholder_id}\r\n              purpose={purpose_id}\r\n              firstname={userData.firstname}\r\n              lastname={userData.lastname}\r\n              share={shares_share}\r\n              roles={arrRoles}\r\n              closeButton={false}\r\n              rangeControl={false}\r\n              sharePerCent={share_per_cent}\r\n              businessOwnerFirstname={owner_firstname}\r\n              businessOwnerLastname={owner_lastname}\r\n              businessTitle={business_title}\r\n              purposeTitle={purpose_title}\r\n              sharesCreated={shares_created}\r\n            />\r\n          );\r\n        })}\r\n\r\n      {cnt === 0 && <p className=\"text-center text-muted\">{t(\"No shares\")}</p>}\r\n\r\n      <Pagination\r\n        {...args}\r\n        size=\"md\"\r\n        countItems={countShares}\r\n        itemsPerPage={sharesPerPage}\r\n        active={activePageShares}\r\n        onClick={onPageSelect}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, Badge, Accordion, Card } from \"react-bootstrap\";\r\n// import { useAccordionToggle } from \"react-bootstrap/AccordionToggle\";\r\n// import { Redirect } from \"react-router-dom\";\r\n// import Octicon, { ChevronRight } from \"@primer/octicons-react\";\r\n// import AccessAlarmIcon from \"@material-ui/icons/AccessAlarm\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\n\r\n// import ZCard from \"../card\";\r\nimport Transactions from \"../transactions\";\r\nimport Shares from \"../shares\";\r\n\r\nexport default (args) => {\r\n  // let defaults = {};\r\n  // const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const {\r\n    userData,\r\n    accountNumber,\r\n    accordionView,\r\n    // currencyAbbr,\r\n  } = props.barrelGetters;\r\n  const {\r\n    setAccountType,\r\n    setRedirectTo,\r\n    setAccordionView,\r\n  } = props.barrelSetters;\r\n  const {\r\n    format,\r\n    getAccountData,\r\n    getTransactions,\r\n    getShares,\r\n  } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  // const userData = props.data.userData;\r\n  // let format = props.format;\r\n  const { t } = useTranslation(\"Balance\");\r\n  // const [redirect, setRedirect] = useState(false);\r\n\r\n  // console.log(\"BALANCE DATA:\", props);\r\n  // console.log(\"BALANCE userData\", userData);\r\n  // const userDataParsed = JSON.parse(userData);\r\n  const userDataParsed = userData;\r\n\r\n  // let footer = <small className=\"text-muted\">Last updated 3 mins ago</small>;\r\n\r\n  /**\r\n   * Send user registration request\r\n   * @param {object} data\r\n   */\r\n  // const gotoNextView = () => {\r\n  //   // console.log(props);\r\n\r\n  //   // props.data.setView(\"transfer\");\r\n  //   setRedirect(true);\r\n  // };\r\n\r\n  const onAccountTypeSelected = (type) => {\r\n    // console.log(type);\r\n\r\n    setAccountType(type);\r\n    setRedirectTo(\"/transfer\");\r\n  };\r\n\r\n  // console.log(userData);\r\n  const available =\r\n    userDataParsed !== null\r\n      ? format(\r\n          userDataParsed.acc_curr +\r\n            userDataParsed.acc_cred +\r\n            userDataParsed.acc_save\r\n        )\r\n      : null;\r\n  let acc_curr =\r\n    userDataParsed !== null ? format(userDataParsed.acc_curr) : null;\r\n  let acc_cred =\r\n    userDataParsed !== null ? format(userDataParsed.acc_cred) : null;\r\n  let acc_save =\r\n    userDataParsed !== null ? format(userDataParsed.acc_save) : null;\r\n\r\n  // if (props.data.view === \"transfer\") {\r\n  //   return <Redirect push to=\"/transfer\" />;\r\n  // }\r\n\r\n  // if (redirect) {\r\n  //   // props.data.setView(\"transfer\");\r\n  //   return <Redirect push to=\"/transfer\" />;\r\n  // }\r\n\r\n  if (accountNumber === null) setRedirectTo(\"/sign-out\");\r\n\r\n  const ToggleBalance = () => {\r\n    // console.log(\"decorate\");\r\n    setAccordionView(\"balance\");\r\n    getAccountData();\r\n  };\r\n\r\n  const ToggleTransactions = () => {\r\n    // console.log(\"decorate\");\r\n    setAccordionView(\"transactions\");\r\n    getTransactions(1);\r\n  };\r\n\r\n  const ToggleShares = () => {\r\n    // console.log(\"decorate\");\r\n    setAccordionView(\"shares\");\r\n    getShares(1);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Accordion defaultActiveKey={accordionView}>\r\n        <Card>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey=\"balance\"\r\n            style={{\r\n              cursor: \"pointer\",\r\n              // backgroundColor: \"#e8f6f3\",\r\n            }}\r\n            onClick={ToggleBalance}\r\n          >\r\n            {t(\"Balance\")}\r\n          </Accordion.Toggle>\r\n\r\n          <Accordion.Collapse eventKey=\"balance\">\r\n            <Card.Body>\r\n              <Form noValidate>\r\n                <Form.Group>\r\n                  <Form.Label>{t(\"Available\")}</Form.Label>\r\n                  <Form.Text>\r\n                    <div style={{ fontSize: \"3em\" }}>{available}</div>\r\n                  </Form.Text>\r\n                </Form.Group>\r\n                <Form.Group>\r\n                  <ul className=\"list-group\">\r\n                    <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                      <div style={{}}>{t(\"Current account\")}</div>\r\n                      <span\r\n                        className=\"link\"\r\n                        onClick={() => onAccountTypeSelected(\"acc_curr\")}\r\n                      >\r\n                        <Badge variant=\"Light\">{acc_curr}</Badge>\r\n                        &nbsp;\r\n                        <ArrowForwardIosIcon style={{ color: \"var(--dark)\" }} />\r\n                      </span>\r\n                    </li>\r\n                    <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                      <div style={{}}>{t(\"Credit account\")}</div>\r\n\r\n                      <span\r\n                        className=\"link\"\r\n                        onClick={() => onAccountTypeSelected(\"acc_cred\")}\r\n                      >\r\n                        <Badge variant=\"Light\">{acc_cred}</Badge>\r\n                        &nbsp;\r\n                        <ArrowForwardIosIcon style={{ color: \"var(--dark)\" }} />\r\n                      </span>\r\n                    </li>\r\n                    <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                      <div style={{}}>{t(\"Savings account\")}</div>\r\n                      <span\r\n                        className=\"link\"\r\n                        onClick={() => onAccountTypeSelected(\"acc_save\")}\r\n                      >\r\n                        <Badge variant=\"Light\">{acc_save}</Badge>\r\n                        &nbsp;\r\n                        <ArrowForwardIosIcon style={{ color: \"var(--dark)\" }} />\r\n                      </span>\r\n                    </li>\r\n                  </ul>\r\n                </Form.Group>\r\n              </Form>\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n\r\n        <Card>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey=\"transactions\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={ToggleTransactions}\r\n          >\r\n            {t(\"Transactions\")}\r\n          </Accordion.Toggle>\r\n\r\n          <Accordion.Collapse eventKey=\"transactions\">\r\n            <Card.Body>\r\n              <Transactions {...args} />\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n\r\n        <Card>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey=\"shares\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={ToggleShares}\r\n          >\r\n            {t(\"Shares\")}\r\n          </Accordion.Toggle>\r\n\r\n          <Accordion.Collapse eventKey=\"shares\">\r\n            <Card.Body>\r\n              <Shares {...args} />\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n      </Accordion>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, InputGroup } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport Card from \"../card\";\r\nimport SubmitButton from \"../submitButton\";\r\n\r\nexport default ({\r\n  args,\r\n  title,\r\n  navigation,\r\n  navigationdefaultActiveKey,\r\n  onNavigationClick,\r\n}) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {\r\n    request: \"transfer U2S\",\r\n    namespace: \"Transfer\",\r\n  };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  // console.log(\"TRANSFER TO SELF DATA\", props);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const {\r\n    // request,\r\n    userData,\r\n    accountNumber,\r\n    accountType,\r\n    language,\r\n    currencyAbbr,\r\n  } = props.barrelGetters;\r\n  // const { setAccountType } = props.barrelSetters;\r\n  const {\r\n    format,\r\n    parseLocaleNumber,\r\n    sendRequest,\r\n    getReviser,\r\n    getWorkplace,\r\n  } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  // const userDataParsed = JSON.parse(userData);\r\n  // const userData = userData;\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  // const { currency_abbr } = userData;\r\n\r\n  /** \r\n   * Yup schema\r\n   ============================================================================ */\r\n  const schema = yup.object({\r\n    fromAccount: yup.string().required(t(\"From Account is required\")),\r\n    toAccount: yup.string().required(t(\"To Account is required\")),\r\n    amount: yup\r\n      .string()\r\n      .required(t(\"Amount is required\"))\r\n      .matches(new RegExp(t(\"Amount Regex\")), t(\"Wrong amount format\")),\r\n  });\r\n\r\n  let acc_curr = \"\";\r\n  let acc_cred = \"\";\r\n  let acc_save = \"\";\r\n  if (userData !== null) {\r\n    acc_curr = \" (\" + format(userData.acc_curr) + \")\";\r\n    acc_cred = \" (\" + format(userData.acc_cred) + \")\";\r\n    acc_save = \" (\" + format(userData.acc_save) + \")\";\r\n  }\r\n\r\n  /**\r\n   * Transfer to self\r\n   * @param {object} Form data\r\n   */\r\n  const transferToSelf = (data) => {\r\n    // console.log(\"TRANSFER U2S DATA:\", data);\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    data.uid = accountNumber;\r\n    data.amount = parseLocaleNumber(data.amount, language);\r\n    data.amount = new Intl.NumberFormat(\"en-US\", {\r\n      notation: \"standard\",\r\n      minimumFractionDigits: 2,\r\n    }).format(data.amount);\r\n\r\n    // onTransfer({ req: props.request, data: data });\r\n    sendRequest({ req: props.request, data: data });\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    transferToSelf(data);\r\n  };\r\n\r\n  const TransferToSelfForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    errors,\r\n  }) => (\r\n    <Card\r\n      title={title}\r\n      navigation={navigation}\r\n      navigationdefaultActiveKey={navigationdefaultActiveKey}\r\n      onNavigationClick={onNavigationClick}\r\n    >\r\n      <Form noValidate onSubmit={handleSubmit}>\r\n        <Form.Group controlId=\"validationFromAccount\">\r\n          <Form.Label>{t(\"From account\")}</Form.Label>\r\n          <Form.Control\r\n            as=\"select\"\r\n            custom\r\n            name=\"fromAccount\"\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.fromAccount && touched.fromAccount}\r\n          >\r\n            <option value=\"\">{t(\"Choose...\")}</option>\r\n            <option\r\n              value=\"acc_curr\"\r\n              hidden={accountType !== null && accountType !== \"acc_curr\"}\r\n            >\r\n              {t(\"Current account\")}\r\n              {acc_curr}\r\n            </option>\r\n            <option\r\n              value=\"acc_cred\"\r\n              hidden={accountType !== null && accountType !== \"acc_cred\"}\r\n            >\r\n              {t(\"Credit account\")}\r\n              {acc_cred}\r\n            </option>\r\n            <option\r\n              value=\"acc_save\"\r\n              hidden={accountType !== null && accountType !== \"acc_save\"}\r\n            >\r\n              {t(\"Savings account\")}\r\n              {acc_save}\r\n            </option>\r\n          </Form.Control>\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.fromAccount}\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"validationToAccount\">\r\n          <Form.Label>{t(\"To account\")}</Form.Label>\r\n          <Form.Control\r\n            as=\"select\"\r\n            custom\r\n            name=\"toAccount\"\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.toAccount && touched.toAccount}\r\n          >\r\n            <option value=\"\">{t(\"Choose...\")}</option>\r\n            <option value=\"acc_curr\" hidden={accountType === \"acc_curr\"}>\r\n              {t(\"Current account\")}\r\n              {acc_curr}\r\n            </option>\r\n            <option value=\"acc_cred\" hidden={accountType === \"acc_cred\"}>\r\n              {t(\"Credit account\")}\r\n              {acc_cred}\r\n            </option>\r\n            <option value=\"acc_save\" hidden={accountType === \"acc_save\"}>\r\n              {t(\"Savings account\")}\r\n              {acc_save}\r\n            </option>\r\n          </Form.Control>\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.toAccount}\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"validationFormikAmount\">\r\n          <Form.Label>{t(\"Amount\")}</Form.Label>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text id=\"inputGroupPrepend\">\r\n                {currencyAbbr}\r\n              </InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <Form.Control\r\n              // type=\"number\"\r\n              placeholder={format(0, \"\")}\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"amount\"\r\n              value={values.amount}\r\n              onChange={handleChange}\r\n              // onBlur={handleChange}\r\n              isInvalid={!!errors.amount && touched.amount}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.amount}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        <SubmitButton\r\n          {...args}\r\n          caption={t(\"Submit\")}\r\n          request=\"transfer U2S\"\r\n          namespace={props.namespace}\r\n        />\r\n      </Form>\r\n    </Card>\r\n  );\r\n\r\n  return (\r\n    <Formik\r\n      component={TransferToSelfForm}\r\n      validationSchema={schema}\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        fromAccount: \"\",\r\n        toAccount: \"\",\r\n        amount: \"\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n","/**\r\n * System imports\r\n */\r\nimport React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, InputGroup } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport SubmitButton from \"../submitButton\";\r\n\r\n/**\r\n * User imports\r\n */\r\nimport Card from \"../card\";\r\n\r\n/**\r\n * Component: TransferToPerson\r\n */\r\nexport default ({\r\n  args,\r\n  title,\r\n  navigation,\r\n  navigationdefaultActiveKey,\r\n  onNavigationClick,\r\n}) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = { request: \"transfer U2U\", namespace: \"Transfer\" };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const {\r\n    // request,\r\n    userData,\r\n    accountNumber,\r\n    language,\r\n    accountType,\r\n    currencyAbbr,\r\n  } = props.barrelGetters;\r\n  // const { setAccountType } = props.barrelSetters;\r\n  const {\r\n    format,\r\n    parseLocaleNumber,\r\n    sendRequest,\r\n    getReviser,\r\n    getWorkplace,\r\n  } = props.barrelFunctions;\r\n  // const { onTransfer } = props.barrelEventHandlers;\r\n\r\n  /** \r\n   * Custom hooks\r\n   ============================================================================ */\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  /** \r\n   * Destructuring\r\n   ============================================================================ */\r\n  // const { currency_abbr } = userData;\r\n\r\n  /** \r\n   * Yup schema\r\n   ============================================================================ */\r\n  const schema = yup.object({\r\n    fromAccount: yup.string().required(t(\"From Account is required\")),\r\n    toPersonalID: yup\r\n      .string()\r\n      .required(t(\"Recipients Personal ID is required\"))\r\n      .matches(\r\n        new RegExp(t(\"Personal ID Regex\")),\r\n        t(\"Wrong Personal ID format\")\r\n      ),\r\n    amount: yup\r\n      .string()\r\n      .required(t(\"Amount is required\"))\r\n      .matches(new RegExp(t(\"Amount Regex\")), t(\"Wrong amount format\")),\r\n  });\r\n\r\n  let acc_curr = \"\";\r\n  let acc_cred = \"\";\r\n  let acc_save = \"\";\r\n  if (userData !== null) {\r\n    acc_curr = \" (\" + format(userData.acc_curr) + \")\";\r\n    acc_cred = \" (\" + format(userData.acc_cred) + \")\";\r\n    acc_save = \" (\" + format(userData.acc_save) + \")\";\r\n  }\r\n\r\n  /**\r\n   * Transfer to self\r\n   * @param {object} data\r\n   */\r\n  const transferToPerson = (data) => {\r\n    // console.log(\"TRANSFER U2U DATA:\", data);\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    data.uid = accountNumber;\r\n    data.amount = parseLocaleNumber(data.amount, language);\r\n    data.amount = new Intl.NumberFormat(\"en-US\", {\r\n      notation: \"standard\",\r\n      minimumFractionDigits: 2,\r\n    }).format(data.amount);\r\n\r\n    sendRequest({ req: props.request, data: data });\r\n    // onTransfer({ req: props.request, data: data });\r\n  };\r\n\r\n  // return <>test</>;\r\n\r\n  const onSubmit = (data) => {\r\n    transferToPerson(data);\r\n  };\r\n\r\n  const TransferToPersonForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    errors,\r\n  }) => (\r\n    <Card\r\n      title={title}\r\n      navigation={navigation}\r\n      navigationdefaultActiveKey={navigationdefaultActiveKey}\r\n      onNavigationClick={onNavigationClick}\r\n    >\r\n      <Form noValidate onSubmit={handleSubmit}>\r\n        {/* Field: From account */}\r\n        <Form.Group controlId=\"validationFromAccount\">\r\n          <Form.Label>{t(\"From account\")}</Form.Label>\r\n          <Form.Control\r\n            as=\"select\"\r\n            custom\r\n            name=\"fromAccount\"\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.fromAccount && touched.fromAccount}\r\n          >\r\n            <option value=\"\">{t(\"Choose...\")}</option>\r\n            <option\r\n              value=\"acc_curr\"\r\n              hidden={accountType !== null && accountType !== \"acc_curr\"}\r\n            >\r\n              {t(\"Current account\")}\r\n              {acc_curr}\r\n            </option>\r\n            <option\r\n              value=\"acc_cred\"\r\n              hidden={accountType !== null && accountType !== \"acc_cred\"}\r\n            >\r\n              {t(\"Credit account\")}\r\n              {acc_cred}\r\n            </option>\r\n            <option\r\n              value=\"acc_save\"\r\n              hidden={accountType !== null && accountType !== \"acc_save\"}\r\n            >\r\n              {t(\"Savings account\")}\r\n              {acc_save}\r\n            </option>\r\n          </Form.Control>\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.fromAccount}\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n\r\n        {/* Field: Recipients Personal ID */}\r\n        <Form.Group controlId=\"validationFormikToPersonalID\">\r\n          <Form.Label>{t(\"To Personal ID\")}</Form.Label>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text id=\"inputGroupPrepend\">ID</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"XXXXXX-XXXXX\"\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"toPersonalID\"\r\n              value={values.toPersonalID}\r\n              onChange={handleChange}\r\n              isInvalid={!!errors.toPersonalID && touched.toPersonalID}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.toPersonalID}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        {/* Field: Description */}\r\n        <Form.Group\r\n          controlId=\"description\"\r\n          name=\"description\"\r\n          value={values.description}\r\n          onChange={handleChange}\r\n        >\r\n          <Form.Label>{t(\"Description\")}</Form.Label>\r\n          <Form.Control as=\"textarea\" rows=\"3\" />\r\n        </Form.Group>\r\n\r\n        {/* Field: Amount */}\r\n        <Form.Group controlId=\"validationFormikAmount\">\r\n          <Form.Label>{t(\"Amount\")}</Form.Label>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text id=\"inputGroupPrepend\">\r\n                {currencyAbbr}\r\n              </InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <Form.Control\r\n              // type=\"number\"\r\n              placeholder={format(0, \"\")}\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"amount\"\r\n              value={values.amount}\r\n              onChange={handleChange}\r\n              // onBlur={handleChange}\r\n              isInvalid={!!errors.amount && touched.amount}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.amount}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        {/* Button: Next */}\r\n\r\n        <SubmitButton\r\n          {...args}\r\n          caption={t(\"Submit\")}\r\n          request={props.request}\r\n          namespace={props.namespace}\r\n        />\r\n      </Form>\r\n    </Card>\r\n  );\r\n\r\n  return (\r\n    <Formik\r\n      component={TransferToPersonForm}\r\n      validationSchema={schema}\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        fromAccount: \"\",\r\n        toPersonalID: \"\",\r\n        amount: \"\",\r\n        description: \"\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, InputGroup } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport Card from \"../card\";\r\nimport SubmitButton from \"../submitButton\";\r\n\r\nexport default ({\r\n  args,\r\n  title,\r\n  navigation,\r\n  navigationdefaultActiveKey,\r\n  onNavigationClick,\r\n}) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = { request: \"transfer U2B\", namespace: \"Transfer\" };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  // console.log(\"TRANSFER TO SELF DATA\", props);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const {\r\n    // request,\r\n    userData,\r\n    accountNumber,\r\n    language,\r\n    accountType,\r\n    currencyAbbr,\r\n  } = props.barrelGetters;\r\n  // const { setAccountType } = props.barrelSetters;\r\n  const {\r\n    format,\r\n    parseLocaleNumber,\r\n    sendRequest,\r\n    getReviser,\r\n    getWorkplace,\r\n  } = props.barrelFunctions;\r\n  // const { onTransfer } = props.barrelEventHandlers;\r\n\r\n  // const userDataParsed = JSON.parse(userData);\r\n  // const userDataParsed = userData;\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  /** \r\n   * Destructuring\r\n   ============================================================================ */\r\n  // const { currency_abbr } = userData;\r\n\r\n  const schema = yup.object({\r\n    fromAccount: yup.string().required(t(\"From Account is required\")),\r\n    // businessTitle: yup\r\n    //   .string()\r\n    //   .required(t(\"Recipients Business ID is required\")),\r\n    purposeID: yup.string().required(t(\"Purpose ID is required\")),\r\n    amount: yup\r\n      .string()\r\n      .required(t(\"Amount is required\"))\r\n      .matches(new RegExp(t(\"Amount Regex\")), t(\"Wrong amount format\")),\r\n  });\r\n\r\n  let acc_curr = \"\";\r\n  let acc_cred = \"\";\r\n  let acc_save = \"\";\r\n  if (userData !== null) {\r\n    acc_curr = \" (\" + format(userData.acc_curr) + \")\";\r\n    acc_cred = \" (\" + format(userData.acc_cred) + \")\";\r\n    acc_save = \" (\" + format(userData.acc_save) + \")\";\r\n  }\r\n\r\n  /**\r\n   * Transfer to self\r\n   * @param {object} data\r\n   */\r\n  const transferToBusiness = (data) => {\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    data.uid = accountNumber;\r\n    data.currency = currencyAbbr;\r\n    data.amount = parseLocaleNumber(data.amount, language);\r\n    data.amount = new Intl.NumberFormat(\"en-US\", {\r\n      notation: \"standard\",\r\n      minimumFractionDigits: 2,\r\n    }).format(data.amount);\r\n    // data.amount = parseFloat(data.amount);\r\n    // data.amount = Number(data.amount.replace(/[^0-9.-]+/g, \"\"));\r\n\r\n    sendRequest({ req: props.request, data: data });\r\n    // onTransfer({ req: props.request, data: data });\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    transferToBusiness(data);\r\n  };\r\n\r\n  const TransferToBusinessForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    errors,\r\n  }) => (\r\n    <Card\r\n      title={title}\r\n      navigation={navigation}\r\n      navigationdefaultActiveKey={navigationdefaultActiveKey}\r\n      onNavigationClick={onNavigationClick}\r\n    >\r\n      {/* From account */}\r\n      <Form noValidate onSubmit={handleSubmit}>\r\n        <Form.Group controlId=\"validationFromAccount\">\r\n          <Form.Label>{t(\"From account\")}</Form.Label>\r\n          <Form.Control\r\n            as=\"select\"\r\n            custom\r\n            name=\"fromAccount\"\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.fromAccount && touched.fromAccount}\r\n          >\r\n            <option value=\"\">{t(\"Choose...\")}</option>\r\n            <option\r\n              value=\"acc_curr\"\r\n              hidden={accountType !== null && accountType !== \"acc_curr\"}\r\n            >\r\n              {t(\"Current account\")}\r\n              {acc_curr}\r\n            </option>\r\n            <option\r\n              value=\"acc_cred\"\r\n              hidden={accountType !== null && accountType !== \"acc_cred\"}\r\n            >\r\n              {t(\"Credit account\")}\r\n              {acc_cred}\r\n            </option>\r\n            <option\r\n              value=\"acc_save\"\r\n              hidden={accountType !== null && accountType !== \"acc_save\"}\r\n            >\r\n              {t(\"Savings account\")}\r\n              {acc_save}\r\n            </option>\r\n          </Form.Control>\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.fromAccount}\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n\r\n        {/*\r\n        <Form.Group controlId=\"validationFormikDestinationAccountID\">\r\n          <Form.Label>{t(\"To Business ID\")}</Form.Label>\r\n          <InputGroup>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"\"\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"businessTitle\"\r\n              value={values.businessTitle}\r\n              onChange={handleChange}\r\n              isInvalid={!!errors.businessTitle && touched.businessTitle}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.businessTitle}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n        */}\r\n\r\n        {/* To purpose */}\r\n        <Form.Group controlId=\"validationFormikDestinationAccountID\">\r\n          <Form.Label>{t(\"To Purpose ID\")}</Form.Label>\r\n          <InputGroup>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"\"\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"purposeID\"\r\n              value={values.purposeID}\r\n              onChange={handleChange}\r\n              isInvalid={!!errors.purposeID && touched.purposeID}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.purposeID}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        {/* Field: Description */}\r\n        <Form.Group\r\n          controlId=\"description\"\r\n          name=\"description\"\r\n          value={values.description}\r\n          onChange={handleChange}\r\n        >\r\n          <Form.Label>{t(\"Description\")}</Form.Label>\r\n          <Form.Control as=\"textarea\" rows=\"3\" />\r\n        </Form.Group>\r\n\r\n        {/* Amount */}\r\n        <Form.Group controlId=\"validationFormikAmount\">\r\n          <Form.Label>{t(\"Amount\")}</Form.Label>\r\n          <InputGroup>\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text id=\"inputGroupPrepend\">\r\n                {currencyAbbr}\r\n              </InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <Form.Control\r\n              type=\"string\" // do NOT change to number!!\r\n              placeholder={format(0, \"\")}\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"amount\"\r\n              value={values.amount}\r\n              onChange={handleChange}\r\n              isInvalid={!!errors.amount && touched.amount}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.amount}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        {/* Submit button */}\r\n        <SubmitButton\r\n          {...args}\r\n          caption={t(\"Submit\")}\r\n          request={props.request}\r\n          namespace={props.namespace}\r\n        />\r\n      </Form>\r\n    </Card>\r\n  );\r\n\r\n  return (\r\n    <Formik\r\n      component={TransferToBusinessForm}\r\n      validationSchema={schema}\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        fromAccount: \"\",\r\n        purposeID: \"\",\r\n        amount: \"\",\r\n        description: \"\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, InputGroup, Button } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\n// import Card from \"../card\";\r\n\r\n// import { useStickyState } from \"../../utils/state\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const { accountNumber } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const {\r\n    // format,\r\n    // parseLocaleNumber,\r\n    sendRequest,\r\n    getReviser,\r\n    getWorkplace,\r\n  } = props.barrelFunctions;\r\n  const { onBusinessRegistration } = props.barrelEventHandlers;\r\n\r\n  // const userDataParsed = JSON.parse(userData);\r\n  // const userDataParsed = userData;\r\n  const { t } = useTranslation([\"BusinessRegistration\"]);\r\n\r\n  // const [addOwnerAsShareholder, setAddOwnerAsShareholder] = useStickyState(\r\n  //   false,\r\n  //   \"addOwnerAsShareholder\"\r\n  // );\r\n\r\n  const schema = yup.object({\r\n    businessTitle: yup\r\n      .string()\r\n      .required(t(\"Business title is a required field\"))\r\n      .min(3, t(\"Business title too short\"))\r\n      .max(70, t(\"Business title too long\"))\r\n      .trim(),\r\n    businessDescription: yup.string().optional(),\r\n  });\r\n\r\n  /**\r\n   * Transfer to self\r\n   * @param {object} data\r\n   */\r\n  const registerBusiness = (data) => {\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    data.uid = accountNumber;\r\n\r\n    // console.log(\"REGISTER BUSINESS DATA:\", data);\r\n\r\n    // onBusinessRegistration({ req: \"register business\", data: data });\r\n    sendRequest({ req: \"register business\", data: data });\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    registerBusiness(data);\r\n    // setAddOwnerAsShareholder(true);\r\n  };\r\n\r\n  const RegisterBusinessForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    errors,\r\n  }) => (\r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      {/* Business Title (Business ID) */}\r\n      <Form.Group controlId=\"validationFormikDestinationAccountID\">\r\n        <Form.Label>{t(\"Business Title\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            type=\"text\"\r\n            placeholder=\"\"\r\n            aria-describedby=\"inputGroupPrepend\"\r\n            name=\"businessTitle\"\r\n            value={values.businessTitle}\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.businessTitle && touched.businessTitle}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.businessTitle}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      {/* Business Description */}\r\n      <Form.Group\r\n        controlId=\"businessDescription\"\r\n        name=\"businessDescription\"\r\n        value={values.businessDescription}\r\n        onChange={handleChange}\r\n      >\r\n        <Form.Label>{t(\"Business Description\")}</Form.Label>\r\n        <Form.Control as=\"textarea\" rows=\"3\" />\r\n      </Form.Group>\r\n\r\n      {/* Submit button */}\r\n      <Button type=\"submit\" block>\r\n        {t(\"Submit\")}\r\n      </Button>\r\n    </Form>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        component={RegisterBusinessForm}\r\n        validationSchema={schema}\r\n        onSubmit={onSubmit}\r\n        initialValues={{\r\n          businessTitle: \"\",\r\n          businessDescription: \"\",\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, InputGroup, Button } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\n// import Card from \"../card\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = { businessID: null };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  // console.log(\"PURPOSE REGISTRATION PROPS:\", props);\r\n\r\n  const barrels = props.data;\r\n  const { businessID } = props;\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const { accountNumber } = barrels.barrelGetters;\r\n  // const {} = barrels.barrelSetters;\r\n  const { getReviser, getWorkplace } = barrels.barrelFunctions;\r\n  const { onPurposeRegistration } = barrels.barrelEventHandlers;\r\n\r\n  // const userDataParsed = JSON.parse(userData);\r\n  // const userDataParsed = userData;\r\n  const { t } = useTranslation([\"PurposeRegistration\"]);\r\n\r\n  const schema = yup.object({\r\n    purposeTitle: yup\r\n      .string()\r\n      .required(t(\"Purpose title is a required field\"))\r\n      .min(3, t(\"Purpose title too short\"))\r\n      .max(70, t(\"Purpose title too long\"))\r\n      .trim(),\r\n    purposeDescription: yup.string().optional(),\r\n  });\r\n\r\n  /**\r\n   * Transfer to self\r\n   * @param {object} data\r\n   */\r\n  const RegisterPurpose = (data) => {\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    data.businessID = businessID;\r\n    data.uid = accountNumber;\r\n\r\n    // console.log(\"REGISTER PURPOSE DATA:\", data);\r\n\r\n    onPurposeRegistration({ req: \"register purpose\", data: data });\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    RegisterPurpose(data);\r\n  };\r\n\r\n  const RegisterPurposeForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    errors,\r\n  }) => (\r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      {/* Purpose Title (Purpose ID) */}\r\n      <Form.Group controlId=\"validationFormikPurposeID\">\r\n        <Form.Label>{t(\"Purpose Title\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            type=\"text\"\r\n            placeholder=\"\"\r\n            aria-describedby=\"inputGroupPrepend\"\r\n            name=\"purposeTitle\"\r\n            value={values.purposeTitle}\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.purposeTitle && touched.purposeTitle}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.purposeTitle}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      {/* Purpose Description */}\r\n      <Form.Group\r\n        controlId=\"purposeDescription\"\r\n        name=\"purposeDescription\"\r\n        value={values.purposeDescription}\r\n        onChange={handleChange}\r\n      >\r\n        <Form.Label>{t(\"Purpose Description\")}</Form.Label>\r\n        <Form.Control as=\"textarea\" rows=\"3\" />\r\n      </Form.Group>\r\n\r\n      {/* Submit button */}\r\n      <Button type=\"submit\" block>\r\n        {t(\"Submit\")}\r\n      </Button>\r\n    </Form>\r\n  );\r\n\r\n  return (\r\n    <Formik\r\n      component={RegisterPurposeForm}\r\n      validationSchema={schema}\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        purposeTitle: \"\",\r\n        purposeDescription: \"\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, InputGroup, Toast } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\n// import Card from \"../card\";\r\nimport SubmitButton from \"../submitButton\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {\r\n    request: \"register shareholder\",\r\n    namespace: \"ShareholderRegistration\",\r\n  };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  const barrels = props;\r\n  const { purposeID } = props;\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const { accountNumber } = barrels.barrelGetters;\r\n  // const {} = barrels.barrelSetters;\r\n  const {\r\n    // format,\r\n    // parseLocaleNumber,\r\n    getReviser,\r\n    getWorkplace,\r\n    sendRequest,\r\n  } = barrels.barrelFunctions;\r\n  // const {} = barrels.barrelEventHandlers;\r\n\r\n  // const userDataParsed = JSON.parse(userData);\r\n  // const userDataParsed = userData;\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  // const thisRef = createRef();\r\n\r\n  const schema = yup.object({\r\n    personalID: yup\r\n      .string()\r\n      .required(t(\"Personal ID is required\"))\r\n      .matches(\r\n        new RegExp(t(\"Personal ID Regex\")),\r\n        t(\"Wrong Personal ID format\")\r\n      ),\r\n    shareholderRoles: yup.string().optional(),\r\n    shares: yup\r\n      .number()\r\n      .typeError(t(\"Shares must be a number\"))\r\n      .required(t(\"Shares is required\"))\r\n      .min(0, t(\"Shares too few\"))\r\n      .max(1000, t(\"Shares too many\")),\r\n  });\r\n\r\n  /**\r\n   * Send shareholder registration request\r\n   * @param {object} data\r\n   */\r\n  const onSubmit = (data) => {\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    data.uid = accountNumber;\r\n    data.purposeID = purposeID;\r\n\r\n    // console.log(\"REGISTER SHAREHOLDER DATA:\", data);\r\n\r\n    // onShareholderRegistration({ req: props.request, data: data });\r\n    sendRequest({ req: props.request, data: data });\r\n  };\r\n\r\n  const RegisterShareholderForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    errors,\r\n  }) => (\r\n    <Form id=\"shareholderRegistrationForm\" noValidate onSubmit={handleSubmit}>\r\n      <Toast style={{ minWidth: \"100%\" }}>\r\n        {/*\r\n        <Toast.Header closeButton={false}>\r\n          <strong className=\"mr-auto\">{t(\"Add Shareholder\")}</strong>\r\n        </Toast.Header>\r\n        */}\r\n        <Toast.Body>\r\n          <Form.Group controlId=\"validationFormikShareholderPersonalID\">\r\n            <Form.Label>{t(\"Shareholder Personal ID\")}</Form.Label>\r\n            <InputGroup>\r\n              <InputGroup.Prepend>\r\n                <InputGroup.Text id=\"inputGroupPrepend\">ID</InputGroup.Text>\r\n              </InputGroup.Prepend>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder={t(\"XXXXXX-XXXXX\")}\r\n                aria-describedby=\"inputGroupPrepend\"\r\n                name=\"personalID\"\r\n                value={values.personalID}\r\n                onChange={handleChange}\r\n                isInvalid={!!errors.personalID && touched.personalID}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">\r\n                {errors.personalID}\r\n              </Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Form.Group>\r\n          {/* Shareholder Roles */}\r\n          <Form.Group controlId=\"validationFormikShareholderRoles\">\r\n            <Form.Label>{t(\"Shareholder Roles\")}</Form.Label>\r\n            <InputGroup>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"\"\r\n                aria-describedby=\"inputGroupPrepend\"\r\n                name=\"shareholderRoles\"\r\n                value={values.shareholderRoles}\r\n                onChange={handleChange}\r\n                isInvalid={\r\n                  !!errors.shareholderRoles && touched.shareholderRoles\r\n                }\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">\r\n                {errors.shareholderRoles}\r\n              </Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Form.Group>\r\n\r\n          {/* Shares */}\r\n          <Form.Group controlId=\"validationFormikShareholderRoles\">\r\n            <Form.Label>{t(\"Shares\")}</Form.Label>\r\n            <InputGroup>\r\n              <Form.Control\r\n                type=\"number\"\r\n                min={0}\r\n                max={1000}\r\n                step={1}\r\n                placeholder=\"\"\r\n                aria-describedby=\"inputGroupPrepend\"\r\n                name=\"shares\"\r\n                value={values.shares}\r\n                onChange={handleChange}\r\n                isInvalid={!!errors.shares && touched.shares}\r\n              />\r\n              <Form.Control.Feedback type=\"invalid\">\r\n                {errors.shares}\r\n              </Form.Control.Feedback>\r\n            </InputGroup>\r\n          </Form.Group>\r\n\r\n          <SubmitButton\r\n            {...args}\r\n            caption={t(\"Submit\")}\r\n            request={props.request}\r\n            namespace={props.namespace}\r\n          />\r\n        </Toast.Body>\r\n      </Toast>\r\n    </Form>\r\n  );\r\n\r\n  return (\r\n    <Formik\r\n      component={RegisterShareholderForm}\r\n      validationSchema={schema}\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        personalID: \"\",\r\n        shares: 0,\r\n        shareholderRoles: \"\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  Accordion,\r\n  Card,\r\n  Tab,\r\n  Row,\r\n  Col,\r\n  ListGroup,\r\n  // Nav,\r\n  // Form,\r\n  // Toast,\r\n  // Badge,\r\n  // Container,\r\n  // Button,\r\n} from \"react-bootstrap\";\r\n// import { useAccordionToggle } from \"react-bootstrap/AccordionToggle\";\r\nimport { useTranslation } from \"react-i18next\";\r\n// import Octicon, { Plus, PlusSmall, Gear } from \"@primer/octicons-react\";\r\nimport { Add, Extension, Store } from \"@material-ui/icons\";\r\n\r\n// import Dropzone from \"../dropzone\";\r\n\r\nimport BusinessRegistration from \"../businessRegistration\";\r\nimport PurposeRegistration from \"../purposeRegistration\";\r\nimport ShareholderRegistration from \"../shareholderRegistration\";\r\n// import shareholderRegistration from \"../shareholderRegistration\";\r\nimport Shareholder from \"../shareholder\";\r\nimport Pagination from \"../pagination\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = { namespace: \"MyBusiness\" };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  // console.log(\"TRANSFER DATA\", props);\r\n\r\n  // const [businessLoaded, setBusinessLoaded] = useState(null);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const {\r\n    userBusinesses,\r\n    countBusinesses,\r\n    businessesPerPage,\r\n    activePageBusinesses,\r\n    userBusinessesLoaded,\r\n    activeBusiness,\r\n    activeBusinessID,\r\n    businessPurposes,\r\n    countBusinessPurposes,\r\n    businessPurposesPerPage,\r\n    activePageBusinessPurposes,\r\n    activeBusinesPurpose,\r\n    purposeShareholders,\r\n    language,\r\n    accountNumber,\r\n  } = props.barrelGetters;\r\n  const { setRedirectTo } = props.barrelSetters;\r\n  const {\r\n    getBusinesses,\r\n    getBusinessPurposes,\r\n    getPurposeShareholders,\r\n  } = props.barrelFunctions;\r\n  // const {  } = props.barrelEventHandlers;\r\n\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  useEffect(() => {\r\n    // getBusinesses();\r\n    // getBusinesses();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  /**\r\n   * Toggle business (Accordion card)\r\n   * @param {*} param0\r\n   */\r\n  // const ToggleBusiness = ({ children, eventKey, businessID }) => {\r\n  //   const decoratedOnClick = useAccordionToggle(eventKey, () =>\r\n  //     getBusinessPurposes(businessID, eventKey)\r\n  //   );\r\n\r\n  //   return <div onClick={decoratedOnClick}>{children}</div>;\r\n  // };\r\n  const ToggleBusiness = ({ eventKey, businessID }) => {\r\n    getBusinessPurposes(businessID, eventKey, 1);\r\n  };\r\n\r\n  // const onPageSelect = (number) => {\r\n  //   // console.log(\"on page select\", number);\r\n  //   switch (number) {\r\n  //     case \"First\":\r\n  //       number = 1;\r\n  //       break;\r\n  //     case \"Prev\":\r\n  //       number = activePageBusinesses > 1 ? activePageBusinesses - 1 : 1;\r\n  //       break;\r\n  //     case \"Next\":\r\n  //       number =\r\n  //         activePageBusinesses < Math.ceil(countBusinesses / businessesPerPage)\r\n  //           ? activePageBusinesses + 1\r\n  //           : Math.ceil(countBusinesses / businessesPerPage);\r\n  //       break;\r\n  //     case \"Last\":\r\n  //       number = Math.ceil(countBusinesses / businessesPerPage);\r\n  //       break;\r\n  //     default:\r\n  //       break;\r\n  //   }\r\n  //   getBusinesses(number);\r\n  // };\r\n\r\n  // const onPurposesPageClick = (number) => {\r\n  //   switch (number) {\r\n  //     case \"First\":\r\n  //       number = 1;\r\n  //       break;\r\n  //     case \"Prev\":\r\n  //       number =\r\n  //         activePageBusinessPurposes > 1 ? activePageBusinessPurposes - 1 : 1;\r\n  //       break;\r\n  //     case \"Next\":\r\n  //       number =\r\n  //         activePageBusinessPurposes <\r\n  //         Math.ceil(countBusinessPurposes / businessPurposesPerPage)\r\n  //           ? activePageBusinessPurposes + 1\r\n  //           : Math.ceil(countBusinessPurposes / businessPurposesPerPage);\r\n  //       break;\r\n  //     case \"Last\":\r\n  //       number = Math.ceil(countBusinessPurposes / businessPurposesPerPage);\r\n  //       break;\r\n  //     default:\r\n  //       break;\r\n  //   }\r\n  //   getBusinessPurposes(activeBusinessID, 0, number);\r\n  // };\r\n\r\n  /**\r\n   * Toggle purpose (Accordion card)\r\n   * @param {*} param0\r\n   */\r\n  // const TogglePurpose = ({ children, eventKey, purposeID }) => {\r\n  //   const decoratedOnClick = useAccordionToggle(eventKey, () =>\r\n  //     // getBusinessPurposes(businessID, eventKey)\r\n\r\n  //     getPurposeShareholders(purposeID, eventKey)\r\n  //   );\r\n\r\n  //   return <div onClick={decoratedOnClick}>{children}</div>;\r\n  // };\r\n\r\n  const TogglePurpose = ({ eventKey, purposeID }) => {\r\n    getPurposeShareholders(purposeID, eventKey);\r\n  };\r\n\r\n  /**\r\n   * Toggle shareholders (Accordion card)\r\n   * @param {*} param0\r\n   */\r\n  // const ToggleShareholders = ({ children, eventKey, purposeID }) => {\r\n  //   const decoratedOnClick = useAccordionToggle(eventKey, () =>\r\n  //     getPurposeShareholders(purposeID, eventKey)\r\n  //   );\r\n\r\n  //   return <div onClick={decoratedOnClick}>{children}</div>;\r\n  // };\r\n\r\n  /**\r\n   * Create:\r\n   * - business menu\r\n   * - business purposes menu\r\n   */\r\n  let menuItems = [];\r\n  let purposes = [];\r\n  let countShareholders = 0;\r\n  userBusinesses !== null &&\r\n    Object.keys(userBusinesses).map((business, keyBusiness) => {\r\n      menuItems[keyBusiness] = [];\r\n      purposes[keyBusiness] = [];\r\n      businessPurposes !== null &&\r\n        Object.keys(businessPurposes).map((purpose, keyPurpose) => {\r\n          if (\r\n            businessPurposes[purpose].business_id ===\r\n            userBusinesses[business].business_id\r\n          ) {\r\n            menuItems[keyBusiness][keyPurpose] = (\r\n              <ListGroup.Item\r\n                action\r\n                key={businessPurposes[purpose].purpose_id}\r\n                eventKey={businessPurposes[purpose].purpose_id}\r\n                onClick={() =>\r\n                  TogglePurpose({\r\n                    eventKey: keyPurpose,\r\n                    purposeID: businessPurposes[purpose].purpose_id,\r\n                  })\r\n                }\r\n              >\r\n                <span style={{ whiteSpace: \"nowrap\" }}>\r\n                  <Extension style={{ color: \"var(--dark)\" }} />{\" \"}\r\n                  {businessPurposes[purpose].title}\r\n                </span>\r\n              </ListGroup.Item>\r\n            );\r\n\r\n            purposes[keyBusiness][keyPurpose] = (\r\n              <Tab.Pane\r\n                key={businessPurposes[purpose].purpose_id}\r\n                eventKey={businessPurposes[purpose].purpose_id}\r\n              >\r\n                <Accordion defaultActiveKey=\"shareholders\">\r\n                  {/* Purpose ID */}\r\n                  <Card bg=\"light\">\r\n                    <Accordion.Toggle\r\n                      as={Card.Header}\r\n                      style={{ cursor: \"pointer\" }}\r\n                      eventKey=\"purpose_id\"\r\n                    >\r\n                      {t(\"Purpose ID\")}\r\n                    </Accordion.Toggle>\r\n                    <Accordion.Collapse eventKey=\"purpose_id\">\r\n                      <Card.Body>\r\n                        <Card.Text>\r\n                          {businessPurposes[purpose].purpose_id}\r\n                        </Card.Text>\r\n                      </Card.Body>\r\n                    </Accordion.Collapse>\r\n                  </Card>\r\n                  {/* Purpose description */}\r\n                  <Card bg=\"light\">\r\n                    <Accordion.Toggle\r\n                      as={Card.Header}\r\n                      style={{ cursor: \"pointer\" }}\r\n                      eventKey=\"description\"\r\n                    >\r\n                      {t(\"Purpose Description\")}\r\n                    </Accordion.Toggle>\r\n                    <Accordion.Collapse eventKey=\"description\">\r\n                      <Card.Body>\r\n                        <Card.Text>\r\n                          {businessPurposes[purpose].description}\r\n                        </Card.Text>\r\n                      </Card.Body>\r\n                    </Accordion.Collapse>\r\n                  </Card>\r\n                  <Card bg=\"light\">\r\n                    <Accordion.Toggle\r\n                      as={Card.Header}\r\n                      style={{ cursor: \"pointer\" }}\r\n                      eventKey=\"shareholders\"\r\n                    >\r\n                      {t(\"Purpose Shareholders\")}\r\n                    </Accordion.Toggle>\r\n\r\n                    {/* Purpose shareholders */}\r\n                    <Accordion.Collapse eventKey=\"shareholders\">\r\n                      <Card.Body>\r\n                        {typeof purposeShareholders !== \"undefined\" &&\r\n                          purposeShareholders !== null &&\r\n                          Object.keys(purposeShareholders).map(\r\n                            (shareholder, keyShareholder) => {\r\n                              if (\r\n                                purposeShareholders[shareholder].purpose_id ===\r\n                                businessPurposes[purpose].purpose_id\r\n                              ) {\r\n                                const { purpose_id } = purposeShareholders[\r\n                                  shareholder\r\n                                ];\r\n                                const {\r\n                                  shareholder_id,\r\n                                  firstname,\r\n                                  lastname,\r\n                                  // email,\r\n                                  roles,\r\n                                  share,\r\n                                } = purposeShareholders[shareholder];\r\n\r\n                                countShareholders++;\r\n\r\n                                const arrRoles =\r\n                                  roles !== null ? roles.split(\",\") : [];\r\n\r\n                                return (\r\n                                  <Shareholder\r\n                                    {...args}\r\n                                    key={keyShareholder}\r\n                                    id={keyShareholder}\r\n                                    shareholder={shareholder_id}\r\n                                    purpose={purpose_id}\r\n                                    firstname={firstname}\r\n                                    lastname={lastname}\r\n                                    share={share}\r\n                                    roles={arrRoles}\r\n                                  />\r\n                                );\r\n                              } else {\r\n                                return \"\"; // TODO: check if this works\r\n                              }\r\n                            }\r\n                          )}\r\n                        {countShareholders === 0 && (\r\n                          <Card.Text className=\"text-muted\">\r\n                            {t(\"No shareholders\")}\r\n                          </Card.Text>\r\n                        )}\r\n\r\n                        {/* End shareholders list */}\r\n                      </Card.Body>\r\n                    </Accordion.Collapse>\r\n                  </Card>\r\n\r\n                  <Card bg=\"light\">\r\n                    <Accordion.Toggle\r\n                      as={Card.Header}\r\n                      style={{ cursor: \"pointer\" }}\r\n                      eventKey=\"2\"\r\n                    >\r\n                      <span style={{ whiteSpace: \"nowrap\" }}>\r\n                        <Add\r\n                          fontSize=\"small\"\r\n                          style={{ color: \"var(--dark)\" }}\r\n                        />\r\n                        &nbsp;{t(\"Add Shareholder\")}\r\n                      </span>\r\n                    </Accordion.Toggle>\r\n                    <Accordion.Collapse eventKey=\"2\">\r\n                      <Card.Body>\r\n                        <ShareholderRegistration\r\n                          {...args}\r\n                          purposeID={businessPurposes[purpose].purpose_id}\r\n                        />\r\n                      </Card.Body>\r\n                    </Accordion.Collapse>\r\n                  </Card>\r\n                </Accordion>\r\n              </Tab.Pane>\r\n            );\r\n          }\r\n          countShareholders = 0;\r\n          return true;\r\n        });\r\n      return true;\r\n    });\r\n\r\n  const jsx = (\r\n    <>\r\n      <Accordion\r\n        defaultActiveKey={\r\n          activeBusiness !== null || !userBusinessesLoaded\r\n            ? activeBusiness\r\n            : \"myBusinesses\"\r\n        }\r\n      >\r\n        {/* Add business */}\r\n        <Card>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey=\"addBusiness\"\r\n            style={{ cursor: \"pointer\" }}\r\n          >\r\n            <span>\r\n              <Add fontSize=\"small\" style={{ color: \"var(--dark)\" }} />\r\n              &nbsp;\r\n              {t(\"Add Business\")}\r\n            </span>\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey=\"addBusiness\">\r\n            <Card.Body>\r\n              <BusinessRegistration {...args} />\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n\r\n        {/* List user businesses */}\r\n        {userBusinesses !== null &&\r\n          Object.keys(userBusinesses).map((business, keyBusiness) => {\r\n            const date = new Date(userBusinesses[business].created);\r\n            const businessSince = new Intl.DateTimeFormat(language).format(\r\n              date\r\n            );\r\n            // keyBusiness[3] = userBusinesses[business].business_id;\r\n            return (\r\n              <Card key={keyBusiness}>\r\n                <Accordion.Toggle\r\n                  as={Card.Header}\r\n                  eventKey={keyBusiness}\r\n                  style={{ cursor: \"pointer\" }}\r\n                  onClick={() =>\r\n                    ToggleBusiness({\r\n                      eventKey: keyBusiness,\r\n                      businessID: userBusinesses[business].business_id,\r\n                    })\r\n                  }\r\n                >\r\n                  <Store style={{ color: \"var(--dark)\" }} />{\" \"}\r\n                  {userBusinesses[business].title}\r\n                </Accordion.Toggle>\r\n                <Accordion.Collapse eventKey={keyBusiness}>\r\n                  <Card.Body>\r\n                    <Tab.Container\r\n                      id=\"left-tabs-example\"\r\n                      defaultActiveKey={\r\n                        activeBusinesPurpose !== null\r\n                          ? activeBusinesPurpose\r\n                          : \"aboutBusiness\"\r\n                      }\r\n                    >\r\n                      <Row>\r\n                        {/* Layout: Left side - Menu */}\r\n                        <Col sm={5}>\r\n                          <ListGroup variant=\"flush\">\r\n                            {/* Menu item: About business */}\r\n                            <ListGroup.Item action eventKey=\"aboutBusiness\">\r\n                              {t(\"About\")}\r\n                            </ListGroup.Item>\r\n\r\n                            {/* Menu item: Add purpose */}\r\n                            <ListGroup.Item action eventKey=\"addPurpose\">\r\n                              <span style={{ whiteSpace: \"nowrap\" }}>\r\n                                <Add\r\n                                  fontSize=\"small\"\r\n                                  style={{ color: \"var(--dark)\" }}\r\n                                />\r\n                                &nbsp;{t(\"Add Purpose\")}\r\n                              </span>\r\n                            </ListGroup.Item>\r\n\r\n                            {/* Menu items: Registered purposes */}\r\n                            {menuItems[keyBusiness]}\r\n\r\n                            {/* old add purpose */}\r\n                          </ListGroup>\r\n                          {countBusinessPurposes !== null && (\r\n                            <>\r\n                              <br />\r\n                              <Pagination\r\n                                {...args}\r\n                                size=\"sm\"\r\n                                countItems={countBusinessPurposes}\r\n                                itemsPerPage={businessPurposesPerPage}\r\n                                active={activePageBusinessPurposes}\r\n                                onClick={(number) =>\r\n                                  getBusinessPurposes(\r\n                                    activeBusinessID,\r\n                                    0,\r\n                                    number\r\n                                  )\r\n                                }\r\n                              />\r\n                            </>\r\n                          )}\r\n                        </Col>\r\n\r\n                        {/* Layout: Right side - Content */}\r\n                        <Col sm={7}>\r\n                          <Tab.Content>\r\n                            <Tab.Pane eventKey=\"aboutBusiness\">\r\n                              <Accordion defaultActiveKey=\"businessID\">\r\n                                {/* Business logo */}\r\n\r\n                                {/*\r\n                              <Card>\r\n                                <Accordion.Toggle\r\n                                  as={Card.Header}\r\n                                  style={{ cursor: \"pointer\" }}\r\n                                  eventKey=\"businessLogo\"\r\n                                >\r\n                                  [LOGO]\r\n                                </Accordion.Toggle>\r\n                                <Accordion.Collapse eventKey=\"businessLogo\">\r\n                                  <Card border=\"light\">\r\n                                    <Card.Body>\r\n                                      <Dropzone data={args} />\r\n                                    </Card.Body>\r\n                                  </Card>\r\n                                </Accordion.Collapse>\r\n                              </Card>\r\n                              */}\r\n\r\n                                {/* Business ID */}\r\n                                <Card>\r\n                                  <Accordion.Toggle\r\n                                    as={Card.Header}\r\n                                    style={{ cursor: \"pointer\" }}\r\n                                    eventKey=\"businessID\"\r\n                                  >\r\n                                    {t(\"Business ID\")}\r\n                                  </Accordion.Toggle>\r\n                                  <Accordion.Collapse eventKey=\"businessID\">\r\n                                    <Card border=\"light\">\r\n                                      <Card.Body>\r\n                                        <Card.Text>\r\n                                          {userBusinesses[business].business_id}\r\n                                        </Card.Text>\r\n                                      </Card.Body>\r\n                                    </Card>\r\n                                  </Accordion.Collapse>\r\n                                </Card>\r\n\r\n                                {/* Business description */}\r\n                                <Card>\r\n                                  <Accordion.Toggle\r\n                                    as={Card.Header}\r\n                                    style={{ cursor: \"pointer\" }}\r\n                                    eventKey=\"businessDescription\"\r\n                                  >\r\n                                    {t(\"Business Description\")}\r\n                                  </Accordion.Toggle>\r\n                                  <Accordion.Collapse eventKey=\"businessDescription\">\r\n                                    <Card border=\"light\">\r\n                                      <Card.Body>\r\n                                        <Card.Text>\r\n                                          {userBusinesses[business].description}\r\n                                        </Card.Text>\r\n                                      </Card.Body>\r\n                                    </Card>\r\n                                  </Accordion.Collapse>\r\n                                </Card>\r\n\r\n                                {/* Business Creation Date */}\r\n                                <Card>\r\n                                  <Accordion.Toggle\r\n                                    as={Card.Header}\r\n                                    style={{ cursor: \"pointer\" }}\r\n                                    eventKey=\"businessCreationDate\"\r\n                                  >\r\n                                    {t(\"Business Created\")}\r\n                                  </Accordion.Toggle>\r\n                                  <Accordion.Collapse eventKey=\"businessCreationDate\">\r\n                                    <Card border=\"light\">\r\n                                      <Card.Body>\r\n                                        <Card.Text>{businessSince}</Card.Text>\r\n                                      </Card.Body>\r\n                                    </Card>\r\n                                  </Accordion.Collapse>\r\n                                </Card>\r\n                              </Accordion>\r\n                            </Tab.Pane>\r\n\r\n                            {/* Start Business purposes */}\r\n                            {purposes[keyBusiness]}\r\n                            {/* End Business purposes */}\r\n\r\n                            {/* Add new purpose */}\r\n                            <Tab.Pane eventKey=\"addPurpose\">\r\n                              <Accordion defaultActiveKey=\"newPurpose\">\r\n                                <Card>\r\n                                  <Accordion.Toggle\r\n                                    as={Card.Header}\r\n                                    eventKey=\"newPurpose\"\r\n                                  >\r\n                                    {t(\"New Purpose\")}\r\n                                  </Accordion.Toggle>\r\n                                  <Accordion.Collapse eventKey=\"newPurpose\">\r\n                                    <Card.Body>\r\n                                      <PurposeRegistration\r\n                                        data={args}\r\n                                        businessID={\r\n                                          userBusinesses[business].business_id\r\n                                        }\r\n                                      />\r\n                                    </Card.Body>\r\n                                  </Accordion.Collapse>\r\n                                </Card>\r\n                              </Accordion>\r\n                            </Tab.Pane>\r\n                          </Tab.Content>\r\n                        </Col>\r\n                      </Row>\r\n                    </Tab.Container>\r\n                    {/* pagination prev */}\r\n                  </Card.Body>\r\n                </Accordion.Collapse>\r\n              </Card>\r\n            );\r\n            // console.log(\"BUSINESS:\", userBusinesses[business]);\r\n          })}\r\n\r\n        {/* Get business */}\r\n\r\n        {false && userBusinesses === null && (\r\n          <Card>\r\n            <Accordion.Toggle\r\n              as={Card.Header}\r\n              eventKey=\"myBusinesses\"\r\n              onClick={getBusinesses}\r\n              style={{ cursor: \"pointer\" }}\r\n            >\r\n              <span>{t(\"My Businesses\")}</span>\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"myBusinesses\">\r\n              <Card.Body>{t(\"No businesses\")}</Card.Body>\r\n            </Accordion.Collapse>\r\n          </Card>\r\n        )}\r\n\r\n        {/* old add business */}\r\n      </Accordion>\r\n      {userBusinesses !== null && (\r\n        <>\r\n          <br />\r\n\r\n          <Pagination\r\n            {...args}\r\n            size=\"md\"\r\n            countItems={countBusinesses}\r\n            itemsPerPage={businessesPerPage}\r\n            active={activePageBusinesses}\r\n            onClick={(number) => getBusinesses(number)}\r\n          />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  if (accountNumber === null) setRedirectTo(\"/sign-out\");\r\n\r\n  return <>{jsx}</>;\r\n};\r\n","import \"./UserEditor.css\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ListGroup, Form, InputGroup } from \"react-bootstrap\";\r\nimport {\r\n  Visibility,\r\n  VisibilityOff,\r\n  Close,\r\n  Edit,\r\n  // Done,\r\n} from \"@material-ui/icons\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport Card from \"../card\";\r\nimport SubmitButton from \"../submitButton\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {\r\n    namespace: \"UserEditor\",\r\n    request: \"update user\",\r\n    mode: \"label\",\r\n  };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  // console.log(\"USER EDITOR PROPS:\", props);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const {\r\n    userData,\r\n    accountNumber,\r\n    // currencies,\r\n    // currencyAbbr,\r\n    // language,\r\n  } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { sendRequest, getReviser, getWorkplace } = props.barrelFunctions;\r\n  // const {  } = props.barrelEventHandlers;\r\n\r\n  /**\r\n   * Hooks\r\n   */\r\n  const [editFirstname, setEditFirstname] = useState(false);\r\n  const [editLastname, setEditLastname] = useState(false);\r\n  const [editEmail, setEditEmail] = useState(false);\r\n  const [editPassword, setEditPassword] = useState(false);\r\n  const [passwordVisible, setPasswordVisible] = useState(false);\r\n  const [submitButtonVisible, setSubmitButtonVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (editFirstname || editLastname || editEmail || editPassword) {\r\n      setSubmitButtonVisible(true);\r\n    } else {\r\n      setSubmitButtonVisible(false);\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [editFirstname, editLastname, editEmail, editPassword]);\r\n\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  /**\r\n   * Functions\r\n   */\r\n\r\n  const togglePassword = () => {\r\n    setPasswordVisible(!passwordVisible);\r\n  };\r\n\r\n  const sendUserRegistrationRequest = (data) => {\r\n    if (data === null) return false;\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    // data.language = language;\r\n    // data.email = userData.email;\r\n    return sendRequest({ req: props.request, data });\r\n  };\r\n\r\n  /**\r\n   * Event listener: On Form Submit\r\n   * @param {object} data Form data\r\n   */\r\n  const onSubmit = (data) => {\r\n    data.personalID = accountNumber;\r\n    if (!editFirstname) data.firstname = null;\r\n    if (!editLastname) data.lastname = null;\r\n    if (!editEmail) data.email = userData.email;\r\n    if (!editPassword) data.password = null;\r\n\r\n    // console.log(\"onSubmit:\", data);\r\n\r\n    if (sendUserRegistrationRequest(data)) {\r\n      // User registration request was submitted\r\n    }\r\n  };\r\n\r\n  const yupObject = {\r\n    firstName: editFirstname\r\n      ? yup.string().required(t(\"First name is required\"))\r\n      : yup.string().optional(),\r\n    lastName: editLastname\r\n      ? yup.string().required(t(\"Last name is required\"))\r\n      : yup.string().optional(),\r\n    email: editEmail\r\n      ? yup\r\n          .string()\r\n          .email(t(\"Invalid email address\"))\r\n          .required(t(\"Email is required\"))\r\n      : yup.string().optional(),\r\n    password: editPassword\r\n      ? yup\r\n          .string()\r\n          .required(t(\"No password provided\"))\r\n          .min(8, t(\"Password is too short\"))\r\n          // .matches(/[a-zA-Z]/, \"Password can only contain Latin letters.\")\r\n          .matches(\r\n            /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#_?&])[A-Za-z\\d@$!%*#_?&]{8,}$/,\r\n            t(\"Password is too weak\")\r\n          )\r\n      : yup.string().optional(),\r\n  };\r\n\r\n  /**\r\n   * Yup schema\r\n   */\r\n  const schema = yup.object(yupObject);\r\n\r\n  /**\r\n   * Data consistency tests\r\n   */\r\n  if (userData === null) return <></>;\r\n\r\n  /**\r\n   * Destructuring\r\n   */\r\n  const { mode } = props;\r\n  const {\r\n    firstname,\r\n    lastname,\r\n    email,\r\n    // language,\r\n    // currency_name,\r\n    // currency_abbr,\r\n  } = userData;\r\n  // const currency = `${currency_name} (${currency_abbr})`;\r\n\r\n  const UserEditorForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    errors,\r\n  }) => (\r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      <Card title={t(\"Profile\")}>\r\n        {/* First name */}\r\n        <ListGroup variant=\"flush\">\r\n          <ListGroup.Item as=\"div\" action>\r\n            <Form.Label>{t(\"First name\")}</Form.Label>\r\n            {!editFirstname ? (\r\n              <>\r\n                <span style={{ float: \"right\" }}>\r\n                  <Edit\r\n                    onClick={() => setEditFirstname(true)}\r\n                    fontSize=\"small\"\r\n                    style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                  />\r\n                </span>\r\n                <br />\r\n                <small>{firstname}</small>\r\n              </>\r\n            ) : (\r\n              <span style={{ float: \"right\" }}>\r\n                <Close\r\n                  onClick={() => setEditFirstname(false)}\r\n                  fontSize=\"small\"\r\n                  style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                />\r\n              </span>\r\n            )}\r\n\r\n            {editFirstname && (\r\n              <Form.Group controlId=\"validationFormikFirstName\">\r\n                <InputGroup>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    placeholder={t(\"Enter first name\")}\r\n                    name=\"firstName\"\r\n                    value={values.firstName}\r\n                    onChange={handleChange}\r\n                    isInvalid={!!errors.firstName && touched.firstName}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">\r\n                    {errors.firstName}\r\n                  </Form.Control.Feedback>\r\n                </InputGroup>\r\n              </Form.Group>\r\n            )}\r\n          </ListGroup.Item>\r\n\r\n          {/* Last name */}\r\n          <ListGroup.Item as=\"div\" action>\r\n            <Form.Label>{t(\"Last name\")}</Form.Label>\r\n            {!editLastname ? (\r\n              <>\r\n                <span style={{ float: \"right\" }}>\r\n                  <Edit\r\n                    onClick={() => setEditLastname(true)}\r\n                    fontSize=\"small\"\r\n                    style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                  />\r\n                </span>\r\n                <br />\r\n                <small>{lastname}</small>\r\n              </>\r\n            ) : (\r\n              <span style={{ float: \"right\" }}>\r\n                <Close\r\n                  onClick={() => setEditLastname(false)}\r\n                  fontSize=\"small\"\r\n                  style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                />\r\n              </span>\r\n            )}\r\n\r\n            {editLastname && (\r\n              <Form.Group controlId=\"validationFormikLastName\">\r\n                <InputGroup>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    placeholder={t(\"Enter last name\")}\r\n                    name=\"lastName\"\r\n                    value={values.lastName}\r\n                    onChange={handleChange}\r\n                    isInvalid={!!errors.lastName && touched.lastName}\r\n                  />\r\n                  <Form.Control.Feedback type=\"invalid\">\r\n                    {errors.lastName}\r\n                  </Form.Control.Feedback>\r\n                </InputGroup>\r\n              </Form.Group>\r\n            )}\r\n          </ListGroup.Item>\r\n\r\n          {/* Email */}\r\n          {accountNumber !== null && (\r\n            <ListGroup.Item as=\"div\" action>\r\n              <Form.Label>{t(\"Email address\")}</Form.Label>\r\n              {!editEmail ? (\r\n                <>\r\n                  <span style={{ float: \"right\" }}>\r\n                    <Edit\r\n                      onClick={() => setEditEmail(true)}\r\n                      fontSize=\"small\"\r\n                      style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                    />\r\n                  </span>\r\n                  <br />\r\n                  <small>{email}</small>\r\n                </>\r\n              ) : (\r\n                <span style={{ float: \"right\" }}>\r\n                  <Close\r\n                    onClick={() => setEditEmail(false)}\r\n                    fontSize=\"small\"\r\n                    style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                  />\r\n                </span>\r\n              )}\r\n\r\n              {editEmail && (\r\n                <Form.Group controlId=\"validationFormikEmail\">\r\n                  <InputGroup>\r\n                    <Form.Control\r\n                      placeholder={t(\"Enter email\")}\r\n                      name=\"email\"\r\n                      value={values.email}\r\n                      onChange={handleChange}\r\n                      // onBlur={handleChange}\r\n                      isInvalid={!!errors.email && touched.email}\r\n                    />\r\n                    <Form.Control.Feedback type=\"invalid\">\r\n                      {errors.email}\r\n                    </Form.Control.Feedback>\r\n                  </InputGroup>\r\n                </Form.Group>\r\n              )}\r\n            </ListGroup.Item>\r\n          )}\r\n\r\n          {/* Password */}\r\n          <ListGroup.Item as=\"div\" action>\r\n            <Form.Label>{t(\"Password\")}</Form.Label>\r\n            {!editPassword ? (\r\n              <>\r\n                <span style={{ float: \"right\" }}>\r\n                  <Edit\r\n                    onClick={() => setEditPassword(true)}\r\n                    fontSize=\"small\"\r\n                    style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                  />\r\n                </span>\r\n              </>\r\n            ) : (\r\n              <span style={{ float: \"right\" }}>\r\n                <Close\r\n                  onClick={() => setEditPassword(false)}\r\n                  fontSize=\"small\"\r\n                  style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                />\r\n              </span>\r\n            )}\r\n\r\n            {editPassword && (\r\n              <>\r\n                {/* New password */}\r\n                <Form.Group controlId=\"validationFormikPassword\">\r\n                  <InputGroup>\r\n                    <Form.Control\r\n                      type={passwordVisible ? \"text\" : \"password\"}\r\n                      placeholder={t(\"Enter new password\")}\r\n                      name=\"password\"\r\n                      value={values.password}\r\n                      onChange={handleChange}\r\n                      // onBlur={handleChange}\r\n                      isInvalid={!!errors.password && touched.password}\r\n                    />\r\n                    <InputGroup.Append>\r\n                      <InputGroup.Text\r\n                        id=\"inputGroupAppend\"\r\n                        onClick={togglePassword}\r\n                        style={{\r\n                          cursor: \"pointer\",\r\n                        }}\r\n                      >\r\n                        {passwordVisible ? (\r\n                          <VisibilityOff\r\n                            fontSize=\"small\"\r\n                            style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                          />\r\n                        ) : (\r\n                          <Visibility\r\n                            fontSize=\"small\"\r\n                            style={{ color: \"var(--dark)\", cursor: \"pointer\" }}\r\n                          />\r\n                        )}\r\n                      </InputGroup.Text>\r\n                    </InputGroup.Append>\r\n\r\n                    <Form.Control.Feedback type=\"invalid\">\r\n                      {errors.password}\r\n                    </Form.Control.Feedback>\r\n                  </InputGroup>\r\n                </Form.Group>\r\n              </>\r\n            )}\r\n          </ListGroup.Item>\r\n        </ListGroup>\r\n\r\n        <Form.Group controlId=\"validationSubmitButton\">\r\n          <SubmitButton\r\n            {...args}\r\n            caption={t(\"Submit\")}\r\n            visible={submitButtonVisible}\r\n            marginTop={20}\r\n            request={props.request}\r\n            namespace={props.namespace}\r\n          />\r\n        </Form.Group>\r\n      </Card>\r\n    </Form>\r\n  );\r\n\r\n  const jsx =\r\n    mode === \"label\" ? (\r\n      <span style={{ whiteSpace: \"nowrap\" }}>\r\n        {firstname} {lastname}\r\n      </span>\r\n    ) : (\r\n      <Formik\r\n        component={UserEditorForm}\r\n        validationSchema={schema}\r\n        onSubmit={onSubmit}\r\n        initialValues={{\r\n          firstName: userData.firstname,\r\n          lastName: userData.lastname,\r\n          email: userData.email,\r\n          password: \"\",\r\n        }}\r\n      />\r\n    );\r\n\r\n  return <>{jsx}</>;\r\n};\r\n","/**\r\n * CSS\r\n ============================================================================ */\r\n// import \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\r\n\r\n/**\r\n * System imports\r\n ============================================================================ */\r\nimport React from \"react\";\r\nimport { Form, Table } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\n// import * as yup from \"yup\";\r\nimport { useTranslation } from \"react-i18next\";\r\n// import BootstrapTable from \"react-bootstrap-table-next\";\r\n\r\n/**\r\n * User imports\r\n ============================================================================ */\r\n// import Card from \"../card\";\r\n// import SubmitButton from \"../submitButton\";\r\nimport Pagination from \"../pagination\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   ============================================================================ */\r\n  let defaults = {\r\n    request: \"register currency\",\r\n    namespace: \"Currencies\",\r\n  };\r\n\r\n  /**\r\n   * Properties\r\n   ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Barrels\r\n   ============================================================================ */\r\n  const {\r\n    currencies,\r\n    countCurrencies,\r\n    activePageCurrencies,\r\n    currenciesPerPage,\r\n    currencyAbbr,\r\n    userData,\r\n  } = props.barrelGetters;\r\n  const { setCurrencyAbbr } = props.barrelSetters;\r\n  const {\r\n    // getReviser,\r\n    // getWorkplace,\r\n    sendRequest,\r\n    getCurrencies,\r\n    formatExchangeRate,\r\n  } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n   * Destructured vars\r\n   ============================================================================ */\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  /**\r\n   * Functions\r\n   ============================================================================ */\r\n\r\n  // const indication = () => {\r\n  //   return \"THE TABLE IS EMPTY\";\r\n  // };\r\n\r\n  const onCurrencySelected = (e) => {\r\n    setCurrencyAbbr(e.target.id);\r\n    sendRequest({\r\n      req: \"register user currency\",\r\n      data: { email: userData.email, currency_id: e.target.id },\r\n    });\r\n  };\r\n\r\n  const onPageSelect = (number) => {\r\n    // console.log(\"on page select\", number);\r\n    switch (number) {\r\n      case \"First\":\r\n        number = 1;\r\n        break;\r\n      case \"Prev\":\r\n        number = activePageCurrencies > 1 ? activePageCurrencies - 1 : 1;\r\n        break;\r\n      case \"Next\":\r\n        number =\r\n          activePageCurrencies < Math.ceil(countCurrencies / currenciesPerPage)\r\n            ? activePageCurrencies + 1\r\n            : Math.ceil(countCurrencies / currenciesPerPage);\r\n        break;\r\n      case \"Last\":\r\n        number = Math.ceil(countCurrencies / currenciesPerPage);\r\n        break;\r\n      default:\r\n        // number = number;\r\n        break;\r\n    }\r\n    getCurrencies(number);\r\n  };\r\n\r\n  /**\r\n   * Form\r\n   ============================================================================ */\r\n  const CurrenciesForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    errors,\r\n  }) => (\r\n    <>\r\n      <Table responsive striped bordered hover size=\"sm\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{ textAlign: \"center\" }}>{t(\"Select\")}</th>\r\n            <th style={{ textAlign: \"center\" }}>{t(\"Abbr\")}</th>\r\n            <th style={{ textAlign: \"center\" }}>{t(\"Name\")}</th>\r\n            <th style={{ textAlign: \"center\" }}>{t(\"Region\")}</th>\r\n            <th style={{ textAlign: \"center\" }}>{t(\"Rate\")}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {currencies !== null &&\r\n            currencies.map((currency, keyCUrrency) => {\r\n              // console.log(\"CURRENCY\", currency);\r\n\r\n              const { name, abbr, rate, region } = currency;\r\n              return (\r\n                <tr key={keyCUrrency}>\r\n                  <td style={{ textAlign: \"center\" }}>\r\n                    <Form.Check\r\n                      type=\"radio\"\r\n                      checked={currencyAbbr === abbr}\r\n                      name=\"selected-currency\"\r\n                      id={abbr}\r\n                      aria-label=\"option 1\"\r\n                      onChange={onCurrencySelected}\r\n                    />\r\n                  </td>\r\n                  <td style={{ textAlign: \"center\" }}>{abbr}</td>\r\n                  <td style={{ textAlign: \"left\" }}>{name}</td>\r\n                  <td style={{ textAlign: \"left\" }}>{region}</td>\r\n                  <td style={{ textAlign: \"right\" }}>\r\n                    {formatExchangeRate(rate)}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n        </tbody>\r\n      </Table>\r\n      <Pagination\r\n        {...args}\r\n        pages={Math.ceil(countCurrencies / currenciesPerPage)}\r\n        active={activePageCurrencies}\r\n        onClick={onPageSelect}\r\n      />\r\n    </>\r\n  );\r\n\r\n  /**\r\n   * Formik return\r\n   ============================================================================ */\r\n  // onSubmit={onSubmit}\r\n  return (\r\n    <Formik\r\n      component={CurrenciesForm}\r\n      initialValues={{\r\n        curr_abbr: \"\",\r\n        curr_title: \"\",\r\n        curr_region: \"\",\r\n        curr_rate: 1.0,\r\n      }}\r\n    />\r\n  );\r\n};\r\n","/**\r\n * CSS\r\n ============================================================================ */\r\n// import \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\r\n\r\n/**\r\n * System imports\r\n ============================================================================ */\r\nimport React from \"react\";\r\nimport { Form, InputGroup } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport { useTranslation } from \"react-i18next\";\r\n// import BootstrapTable from \"react-bootstrap-table-next\";\r\n\r\n/**\r\n * User imports\r\n ============================================================================ */\r\n// import Card from \"../card\";\r\nimport SubmitButton from \"../submitButton\";\r\n// import Pagination from \"../pagination\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   ============================================================================ */\r\n  let defaults = {\r\n    namespace: \"CurrencyRegistration\",\r\n    request: \"register currency\",\r\n  };\r\n\r\n  /**\r\n   * Properties\r\n   ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Barrels\r\n   ============================================================================ */\r\n  // const {\r\n  //   currencies,\r\n  //   countCurrencies,\r\n  //   activePageCurrencies,\r\n  //   currenciesPerPage,\r\n  // } = props.barrelGetters;\r\n  // const { setActivePageCurrencies } = props.barrelSetters;\r\n  const {\r\n    getReviser,\r\n    getWorkplace,\r\n    sendRequest,\r\n    // getCurrencies,\r\n  } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n   * Destructured vars\r\n   ============================================================================ */\r\n  const { t } = useTranslation([\"CurrencyRegistration\"]);\r\n\r\n  /** \r\n   * Yup schema\r\n   ============================================================================ */\r\n  const schema = yup.object({\r\n    curr_abbr: yup\r\n      .string()\r\n      .required(t(\"Currency abbreviation is required\"))\r\n      .min(3, t(\"Currency abbreviation is too short\"))\r\n      .max(5, t(\"Currency abbreviation is too long\")),\r\n    curr_title: yup\r\n      .string()\r\n      .required(t(\"Currency name is required\"))\r\n      .min(3, t(\"Currency name is too short\")) // must be at least 3 characters\r\n      .max(70, t(\"Currency name is too long\")), // must be at most 70 characters\r\n    curr_region: yup\r\n      .string()\r\n      .required(t(\"Currency region is required\"))\r\n      .min(3, t(\"Currency region is too short\")) // must be at least 3 characters\r\n      .max(70, t(\"Currency region is too long\")), // must be at most 70 characters\r\n    curr_rate: yup\r\n      .string()\r\n      .required(t(\"Exchange rate is required\"))\r\n      .matches(\r\n        new RegExp(t(\"Exchange Rate Regex\")),\r\n        t(\"Wrong exchange rate format\")\r\n      ),\r\n  });\r\n\r\n  /**\r\n   * Functions\r\n   ============================================================================ */\r\n  const onSubmit = (data) => {\r\n    console.log(data);\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n\r\n    return sendRequest({ req: props.request, data });\r\n  };\r\n\r\n  // const indication = () => {\r\n  //   return \"THE TABLE IS EMPTY\";\r\n  // };\r\n\r\n  /**\r\n   * Form\r\n   ============================================================================ */\r\n  const CurrencyRegistrationForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    errors,\r\n  }) => (\r\n    <>\r\n      <Form noValidate onSubmit={handleSubmit}>\r\n        {/* Currency abbreviation */}\r\n        <Form.Group controlId=\"validationFormikCurrAbbr\">\r\n          <Form.Label>{t(\"Abbreviation\")}</Form.Label>\r\n          <InputGroup>\r\n            <Form.Control\r\n              type=\"string\"\r\n              placeholder={\"\"}\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"curr_abbr\"\r\n              value={values.curr_abbr}\r\n              onChange={handleChange}\r\n              isInvalid={!!errors.curr_abbr && touched.curr_abbr}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.curr_abbr}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        {/* Currency name */}\r\n        <Form.Group controlId=\"validationFormikCurrName\">\r\n          <Form.Label>{t(\"Currency Name\")}</Form.Label>\r\n          <InputGroup>\r\n            <Form.Control\r\n              type=\"string\"\r\n              placeholder={\"\"}\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"curr_title\"\r\n              value={values.curr_title}\r\n              onChange={handleChange}\r\n              isInvalid={!!errors.curr_title && touched.curr_title}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.curr_title}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        {/* Currency region */}\r\n        <Form.Group controlId=\"validationFormikCurrRegion\">\r\n          <Form.Label>{t(\"Currency Region\")}</Form.Label>\r\n          <InputGroup>\r\n            <Form.Control\r\n              type=\"string\"\r\n              placeholder={\"\"}\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"curr_region\"\r\n              value={values.curr_region}\r\n              onChange={handleChange}\r\n              isInvalid={!!errors.curr_region && touched.curr_region}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.curr_region}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        {/* Initial exchange rate */}\r\n        <Form.Group controlId=\"validationFormikCurrRate\">\r\n          <Form.Label>{t(\"Initial Exchange Rate\")}</Form.Label>\r\n          <InputGroup>\r\n            <Form.Control\r\n              type=\"string\"\r\n              placeholder={\"\"}\r\n              aria-describedby=\"inputGroupPrepend\"\r\n              name=\"curr_rate\"\r\n              value={values.curr_rate}\r\n              onChange={handleChange}\r\n              isInvalid={!!errors.curr_rate && touched.curr_rate}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              {errors.curr_rate}\r\n            </Form.Control.Feedback>\r\n          </InputGroup>\r\n        </Form.Group>\r\n\r\n        {/* Submit button */}\r\n\r\n        <SubmitButton\r\n          {...args}\r\n          caption={t(\"Submit\")}\r\n          request={props.request}\r\n          namespace={props.namespace}\r\n        />\r\n      </Form>\r\n    </>\r\n  );\r\n\r\n  /**\r\n   * Formik return\r\n   ============================================================================ */\r\n  return (\r\n    <Formik\r\n      component={CurrencyRegistrationForm}\r\n      validationSchema={schema}\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        curr_abbr: \"\",\r\n        curr_title: \"\",\r\n        curr_region: \"\",\r\n        curr_rate: 1.0,\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport const useInterval = (callback, delay) => {\r\n  const savedCallback = useRef();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      if (delay > 0) savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useTranslation, Trans } from \"react-i18next\";\r\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\nimport { AvTimer } from \"@material-ui/icons\";\r\n\r\n/**\r\n   * User imports\r\n   ============================================================================ */\r\n\r\n//  let time = new Date().toLocaleString();\r\nimport { useInterval } from \"../../utils/useInterval\";\r\nimport { useEventListener } from \"../../utils/useEventListener\";\r\n\r\nimport ModalMessage from \"../modalMessage\";\r\nimport SubmitButton from \"../submitButton\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n     * Constants\r\n     ============================================================================ */\r\n  const minute = 60; // seconds, for testing purposes > 60\r\n\r\n  /**\r\n     * Default Properties\r\n     ============================================================================ */\r\n  let defaults = {\r\n    namespace: \"IdleTimer\",\r\n    timeout: 5 * minute,\r\n    timestamp: null,\r\n    stage2: 60, // show seconds (vs minutes) in stage 2\r\n    stage3: 20, // show modal message on stage 3\r\n    onTick: () => {},\r\n    onTimerReset: () => {},\r\n    onTimeout: () => {},\r\n\r\n    events: [\"load\", \"mousemove\", \"mousedown\", \"click\", \"scroll\", \"keypress\"],\r\n  };\r\n\r\n  /**\r\n     * Properties\r\n     ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n     * Barrels\r\n     ============================================================================ */\r\n  // const {} = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { formatDate } = props.barrelFunctions;\r\n  const { onSessionTimeout } = props.barrelEventHandlers;\r\n\r\n  /**\r\n     * Destructured vars\r\n     ============================================================================ */\r\n  const { t } = useTranslation(props.namespace);\r\n\r\n  const [seconds, setSeconds] = useState(props.timeout);\r\n  const [modalMessageShow, setModalMessageShow] = React.useState(false);\r\n\r\n  useInterval(() => {\r\n    // Your custom logic here\r\n\r\n    setSeconds(seconds - 1);\r\n    props.onTick(seconds);\r\n    // console.log(\"seconds\", seconds);\r\n  }, 1000);\r\n\r\n  useEventListener(() => {\r\n    setSeconds(props.timeout);\r\n    props.onTimerReset();\r\n  }, [\"mousedown\", \"click\", \"scroll\", \"keypress\"]); // \"click\",\r\n\r\n  useEffect(() => {\r\n    if (seconds === props.timeout) setModalMessageShow(false);\r\n    if (seconds === props.stage3) setModalMessageShow(true);\r\n    if (seconds === 0) onSessionTimeout();\r\n\r\n    // eslint-disable-next-line\r\n  }, [seconds]);\r\n\r\n  const getJSX = () => {\r\n    let currTime;\r\n    if (seconds > props.stage2) currTime = Math.ceil(seconds / minute);\r\n    else currTime = seconds;\r\n\r\n    const timeFormatted = formatDate(new Date(1970, 1, 1, 0, 0, currTime), {\r\n      minute: \"numeric\",\r\n      second: \"numeric\",\r\n    });\r\n\r\n    const onSessionContinue = () => {\r\n      // console.log(\"onSessionContinue\");\r\n      setSeconds(props.timeout);\r\n      setModalMessageShow(false);\r\n    };\r\n\r\n    const modalMessage = (\r\n      <>\r\n        <Trans\r\n          i18nKey=\"IdleTimer:Automatic logout\"\r\n          timeFormatted={timeFormatted}\r\n        >\r\n          <div className=\"text-center\">Automatic logout in</div>\r\n          <div\r\n            className=\"text-center\"\r\n            style={{ fontSize: \"4em\", fontWeight: \"bold\", color: \"#A93226\" }}\r\n          >\r\n            {{ timeFormatted }}\r\n          </div>\r\n          <div className=\"text-center\">\r\n            Do you want to continue the session?\r\n          </div>\r\n        </Trans>\r\n        <br />\r\n        <SubmitButton\r\n          {...args}\r\n          caption={t(\"Continue now\")}\r\n          request=\"continue session\"\r\n          onSubmit={onSessionContinue}\r\n          namespace={props.namespace}\r\n        />\r\n      </>\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <ModalMessage\r\n          show={modalMessageShow}\r\n          message={modalMessage}\r\n          onHide={() => setModalMessageShow(false)}\r\n        />\r\n        <OverlayTrigger\r\n          placement=\"bottom\"\r\n          overlay={\r\n            <Tooltip>\r\n              {seconds > props.stage2 ? (\r\n                <Trans\r\n                  i18nKey=\"IdleTimer:Minutes to automatical log out\"\r\n                  currTime={currTime}\r\n                >\r\n                  You will be automatically logged out in {{ currTime }}{\" \"}\r\n                  minutes.\r\n                </Trans>\r\n              ) : (\r\n                <Trans\r\n                  i18nKey=\"IdleTimer:Seconds to automatical log out\"\r\n                  currTime={currTime}\r\n                >\r\n                  You will be automatically logged out in {{ currTime }}{\" \"}\r\n                  seconds.\r\n                </Trans>\r\n              )}\r\n            </Tooltip>\r\n          }\r\n        >\r\n          <div style={{ whiteSpace: \"nowrap\", cursor: \"default\" }}>\r\n            <AvTimer style={{ color: \"var(--dark)\" }} />\r\n            &nbsp;\r\n            {seconds > props.stage2 ? (\r\n              <>\r\n                <span className=\"d-none d-sm-inline text-muted\">\r\n                  <Trans i18nKey=\"IdleTimer:minutes\" currTime={currTime}>\r\n                    {{ currTime }} minutes\r\n                  </Trans>\r\n                </span>\r\n                <span className=\"d-inline d-sm-none text-muted\">\r\n                  <Trans i18nKey=\"IdleTimer:min\" currTime={currTime}>\r\n                    {{ currTime }} min\r\n                  </Trans>\r\n                </span>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <span className=\"d-none d-sm-inline text-muted\">\r\n                  <Trans i18nKey=\"IdleTimer:seconds\" currTime={currTime}>\r\n                    {{ currTime }} seconds\r\n                  </Trans>\r\n                </span>\r\n                <span className=\"d-inline d-sm-none text-muted\">\r\n                  <Trans i18nKey=\"IdleTimer:sec\" currTime={currTime}>\r\n                    <span>{{ currTime }}</span> sec\r\n                  </Trans>\r\n                </span>\r\n              </>\r\n            )}\r\n          </div>\r\n        </OverlayTrigger>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return <>{getJSX()}</>;\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport { useEffect } from \"react\";\r\n\r\nexport const useEventListener = (callback, events) => {\r\n  let defaults = {\r\n    namespace: \"EventListener\",\r\n\r\n    onTimeout: () => {},\r\n\r\n    events: [\"load\", \"mousemove\", \"mousedown\", \"click\", \"scroll\", \"keypress\"],\r\n  };\r\n\r\n  /**\r\n     * Properties\r\n     ============================================================================ */\r\n  const props = Object.assign(defaults, { events: events });\r\n\r\n  useEffect(() => {\r\n    const eventHandler = (e) => {\r\n      callback(e);\r\n    };\r\n\r\n    for (let i in props.events) {\r\n      window.addEventListener(props.events[i], eventHandler);\r\n    }\r\n\r\n    return () => {\r\n      for (let i in props.events) {\r\n        window.removeEventListener(props.events[i], eventHandler);\r\n      }\r\n    };\r\n    // eslint-disable-next-line\r\n  }, []);\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React from \"react\";\r\nimport _ from \"lodash\";\r\nimport { useTranslation } from \"react-i18next\";\r\n// import { Redirect } from \"react-router-dom\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  useLocation,\r\n  // Redirect,\r\n} from \"react-router-dom\";\r\nimport {\r\n  Navbar,\r\n  Nav,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  // Button,\r\n  // Breadcrumb,\r\n  // NavDropdown,\r\n  // Alert,\r\n} from \"react-bootstrap\";\r\n// import Octicon, { SignOut } from \"@primer/octicons-react\";\r\nimport { PowerSettingsNew } from \"@material-ui/icons\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\nimport AccountRegistration from \"../../accountRegistration\";\r\n// import BusinessRegistration from \"../../businessRegistration\";\r\nimport { Balance, Transfer } from \"../../transfer\";\r\nimport MyBusiness from \"../../myBusiness\";\r\nimport UserEditor from \"../../userEditor\";\r\nimport CurrencyContainer from \"../../currencyContainer\";\r\nimport IdleTimer from \"../../idleTimer\";\r\n\r\n/**\r\n * Component: Summary\r\n */\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = { namespace: \"Summary\" };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const { signedIn, accountNumber, sessionTimeout } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { getBusinesses, sendRequest } = props.barrelFunctions;\r\n  const { onLastSeenUser } = props.barrelEventHandlers;\r\n\r\n  // console.log(\"sessionTimeout:\", sessionTimeout);\r\n\r\n  const { t } = useTranslation(props.namespace);\r\n  // const delayedLastSeenUser = useRef(\r\n  //   _.debounce((q) => sendLastSeenUser(q), 2000)\r\n  // ).current;\r\n\r\n  /**\r\n   * Data consistency tests\r\n   */\r\n  if (signedIn === false) {\r\n    // setRedirectTo(\"/sign-out\");\r\n    return <>User not logged in</>;\r\n  }\r\n\r\n  // const onIdleTimerTimerReset = () => {\r\n  //   delayedLastSeenUser();\r\n  // };\r\n\r\n  // const sendLastSeenUser = () => {\r\n  //   return onLastSeenUser();\r\n  // };\r\n\r\n  const location = useLocation();\r\n\r\n  // console.log(\"location:\", location);\r\n\r\n  const navigation = (\r\n    <>\r\n      <Container\r\n        fluid\r\n        style={{\r\n          // backgroundColor: \"green\",\r\n          paddingRight: \"0\",\r\n          paddingLeft: \"0\",\r\n        }}\r\n      >\r\n        <Row>\r\n          {/*\r\n           * Top Menu\r\n           */}\r\n          <Col>\r\n            <Navbar\r\n              // className=\"card-header\"\r\n              // className=\"navbar-trans\"\r\n              // bg=\"light\"\r\n              // variant=\"light\"\r\n              style={{\r\n                borderRadius: \"5px\",\r\n                // background: \"transparent !important\",\r\n                // color: \"#f7f7f7\",\r\n                backgroundColor: \"var(--light)\", // e8f6f3\r\n                boxShadow: \"none\",\r\n                // whiteSpace: \"nowrap\",\r\n              }}\r\n            >\r\n              <Navbar.Brand href=\"/\">\r\n                <img\r\n                  src=\"gfx/zlogo_light.png\"\r\n                  width=\"auto\"\r\n                  height=\"30\"\r\n                  className=\"d-inline-block align-top\"\r\n                  alt={t(\"Logo\")}\r\n                />\r\n              </Navbar.Brand>\r\n              <Nav className=\"mr-auto\">\r\n                <Nav.Link eventKey=\"profile\" href=\"/profile\">\r\n                  <UserEditor {...args} />\r\n                </Nav.Link>\r\n              </Nav>\r\n              <Nav>\r\n                <Nav.Link eventKey=\"sign-out\" href=\"/sign-out\">\r\n                  <span style={{ whiteSpace: \"nowrap\" }}>\r\n                    <span>\r\n                      <PowerSettingsNew style={{ color: \"var(--dark)\" }} />\r\n                    </span>\r\n\r\n                    <span className=\"d-none d-sm-inline\">\r\n                      &nbsp;\r\n                      {t(\"Sign out\")}\r\n                    </span>\r\n                  </span>\r\n                </Nav.Link>\r\n              </Nav>\r\n              {true && (\r\n                <Nav>\r\n                  <Nav.Item>\r\n                    <IdleTimer timeout={sessionTimeout} {...args} />\r\n                  </Nav.Item>\r\n                </Nav>\r\n              )}\r\n            </Navbar>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <div style={{ height: \"7px\" }}></div>\r\n            <Navbar\r\n              collapseOnSelect\r\n              expand=\"sm\"\r\n              // className=\"card-header\"\r\n              // className=\"navbar-trans\"\r\n              // bg=\"dark\"\r\n              variant=\"dark\"\r\n              style={{\r\n                borderRadius: \"5px\",\r\n                background: \"transparent !important\",\r\n                backgroundColor: \"var(--dark)\",\r\n                boxShadow: \"none\",\r\n              }}\r\n            >\r\n              <Nav>\r\n                <Nav.Link\r\n                  className=\"nav-link-2\"\r\n                  eventKey=\"balance\"\r\n                  href=\"/balance\"\r\n                  style={{\r\n                    fontWeight:\r\n                      location.pathname === \"/balance\" ? \"bold\" : \"normal\",\r\n                  }}\r\n                >\r\n                  {t(\"Balance\")}\r\n                </Nav.Link>\r\n              </Nav>\r\n              <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n              <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n                <Nav className=\"mr-auto\">\r\n                  {accountNumber !== null && (\r\n                    <>\r\n                      <Nav.Link\r\n                        className=\"nav-link-2\"\r\n                        eventKey=\"transfer\"\r\n                        href=\"/transfer\"\r\n                        style={{\r\n                          fontWeight:\r\n                            location.pathname === \"/transfer\"\r\n                              ? \"bold\"\r\n                              : \"normal\",\r\n                        }}\r\n                      >\r\n                        {t(\"Transfer\")}\r\n                      </Nav.Link>\r\n                      <Nav.Link\r\n                        className=\"nav-link-2\"\r\n                        eventKey=\"my-business\"\r\n                        onClick={() => getBusinesses(1)}\r\n                        href=\"#\"\r\n                        style={{\r\n                          fontWeight:\r\n                            location.pathname === \"/my-business\"\r\n                              ? \"bold\"\r\n                              : \"normal\",\r\n                        }}\r\n                      >\r\n                        {t(\"Business\")}\r\n                      </Nav.Link>\r\n                      <Nav.Link\r\n                        className=\"nav-link-2\"\r\n                        eventKey=\"currency\"\r\n                        href=\"/currency\"\r\n                        style={{\r\n                          fontWeight:\r\n                            location.pathname === \"/currency\"\r\n                              ? \"bold\"\r\n                              : \"normal\",\r\n                        }}\r\n                      >\r\n                        {t(\"Currency\")}\r\n                      </Nav.Link>\r\n                    </>\r\n                  )}\r\n                </Nav>\r\n              </Navbar.Collapse>\r\n            </Navbar>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </>\r\n  );\r\n\r\n  const viewBalanceOrTransfer = (\r\n    <Router>\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          component={() => {\r\n            return accountNumber !== null\r\n              ? Balance(args)\r\n              : AccountRegistration(args);\r\n          }}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/summary\"\r\n          component={() => {\r\n            return accountNumber !== null\r\n              ? Balance(args)\r\n              : AccountRegistration(args);\r\n          }}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/account-registration\"\r\n          component={() => {\r\n            return AccountRegistration(args);\r\n          }}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/profile\"\r\n          component={() => {\r\n            return UserEditor({ ...args, mode: \"profile\" });\r\n          }}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/currency\"\r\n          component={() => {\r\n            return CurrencyContainer({ ...args });\r\n          }}\r\n        />\r\n        {/* \r\n        <Route\r\n          exact\r\n          path=\"/business-registration\"\r\n          component={() => {\r\n            return BusinessRegistration(args);\r\n          }}\r\n        />\r\n        */}\r\n        <Route\r\n          exact\r\n          path=\"/my-business\"\r\n          component={() => {\r\n            return MyBusiness(args);\r\n          }}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/balance\"\r\n          component={() => {\r\n            return Balance(args);\r\n          }}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/transfer\"\r\n          component={() => {\r\n            return Transfer(args);\r\n          }}\r\n        />\r\n      </Switch>\r\n    </Router>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {/* Header */}\r\n\r\n      {/* Content */}\r\n      {/*<h3>{t(\"Summary\")}</h3>*/}\r\n\r\n      <Container fluid=\"md\">\r\n        <Row>\r\n          <Col>\r\n            {navigation}\r\n            <div style={{ height: \"7px\" }}></div>\r\n          </Col>\r\n        </Row>\r\n        {/*\r\n        <Row>{viewAccountRegistration}</Row>\r\n        */}\r\n        <Row>\r\n          <Col>{viewBalanceOrTransfer}</Col>\r\n        </Row>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Accordion, Card } from \"react-bootstrap\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\n// import Card from \"../card\";\r\nimport Currencies from \"../currencies\";\r\nimport CurrencyRegistration from \"../currencyRegistration\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = { namespace: \"CurrencyContainer\" };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  const {\r\n    accordionViewCurrency,\r\n    activePageCurrencies,\r\n    accountNumber,\r\n  } = props.barrelGetters;\r\n  const { setAccordionViewCurrency, setRedirectTo } = props.barrelSetters;\r\n  const { getCurrencies } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n    * Destructured vars\r\n    ============================================================================ */\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  /**\r\n    * Functions\r\n    ============================================================================ */\r\n  const ToggleCurrencies = () => {\r\n    // console.log(\"decorate\");\r\n    setAccordionViewCurrency(\"currencies\");\r\n    getCurrencies(activePageCurrencies);\r\n  };\r\n\r\n  const ToggleCurrencyRegistration = () => {\r\n    // console.log(\"decorate\");\r\n    setAccordionViewCurrency(\"currencyRegistration\");\r\n    // getTransactions(1);\r\n  };\r\n\r\n  if (accountNumber === null) setRedirectTo(\"/sign-out\");\r\n\r\n  /**\r\n    * Return\r\n    ============================================================================ */\r\n  return (\r\n    <>\r\n      <Accordion defaultActiveKey={accordionViewCurrency}>\r\n        <Card>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey=\"currencies\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={ToggleCurrencies}\r\n          >\r\n            {t(\"Currencies\")}\r\n          </Accordion.Toggle>\r\n\r\n          <Accordion.Collapse eventKey=\"currencies\">\r\n            <Card.Body>\r\n              <Currencies {...args} />\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n\r\n        <Card>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey=\"currencyRegistration\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={ToggleCurrencyRegistration}\r\n          >\r\n            {t(\"Currency Registration\")}\r\n          </Accordion.Toggle>\r\n\r\n          <Accordion.Collapse eventKey=\"currencyRegistration\">\r\n            <Card.Body>\r\n              <CurrencyRegistration {...args} />\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n      </Accordion>\r\n    </>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { TransferToSelf, TransferToPerson, TransferToBusiness } from \"./index\";\r\n// import { Alert } from \"react-bootstrap\";\r\n\r\n// const navigation = [\r\n//   {\r\n//     name: \"U2S\",\r\n//     link: \"#u2s\",\r\n//   },\r\n//   {\r\n//     name: \"U2U\",\r\n//     link: \"#u2u\",\r\n//   },\r\n//   {\r\n//     name: \"U2B\",\r\n//     link: \"#u2b\",\r\n//   },\r\n// ];\r\n\r\n/**\r\n * Component: Transfer\r\n */\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  // console.log(\"TRANSFER DATA\", props);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const { accountNumber, transferType } = props.barrelGetters;\r\n  const { setRedirectTo } = props.barrelSetters;\r\n  const { format } = props.barrelFunctions;\r\n  const { onTransferTypeChange } = props.barrelEventHandlers;\r\n\r\n  const { t } = useTranslation(\"Transfer\");\r\n\r\n  const data = props.data;\r\n  const type = transferType;\r\n  // const onTypeChange = args.onTypeChange;\r\n\r\n  // console.log(\"TRANSFER DATA TYPE:\", type);\r\n\r\n  const [transferCard, setTransferCard] = useState(null);\r\n\r\n  const onNavigationClick = (id) => {\r\n    onTransferTypeChange(id);\r\n  };\r\n\r\n  const navigation = [\r\n    {\r\n      name: t(\"U2S\"),\r\n      link: \"#u2s\",\r\n    },\r\n    {\r\n      name: t(\"U2U\"),\r\n      link: \"#u2u\",\r\n    },\r\n    {\r\n      name: t(\"U2B\"),\r\n      link: \"#u2b\",\r\n    },\r\n  ];\r\n\r\n  // console.log(\"TRANSFER DATA\", data);\r\n  // const title = t(\"Transfer to account\");\r\n\r\n  useEffect(() => {\r\n    if (type === null) return;\r\n\r\n    // setTransferCard()\r\n    switch (type) {\r\n      case \"#u2s\": // User to self\r\n        setTransferCard(\r\n          <TransferToSelf\r\n            title={t(\"Transfer to account\")}\r\n            args={props}\r\n            navigation={navigation}\r\n            navigationdefaultActiveKey={type}\r\n            onNavigationClick={onNavigationClick}\r\n          />\r\n        );\r\n        break;\r\n      case \"#u2u\": // User to user\r\n        setTransferCard(\r\n          <TransferToPerson\r\n            title={t(\"Transfer to account\")}\r\n            args={props}\r\n            navigation={navigation}\r\n            navigationdefaultActiveKey={type}\r\n            onNavigationClick={onNavigationClick}\r\n          />\r\n        );\r\n        break;\r\n      case \"#u2b\": // User to business\r\n        setTransferCard(\r\n          <TransferToBusiness\r\n            title={t(\"Transfer to account\")}\r\n            args={props}\r\n            navigation={navigation}\r\n            navigationdefaultActiveKey={type}\r\n            onNavigationClick={onNavigationClick}\r\n          />\r\n        );\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [data, format, type]);\r\n\r\n  if (accountNumber === null) setRedirectTo(\"/sign-out\");\r\n\r\n  // return (\r\n  //   <>\r\n  //     <Alert variant=\"warning\">\r\n  //       <Alert.Heading>{t(\"Account not yet registered\")}</Alert.Heading>\r\n  //       <p>\r\n  //         <Trans i18nKey=\"Balance:Please set up your account first.\">\r\n  //           Please set up your account first. Use this{\" \"}\r\n  //           <a href=\"/account-registration\">link</a>.\r\n  //         </Trans>\r\n  //       </p>\r\n  //     </Alert>\r\n  //   </>\r\n  // );\r\n\r\n  return <>{transferCard}</>;\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport config from \"./config\";\r\nimport openSocket from \"socket.io-client\";\r\n\r\nlet socket = openSocket.connect(config.uri.ENDPOINT, {\r\n  secure: true,\r\n  reconnect: true,\r\n});\r\n\r\n/**\r\n * Send request to the server\r\n * @param {*} param0\r\n */\r\nexport const sendData = (data, debug = false) => {\r\n  if (debug) console.log(`request: ${data.req}`, data);\r\n\r\n  // No data - do not send\r\n  // if (req.length === 0) return false;\r\n\r\n  socket.emit(`onDataReceived`, data);\r\n  return true;\r\n};\r\n\r\n// Start a session\r\nexport const startSession = (data, session, debug = false) => {\r\n  // console.log(\"startSession\");\r\n  if (debug) console.log(`request: start session`, data, session);\r\n\r\n  socket.emit(`start session`, {\r\n    data: data,\r\n    session: session,\r\n    req: \"start session\",\r\n  });\r\n};\r\n\r\n// End the session\r\nexport const endSession = (data, session, debug = false) => {\r\n  if (debug) console.log(`request: end session`, data, session);\r\n  socket.emit(`end session`, {\r\n    // char: data,\r\n    data: data,\r\n    // uid: uid,\r\n    session: session,\r\n    req: \"end session\",\r\n  });\r\n};\r\n\r\n// Custom hook: useSocket\r\nexport const useSocket = (callback) => {\r\n  const [responseData, setResponseData] = useState(null);\r\n  socket.on(`onDataReceived`, (data) => {\r\n    setResponseData(data);\r\n    // callback(data);\r\n  });\r\n\r\n  // useEventListener(() => {\r\n  //   socket.on(`onDataReceived`, (data) => {\r\n  //     setResponseData(data);\r\n  //     // callback(data);\r\n  //   });\r\n  // }, [\"focus\"]);\r\n\r\n  useEffect(() => {\r\n    if (responseData === null) return;\r\n\r\n    callback(responseData);\r\n    // eslint-disable-next-line\r\n  }, [responseData]);\r\n};\r\n","import React from \"react\";\r\nimport { useTranslation, Trans } from \"react-i18next\";\r\nimport {\r\n  Form,\r\n  InputGroup,\r\n  // Button,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  // Spinner,\r\n} from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport SubmitButton from \"../submitButton\";\r\n// import Alert from \"../alert\";\r\n// import LanguageSelector from \"../language-selector\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  // console.log(\"ALERT DATA\", props);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  // const {} = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { getReviser, getWorkplace, sendRequest } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  const { t } = useTranslation(\"LogIn\");\r\n\r\n  // const [redirect, setRedirect] = useState(false);\r\n\r\n  /**\r\n   * Yup schema\r\n   */\r\n  const schema = yup.object({\r\n    email: yup\r\n      .string()\r\n      .email(t(\"Invalid email address\"))\r\n      .required(t(\"Email is required\")),\r\n    password: yup.string().required(t(\"No password provided\")),\r\n  });\r\n\r\n  /**\r\n   * Send user registration request\r\n   * @param {object} data\r\n   */\r\n  const sendUserLogInRequest = (data) => {\r\n    // data.pw = data.password;\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    sendRequest({ req: \"sign in user\", data });\r\n  };\r\n\r\n  /**\r\n   * Event listener: On Form Submit\r\n   * @param {object} data Form data\r\n   */\r\n  const onSubmit = (data) => {\r\n    sendUserLogInRequest(data);\r\n  };\r\n\r\n  // const languageData = { language: \"en\" };\r\n\r\n  const UserLogInForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    errors,\r\n  }) => (\r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      <h3>{t(\"Sign In\")}</h3>\r\n\r\n      {/* Email */}\r\n      <Form.Group controlId=\"validationFormikEmail\">\r\n        <Form.Label>{t(\"Email address\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            placeholder={t(\"Enter email\")}\r\n            name=\"email\"\r\n            value={values.email}\r\n            onChange={handleChange}\r\n            // onBlur={handleChange}\r\n            isInvalid={!!errors.email && touched.email}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.email}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      {/* Password */}\r\n      <Form.Group controlId=\"validationFormikPassword\">\r\n        <Form.Label>{t(\"Password\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            type=\"password\"\r\n            placeholder={t(\"Enter password\")}\r\n            name=\"password\"\r\n            value={values.password}\r\n            onChange={handleChange}\r\n            // onBlur={handleChange}\r\n            isInvalid={!!errors.password && touched.password}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.password}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      {/* Remember me */}\r\n      {/*\r\n      <Form.Group controlId=\"validationFormikPassword\">\r\n        <Form.Check\r\n          required\r\n          name=\"rememberMe\"\r\n          label={t(\"Remember me\")}\r\n          onChange={handleChange}\r\n          isInvalid={!!errors.rememberMe}\r\n          feedback={errors.rememberMe}\r\n          id=\"validationFormik0\"\r\n        />\r\n      </Form.Group>\r\n      */}\r\n\r\n      <Form.Group controlId=\"validationFormikPassword\">\r\n        <SubmitButton\r\n          {...args}\r\n          caption={t(\"Submit\")}\r\n          request=\"sign in user\"\r\n          namespace=\"LogIn\"\r\n        />\r\n      </Form.Group>\r\n\r\n      <Container fluid=\"md\">\r\n        <Row>\r\n          <Col>\r\n            <p className=\"other-options text-left\">\r\n              <Trans i18nKey=\"LogIn:Not yet registered\">\r\n                Not yet <a href=\"/sign-up\">registered?</a>\r\n              </Trans>\r\n            </p>\r\n          </Col>\r\n          <Col>\r\n            <p className=\"other-options text-right\">\r\n              <Trans i18nKey=\"LogIn:Forgot password\">\r\n                Forgot <a href=\"/reset\">password?</a>\r\n              </Trans>\r\n            </p>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </Form>\r\n  );\r\n\r\n  // const onAlertClose = () => {\r\n  //   setAlertVisible(false);\r\n  //   authorizedData.hideError();\r\n  // };\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        component={UserLogInForm}\r\n        validationSchema={schema}\r\n        onSubmit={onSubmit}\r\n        initialValues={{\r\n          email: \"\",\r\n          password: \"\",\r\n          rememberMe: \"\",\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","// import { Redirect } from \"react-router-dom\";\r\n// import Octicon, { Eye, EyeClosed } from \"@primer/octicons-react\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport { Formik } from \"formik\";\r\nimport React, { useState } from \"react\";\r\nimport { Form, InputGroup } from \"react-bootstrap\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport * as yup from \"yup\";\r\n// import LanguageSelector from \"../language-selector\";\r\nimport SubmitButton from \"../submitButton\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = { request: \"register user\", namespace: \"SignUp\" };\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const { language } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { getReviser, getWorkplace, sendRequest } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  // console.log(\"SIGN UP PROPS:\", props);\r\n\r\n  /**\r\n   * Hooks\r\n   */\r\n  const [passwordVisible, setPasswordVisible] = useState(false);\r\n  // const [redirect, setRedirect] = useState(false);\r\n\r\n  /**\r\n   * Custom hooks\r\n   */\r\n  const { t } = useTranslation(props.namespace);\r\n\r\n  /**\r\n   * Yup schema\r\n   */\r\n  const schema = yup.object({\r\n    firstName: yup.string().required(t(\"First name is required\")),\r\n    lastName: yup.string().required(t(\"Last name is required\")),\r\n    email: yup\r\n      .string()\r\n      .email(t(\"Invalid email address\"))\r\n      .required(t(\"Email is required\")),\r\n    password: yup\r\n      .string()\r\n      .required(t(\"No password provided\"))\r\n      .min(8, t(\"Password is too short\"))\r\n      // .matches(/[a-zA-Z]/, \"Password can only contain Latin letters.\")\r\n      .matches(\r\n        /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#_?&])[A-Za-z\\d@$!%*#_?&]{8,}$/,\r\n        t(\"Password is too weak\")\r\n      ),\r\n  });\r\n\r\n  /**\r\n   * Functions\r\n   */\r\n  const togglePassword = () => {\r\n    setPasswordVisible(!passwordVisible);\r\n  };\r\n\r\n  /**\r\n   * Send user registration request\r\n   * @param {object} data\r\n   */\r\n  const sendUserRegistrationRequest = (data) => {\r\n    if (data === null) return false;\r\n    data.reviser = getReviser();\r\n    data.workplace = getWorkplace();\r\n    data.language = language;\r\n    data.validateEmail = true;\r\n    return sendRequest({ req: props.request, data });\r\n  };\r\n\r\n  /**\r\n   * Event listener: On Form Submit\r\n   * @param {object} data Form data\r\n   */\r\n  const onSubmit = (data) => {\r\n    if (sendUserRegistrationRequest(data)) {\r\n      // User registration request was submitted\r\n    }\r\n  };\r\n\r\n  // const languageData = { language: \"en\" };\r\n\r\n  const UserRegistrationForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    errors,\r\n  }) => (\r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      <h3>{t(\"Sign Up\")}</h3>\r\n\r\n      {/* First name */}\r\n      <Form.Group controlId=\"validationFormikFirstName\">\r\n        <Form.Label>{t(\"First name\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            type=\"text\"\r\n            placeholder={t(\"Enter first name\")}\r\n            name=\"firstName\"\r\n            value={values.firstName}\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.firstName && touched.firstName}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.firstName}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      {/* Last name */}\r\n      <Form.Group controlId=\"validationFormikLastName\">\r\n        <Form.Label>{t(\"Last name\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            type=\"text\"\r\n            placeholder={t(\"Enter last name\")}\r\n            name=\"lastName\"\r\n            value={values.lastName}\r\n            onChange={handleChange}\r\n            isInvalid={!!errors.lastName && touched.lastName}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.lastName}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      {/* Email */}\r\n      <Form.Group controlId=\"validationFormikEmail\">\r\n        <Form.Label>{t(\"Email address\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            placeholder={t(\"Enter email\")}\r\n            name=\"email\"\r\n            value={values.email}\r\n            onChange={handleChange}\r\n            // onBlur={handleChange}\r\n            isInvalid={!!errors.email && touched.email}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.email}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      {/* Password */}\r\n      <Form.Group controlId=\"validationFormikPassword\">\r\n        <Form.Label>{t(\"Password\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            type={passwordVisible ? \"text\" : \"password\"}\r\n            placeholder={t(\"Enter password\")}\r\n            name=\"password\"\r\n            value={values.password}\r\n            onChange={handleChange}\r\n            // onBlur={handleChange}\r\n            isInvalid={!!errors.password && touched.password}\r\n          />\r\n          <InputGroup.Append>\r\n            <InputGroup.Text\r\n              id=\"inputGroupAppend\"\r\n              onClick={togglePassword}\r\n              style={{\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              {passwordVisible ? (\r\n                <VisibilityOff\r\n                  fontSize=\"small\"\r\n                  style={{ color: \"var(--dark)\" }}\r\n                />\r\n              ) : (\r\n                <Visibility fontSize=\"small\" style={{ color: \"var(--dark)\" }} />\r\n              )}\r\n            </InputGroup.Text>\r\n          </InputGroup.Append>\r\n\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.password}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      <Form.Group controlId=\"validationSubmitButton\">\r\n        <SubmitButton\r\n          {...args}\r\n          caption={t(\"Submit\")}\r\n          request={props.request}\r\n          namespace={props.namespace}\r\n        />\r\n      </Form.Group>\r\n\r\n      <p className=\"other-options text-right\">\r\n        <Trans i18nKey=\"SignUp:Already registered\">\r\n          Already registered <a href=\"/sign-in\">sign in?</a>\r\n        </Trans>\r\n      </p>\r\n    </Form>\r\n  );\r\n\r\n  return (\r\n    <Formik\r\n      component={UserRegistrationForm}\r\n      validationSchema={schema}\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Alert } from \"react-bootstrap\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args.data);\r\n\r\n  // console.log(\"ALERT DATA\", props);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const { error, info } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  // const {} = props.barrelFunctions;\r\n  const { onAlertClose: onClose } = props.barrelEventHandlers;\r\n\r\n  // const autoClose = () => {\r\n  //   window.setTimeout(() => {\r\n  //     onClose();\r\n  //   }, 5000);\r\n  // };\r\n\r\n  if (error !== null) {\r\n    let { t } = useTranslation(\"Errors\");\r\n    return (\r\n      <Alert variant=\"danger\" onClose={() => onClose()} dismissible>\r\n        {t(error)}\r\n      </Alert>\r\n    );\r\n  } else if (info !== null) {\r\n    let { t } = useTranslation(\"Infos\");\r\n    // autoClose();\r\n    return (\r\n      <Alert variant=\"info\" onClose={() => onClose()} dismissible>\r\n        {t(info)}\r\n      </Alert>\r\n    );\r\n  }\r\n  return <></>;\r\n};\r\n","import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport i18n from \"../../translations/i18n\";\r\n// import { withNamespaces } from \"react-i18next\";\r\nimport { Form, Badge } from \"react-bootstrap\";\r\n\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = { namespace: \"CurrencyContainer\" };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  const { userData } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { sendRequest } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  const { t } = useTranslation(\"LanguageSelector\");\r\n  const changeLanguage = (lng) => {\r\n    i18n.changeLanguage(lng);\r\n  };\r\n  const languages = [\r\n    { id: 1, language: \"Latviešu\", code: \"lv\" },\r\n    { id: 2, language: \"English\", code: \"en\" },\r\n  ];\r\n  const handleLanguageSelect = (e) => {\r\n    changeLanguage(e.target.value);\r\n  };\r\n  const selectLanguage = (language) => {\r\n    changeLanguage(language);\r\n\r\n    if (userData !== null) {\r\n      sendRequest({\r\n        req: \"register user language\",\r\n        data: { email: userData.email, language },\r\n      });\r\n    }\r\n  };\r\n\r\n  if (1) {\r\n    return (\r\n      <>\r\n        <div style={{ height: \"7px\" }}></div>\r\n        <Badge\r\n          pill\r\n          variant=\"light\"\r\n          style={{ cursor: \"pointer\" }}\r\n          onClick={() => {\r\n            selectLanguage(\"lv\");\r\n          }}\r\n        >\r\n          lv\r\n        </Badge>{\" \"}\r\n        <Badge\r\n          pill\r\n          variant=\"light\"\r\n          style={{ cursor: \"pointer\" }}\r\n          onClick={() => {\r\n            selectLanguage(\"en\");\r\n          }}\r\n        >\r\n          en\r\n        </Badge>\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <Form.Control\r\n        as=\"select\"\r\n        id=\"languageSelector\"\r\n        onChange={handleLanguageSelect}\r\n        custom\r\n      >\r\n        <option key=\"0\" value={props.language}>\r\n          {t(\"Language\")}\r\n        </option>\r\n        {languages.map((el) => (\r\n          <option key={el.id} value={el.code}>\r\n            {el.language}\r\n          </option>\r\n        ))}\r\n      </Form.Control>\r\n    );\r\n  }\r\n};\r\n\r\n// function selectElement(id, valueToSelect) {\r\n//   let element = document.getElementById(id);\r\n//   if (!element) return;\r\n//   element.value = valueToSelect;\r\n// }\r\n\r\n// // catch the event and make changes accordingly\r\n// i18n.on(\"languageChanged\", function (lng) {\r\n//   selectElement(\"languageSelector\", lng);\r\n// });\r\n","/**\r\n * CSS\r\n */\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./Main.css\";\r\n\r\n/**\r\n * System imports\r\n */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n// import { useTranslation } from \"react-i18next\";\r\n\r\n/**\r\n * User imports\r\n */\r\nimport i18n from \"../../../translations/i18n\";\r\nimport Summary from \"../summary\";\r\nimport {\r\n  useSocket,\r\n  sendData,\r\n  startSession,\r\n  endSession,\r\n} from \"../../../utils/sockets\";\r\n// import { useEventListener } from \"../../../utils/useEventListener\";\r\n// import { useEventListener } from \"../../../utils/useEventListener\";\r\nimport { useInterval } from \"../../../utils/useInterval\";\r\nimport Login from \"../../login\";\r\nimport Logout from \"../../logout\";\r\nimport SignUp from \"../../signup\";\r\nimport PasswordReset from \"../../passwordReset\";\r\nimport errorHandler from \"../../../utils/errorHandler\";\r\nimport responseHandler from \"../../../utils/responseHandler\";\r\nimport requestHandler from \"../../../utils/requestHandler\";\r\nimport { useStickyState } from \"../../../utils/state\";\r\nimport Alert from \"../../alert\";\r\nimport LanguageSelector from \"../../language-selector\";\r\nimport ValidateEmail from \"../../validateEmail\";\r\nimport ChangePassword from \"../../changePassword\";\r\n// import { useEventListener } from \"../../../utils/useEventListener\";\r\n\r\n/**\r\n * Component: Main\r\n */\r\nexport default () => {\r\n  /**\r\n   * Properties\r\n   */\r\n  // const userDataFetchInterval = 5000; // Test: 5000 | 30000;\r\n\r\n  /** \r\n   * Hooks\r\n   ============================================================================ */\r\n  const [debug, setDebug] = useState(true);\r\n  const [loggingOut, setLoggingOut] = useState(false);\r\n  const [pageLoading, setPageLoading] = useState(true);\r\n  // const [instance, setInstance] = useStickyState(0, \"instance\");\r\n  const [request, setRequest] = useStickyState(null, \"request\");\r\n  // const [requestTS, setRequestTS] = useState(null);\r\n  const [instance, setInstance] = useState(Date.now());\r\n  // const [idleTimerTick, setIdleTimerTick] = useState(null);\r\n  // const [lastRequest, setLastRequest] = useStickyState(null, \"lastRequest\");\r\n  const [session, setSession] = useStickyState(uuidv4(), \"session\");\r\n  const [sessionTimeout, setSessionTimeout] = useStickyState(\r\n    5 * 60, // 30 | 5 * 60\r\n    \"sessionTimeout\"\r\n  );\r\n  // const [sessionInitialized, setSessionInitialized] = useState(false);\r\n  const [connected, setConnected] = useStickyState(false, \"connected\");\r\n  const [signedIn, setSignedIn] = useStickyState(false, \"signedIn\");\r\n  // const [idleTimerTS, setIdleTimerTS] = useStickyState(\r\n  //   Date.now(),\r\n  //   \"idleTimerTS\"\r\n  // );\r\n  const [updateInterval, setUpdateInterval] = useStickyState(\r\n    -1,\r\n    \"updateInterval\"\r\n  );\r\n  const [currencyAbbr, setCurrencyAbbr] = useStickyState(\"Z\", \"currencyAbbr\");\r\n  const [currencyRate, setCurrencyRate] = useState(1, \"currencyRate\");\r\n  const [currencies, setCurrencies] = useStickyState(null, \"currencies\");\r\n  const [transactions, setTransactions] = useStickyState(null, \"transactions\");\r\n  const [shares, setShares] = useStickyState(null, \"shares\");\r\n  const [accordionView, setAccordionView] = useStickyState(\r\n    \"balance\",\r\n    \"accordionView\"\r\n  );\r\n  const [accordionViewCurrency, setAccordionViewCurrency] = useStickyState(\r\n    null,\r\n    \"accordionViewCurrency\"\r\n  );\r\n  const [countCurrencies, setCountCurrencies] = useStickyState(\r\n    null,\r\n    \"countCurrencies\"\r\n  );\r\n  const [countTransactions, setCountTransactions] = useStickyState(\r\n    null,\r\n    \"countTransactions\"\r\n  );\r\n  const [countShares, setCountShares] = useStickyState(null, \"countShares\");\r\n  const [activePageCurrencies, setActivePageCurrencies] = useStickyState(\r\n    1,\r\n    \"activePageCurrencies\"\r\n  );\r\n  const [activePageTransactions, setActivePageTransactions] = useStickyState(\r\n    1,\r\n    \"activePageTransactions\"\r\n  );\r\n  const [activePageShares, setActivePageShares] = useStickyState(\r\n    1,\r\n    \"activePageShares\"\r\n  );\r\n  const [currenciesPerPage, setCurrenciesPerPage] = useStickyState(\r\n    5,\r\n    \"currenciesPerPage\"\r\n  );\r\n  const [transactionsPerPage, setTransactionsPerPage] = useStickyState(\r\n    5,\r\n    \"transactionsPerPage\"\r\n  );\r\n  const [sharesPerPage, setSharesPerPage] = useStickyState(5, \"sharesPerPage\");\r\n  const [userData, setUserData] = useStickyState(null, \"userData\");\r\n  const [uid, setUID] = useStickyState(null, \"uid\");\r\n  const [accountNumber, setAccountNumber] = useStickyState(\r\n    null,\r\n    \"accountNumber\"\r\n  );\r\n  const [accountType, setAccountType] = useStickyState(null, \"accountType\");\r\n  const [userBusinesses, setUserBusinesses] = useStickyState(\r\n    null,\r\n    \"userBusinesses\"\r\n  );\r\n  const [countBusinesses, setCountBusinesses] = useStickyState(\r\n    null,\r\n    \"countBusinesses\"\r\n  );\r\n  const [businessesPerPage, setBusinessesPerPage] = useStickyState(\r\n    1,\r\n    \"businessesPerPage\"\r\n  );\r\n  const [activePageBusinesses, setActivePageBusinesses] = useStickyState(\r\n    1,\r\n    \"activePageBusinesses\"\r\n  );\r\n  const [userBusinessesLoaded, setUserBusinessesLoaded] = useStickyState(\r\n    false,\r\n    \"userBusinessesLoaded\"\r\n  );\r\n  const [activeBusiness, setActiveBusiness] = useStickyState(\r\n    null,\r\n    \"activeBusiness\"\r\n  );\r\n  const [activeBusinessID, setActiveBusinessID] = useStickyState(\r\n    null,\r\n    \"activeBusinessID\"\r\n  );\r\n\r\n  const [businessPurposes, setBusinessPurposes] = useStickyState(\r\n    null,\r\n    \"businessPurposes\"\r\n  );\r\n\r\n  const [countBusinessPurposes, setCountBusinessPurposes] = useStickyState(\r\n    null,\r\n    \"countBusinessPurposes\"\r\n  );\r\n  const [businessPurposesPerPage, setBusinessPurposesPerPage] = useStickyState(\r\n    5,\r\n    \"businessPurposesPerPage\"\r\n  );\r\n  const [\r\n    activePageBusinessPurposes,\r\n    setActivePageBusinessPurposes,\r\n  ] = useStickyState(1, \"activePageBusinessPurposes\");\r\n\r\n  const [activeBusinesPurpose, setActiveBusinesPurpose] = useStickyState(\r\n    null,\r\n    \"activeBusinesPurpose\"\r\n  );\r\n\r\n  const [purposeShareholders, setPurposeShareholders] = useStickyState(\r\n    null,\r\n    \"purposeShareholders\"\r\n  );\r\n\r\n  // const [businessLoaded, setBusinessLoaded] = useState(null);\r\n  // const [redirect, setRedirect] = useState(false);\r\n  const [redirectTo, setRedirectTo] = useState(null);\r\n  const [lastInsertId, setLastInsertId] = useState(null);\r\n  // const [responseData, setResponseData] = useState(null);\r\n  const [validateTokenEmail, setValidateTokenEmail] = useState(null);\r\n  const [validateTokenPasswordReset, setValidateTokenPasswordReset] = useState(\r\n    null\r\n  );\r\n\r\n  // const [\r\n  //   passwordResetTokenValidated,\r\n  //   setPasswordResetTokenValidated,\r\n  // ] = useStickyState(\"none\", \"passwordResetTokenValidated\");\r\n\r\n  const [\r\n    passwordResetTokenValidated,\r\n    setPasswordResetTokenValidated,\r\n  ] = useState(null);\r\n  const [passwordResetTokenEmail, setPasswordResetTokenEmail] = useState(null);\r\n\r\n  const [tmrConnected] = useState(null);\r\n  const [language, setLanguage] = useStickyState(\r\n    i18n.options.fallbackLng[0],\r\n    \"language\"\r\n  ); //\r\n  const [transferType, setTransferType] = useStickyState(\r\n    \"#u2s\",\r\n    \"transferType\"\r\n  );\r\n  // const [transferSuccess, setTransferSuccess] = useStickyState(\r\n  //   false,\r\n  //   \"transferSuccess\"\r\n  // );\r\n  const [accountPhotoPath, setAccountPhotoPath] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [info, setInfo] = useState(null);\r\n  // const [alertVisible, setAlertVisible] = useState(false);\r\n\r\n  // const gotEvent = useEventListener();\r\n  // console.log(gotEvent);\r\n\r\n  /**\r\n   * Barrel: Getters\r\n   */\r\n  const barrelGetters = {\r\n    debug,\r\n    // instance,\r\n    loggingOut,\r\n    // timestamp,\r\n    // startTimestamp,\r\n    pageLoading,\r\n    request,\r\n    // requestTS,\r\n    instance,\r\n    // lastRequest,\r\n    session,\r\n    sessionTimeout,\r\n    updateInterval,\r\n    // sessionTimeout,\r\n    // tmrSession,\r\n    // idleTimerTS,\r\n    // idleTimerTick,\r\n    currencies: JSON.parse(currencies),\r\n    transactions: JSON.parse(transactions),\r\n    shares: JSON.parse(shares),\r\n    accordionView,\r\n    accordionViewCurrency,\r\n    countCurrencies,\r\n    countTransactions,\r\n    countShares,\r\n    activePageCurrencies,\r\n    activePageTransactions,\r\n    activePageShares,\r\n    currenciesPerPage,\r\n    transactionsPerPage,\r\n    sharesPerPage,\r\n    userData: JSON.parse(userData),\r\n    // redirect,\r\n    redirectTo,\r\n    lastInsertId,\r\n    connected,\r\n    signedIn,\r\n    currencyAbbr,\r\n    currencyRate,\r\n    // currencyStatus,\r\n    accountNumber,\r\n    accountType,\r\n    uid,\r\n    userBusinesses: JSON.parse(userBusinesses),\r\n    countBusinesses,\r\n    businessesPerPage,\r\n    activePageBusinesses,\r\n    userBusinessesLoaded,\r\n    activeBusiness,\r\n    activeBusinessID,\r\n    businessPurposes: JSON.parse(businessPurposes),\r\n    countBusinessPurposes,\r\n    businessPurposesPerPage,\r\n    activePageBusinessPurposes,\r\n    activeBusinesPurpose,\r\n    purposeShareholders: JSON.parse(purposeShareholders),\r\n    // businessLoaded,\r\n    tmrConnected,\r\n    validateTokenEmail,\r\n    validateTokenPasswordReset,\r\n    passwordResetTokenValidated,\r\n    passwordResetTokenEmail,\r\n    language,\r\n    transferType,\r\n    // transferSuccess,\r\n    accountPhotoPath,\r\n    error,\r\n    info,\r\n    // alertVisible,\r\n  };\r\n\r\n  /**\r\n   * Barrel: Setters\r\n   */\r\n  const barrelSetters = {\r\n    setDebug,\r\n    // setInstance,\r\n    setLoggingOut,\r\n    // setTimestamp,\r\n    // setStartTimestamp,\r\n    setPageLoading,\r\n    setRequest,\r\n    // setRequestTS,\r\n    setInstance,\r\n    // setLastRequest,\r\n    setSession,\r\n    setSessionTimeout,\r\n    setUpdateInterval,\r\n    // setSessionTimeout,\r\n    // setIdleTimerTS,\r\n    // setIdleTimerTick,\r\n    setCurrencies,\r\n    setTransactions,\r\n    setShares,\r\n    setAccordionView,\r\n    setAccordionViewCurrency,\r\n    setCountCurrencies,\r\n    setCountTransactions,\r\n    setCountShares,\r\n    setActivePageCurrencies,\r\n    setActivePageTransactions,\r\n    setActivePageShares,\r\n    setCurrenciesPerPage,\r\n    setTransactionsPerPage,\r\n    setSharesPerPage,\r\n    setConnected,\r\n    setLanguage,\r\n    setUserData,\r\n    // sendRequest,\r\n    setSignedIn,\r\n    setCurrencyAbbr,\r\n    setCurrencyRate,\r\n    // setCurrencyStatus,\r\n    setRedirectTo,\r\n    setLastInsertId,\r\n    setAccountNumber,\r\n    setAccountType,\r\n    setUID,\r\n    setUserBusinesses,\r\n    setCountBusinesses,\r\n    setBusinessesPerPage,\r\n    setActivePageBusinesses,\r\n    setUserBusinessesLoaded,\r\n    setActiveBusiness,\r\n    setActiveBusinessID,\r\n    setBusinessPurposes,\r\n    setCountBusinessPurposes,\r\n    setBusinessPurposesPerPage,\r\n    setActivePageBusinessPurposes,\r\n    setActiveBusinesPurpose,\r\n    setPurposeShareholders,\r\n    // setBusinessLoaded,\r\n    setAccountPhotoPath,\r\n    setValidateTokenEmail,\r\n    setValidateTokenPasswordReset,\r\n    setPasswordResetTokenValidated,\r\n    setPasswordResetTokenEmail,\r\n    // setTransferSuccess,\r\n    // setRedirect,\r\n    // showMessage,\r\n  };\r\n\r\n  /** \r\n   * Custom hooks\r\n   ============================================================================ */\r\n  // const { t } = useTranslation(\"Errors\");\r\n\r\n  useSocket((data) => {\r\n    // console.log(\"REQUEST:\", request);\r\n\r\n    // if (!gotFocus) return;\r\n    // console.log(\"USE SOCKET:\", data);\r\n\r\n    // setResponseData(data);\r\n\r\n    // console.log(\"LAST REQUEST:\", lastRequest);\r\n\r\n    processResponse({\r\n      args: data,\r\n      barrels: barrels,\r\n    });\r\n  });\r\n\r\n  // useEventListener(\r\n  //   (e) => {\r\n  //     console.log(\"EVENT:\", e.type);\r\n  //     // setGotFocus(e.type === \"focus\");\r\n  //     setInstance(e.type === \"load\" ? instance + 1 : instance - 1);\r\n  //   },\r\n  //   [\"load\", \"onbeforeunload\"] // \"blur\",\r\n  // );\r\n\r\n  // useEventListener(() => {\r\n  //   // console.log(\"LOST FOCUS\");\r\n  //   setGotFocus(false);\r\n  // }, [\"blur\"]);\r\n\r\n  /** \r\n   * Functions\r\n   ============================================================================ */\r\n\r\n  /**\r\n   * Sends requests to the server\r\n   * @param {string} request Request name\r\n   * @param {object} data Request data\r\n   */\r\n  const sendRequest = ({ req, data = null }) => {\r\n    if (processRequest({ req, data, session, uid: \"STA\", barrels })) {\r\n      // request processed successfully\r\n      return true;\r\n    } else {\r\n      console.log(\"THIS SHOULD NOT BE REACHED\");\r\n      return sendData({ req, uid: \"STA\", session, data }, debug);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Processes user request\r\n   * @param {*} param0\r\n   */\r\n  const processRequest = ({ req, data, session, uid, barrels }) => {\r\n    // showMessage(\"PROCESSING_REQUEST\", \"info\");\r\n    // console.log(\"LAST REQUEST:\", lastRequest);\r\n\r\n    // data.ts = Date.now();\r\n    // setRequestTS(data.ts);\r\n    data.instance = instance;\r\n\r\n    setRequest(req);\r\n    // setLastRequest(req);\r\n    return requestHandler({\r\n      req,\r\n      data,\r\n      session,\r\n      uid,\r\n      barrels,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Processes server response\r\n   * @param {*} param0\r\n   */\r\n  const processResponse = ({ args, barrels }) => {\r\n    // console.log(\"PROCESS RESPONSE ARGS:\", args);\r\n\r\n    /**\r\n     * Choose a handler depending on response status:\r\n     * Error or other (success | continue | finished | pending etc.)\r\n     */\r\n    return args.status === \"error\"\r\n      ? errorHandler({\r\n          args: args,\r\n          uid: uid,\r\n          barrels: barrels,\r\n        })\r\n      : responseHandler({\r\n          args: args,\r\n          uid: uid,\r\n          barrels: barrels,\r\n        });\r\n  };\r\n\r\n  /**\r\n   * Shows a messgae (error or info)\r\n   * @param {string} msg Messgae text\r\n   * @param {string} type Message type (\"error\" | \"info\")\r\n   */\r\n  const showMessage = (msg, type = \"error\") => {\r\n    // if (type !== \"error\") {\r\n    //   hideMessage();\r\n    // }\r\n    type === \"error\" ? setError(msg) : setInfo(msg);\r\n  };\r\n\r\n  /**\r\n   * Hides the message\r\n   */\r\n  const hideMessage = () => {\r\n    setError(null);\r\n    setInfo(null);\r\n  };\r\n\r\n  /**\r\n   * Check if session has timed out\r\n   */\r\n  // const checkSesstionTimeout = () => {\r\n  //   if (signedIn) {\r\n  //     const minute = 60; // Test: > 60\r\n  //     const lastSeenBefore = Math.round(Date.now() / 1000 - idleTimerTS);\r\n  //     console.log(\"lastSeenBefore:\", lastSeenBefore);\r\n  //     if (lastSeenBefore >= 5 * minute) {\r\n  //       onSessionTimeout();\r\n  //     }\r\n  //   }\r\n  // };\r\n\r\n  /**\r\n   * Changes the website language\r\n   */\r\n  const changeLanguage = (lng) => {\r\n    i18n.changeLanguage(lng);\r\n    setLanguage(lng);\r\n  };\r\n\r\n  /**\r\n   * Format number\r\n   * @param {number} number\r\n   */\r\n  const format = (number, currency = currencyAbbr) => {\r\n    return (\r\n      new Intl.NumberFormat(language, {\r\n        notation: \"standard\",\r\n        minimumFractionDigits: 2,\r\n      }).format(number * currencyRate) +\r\n      \" \" +\r\n      currency\r\n    );\r\n  };\r\n  //\r\n\r\n  /**\r\n   * Format per cent\r\n   * @param {number} number\r\n   */\r\n  const formatPerCent = (number) => {\r\n    return (\r\n      new Intl.NumberFormat(language, {\r\n        notation: \"standard\",\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 2,\r\n      }).format(number) + \"%\"\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Format per cent\r\n   * @param {number} number\r\n   */\r\n  const formatExchangeRate = (number) => {\r\n    return new Intl.NumberFormat(language, {\r\n      notation: \"standard\",\r\n      minimumFractionDigits: 5,\r\n      maximumFractionDigits: 5,\r\n    }).format(number);\r\n  };\r\n\r\n  const parseLocaleNumber = (stringNumber, locale) => {\r\n    let num = 123456.789,\r\n      fmt_local = new Intl.NumberFormat(locale, {\r\n        style: \"currency\",\r\n        currency: \"USD\",\r\n      }),\r\n      parts_local = fmt_local.formatToParts(num),\r\n      group = \"\",\r\n      decimal = \"\",\r\n      currency = \"\";\r\n\r\n    // separators\r\n    parts_local.forEach(function (i) {\r\n      switch (i.type) {\r\n        case \"group\":\r\n          group = i.value;\r\n          break;\r\n        case \"decimal\":\r\n          decimal = i.value;\r\n          break;\r\n        case \"currency\":\r\n          currency = i.value;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n\r\n    return parseFloat(\r\n      stringNumber\r\n        .replace(new RegExp(\"\\\\\" + group, \"g\"), \"\")\r\n        .replace(new RegExp(\"\\\\\" + decimal), \".\")\r\n        .replace(new RegExp(\"\\\\\" + currency, \"g\"), \"\")\r\n    );\r\n  };\r\n\r\n  const formatDate = (\r\n    ts,\r\n    options = {\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      year: \"numeric\",\r\n      hour: \"numeric\",\r\n      minute: \"numeric\",\r\n    }\r\n  ) => {\r\n    // const event = new Date(date);\r\n\r\n    // const options = {\r\n    //   weekday: \"long\",\r\n    //   year: \"numeric\",\r\n    //   month: \"long\",\r\n    //   day: \"numeric\",\r\n    // };\r\n\r\n    // return event.toLocaleDateString(language, options);\r\n\r\n    // const defaults = {\r\n    //   month: \"long\",\r\n    //   day: \"numeric\",\r\n    //   year: \"numeric\",\r\n    //   hour: \"numeric\",\r\n    //   minute: \"numeric\",\r\n    // };\r\n    // const options = Object.assign(defaults, args);\r\n    const date = new Date(ts);\r\n    return new Intl.DateTimeFormat(language, options).format(date);\r\n  };\r\n\r\n  /**\r\n   * Retrieves an URL parameter\r\n   */\r\n  const getUrlParam = (param) => {\r\n    const queryString = window.location.search;\r\n    const urlParams = new URLSearchParams(queryString);\r\n    return urlParams.get(param);\r\n  };\r\n\r\n  // /**\r\n  //  * Clear local storage (URL param ?reset)\r\n  //  */\r\n  // if (getUrlParam(\"reset\") !== null) {\r\n  //   console.log(\"Reset\");\r\n\r\n  //   window.localStorage.clear();\r\n  //   console.log(\"Local storage cleared\");\r\n  // }\r\n\r\n  const sendEmailValidationRequest = ({ token, email }) => {\r\n    // console.log(\"sendEmailValidationRequest:\", token, email);\r\n\r\n    sendRequest({\r\n      req: \"validate email token\",\r\n      data: { token, email },\r\n    });\r\n  };\r\n\r\n  const sendPasswordResetRequest = ({ token, email }) => {\r\n    // console.log(\"sendEmailValidationRequest:\", token, email);\r\n    setPasswordResetTokenEmail(email);\r\n    sendRequest({\r\n      req: \"validate password reset token\",\r\n      data: { token, email },\r\n    });\r\n  };\r\n\r\n  const getCurrencies = (newPage) => {\r\n    setCurrencies(null);\r\n    sendRequest({\r\n      req: \"get currencies\",\r\n      data: { page: newPage, limit: currenciesPerPage },\r\n    });\r\n    setActivePageCurrencies(newPage);\r\n  };\r\n\r\n  const getTransactions = (newPage) => {\r\n    setTransactions(null);\r\n    sendRequest({\r\n      req: \"get transactions\",\r\n      data: { page: newPage, limit: transactionsPerPage, uid: accountNumber },\r\n    });\r\n    setActivePageTransactions(newPage);\r\n  };\r\n\r\n  const getShares = (newPage) => {\r\n    setShares(null);\r\n    sendRequest({\r\n      req: \"get shares\",\r\n      data: { page: newPage, limit: sharesPerPage, uid: accountNumber },\r\n    });\r\n    setActivePageShares(newPage);\r\n  };\r\n\r\n  const getBusinesses = (newPage = 1) => {\r\n    setUserBusinesses(null);\r\n    setCountBusinessPurposes(null);\r\n    setActivePageBusinessPurposes(1);\r\n    setActiveBusinessID(null);\r\n    sendRequest({\r\n      req: \"get user businesses\",\r\n      data: { uid: accountNumber, page: newPage, limit: businessesPerPage },\r\n    });\r\n    setActivePageBusinesses(newPage);\r\n  };\r\n\r\n  const getBusinessPurposes = (business_id, selected = null, newPage = 1) => {\r\n    // console.log(\"BUSINESS PURPOSES FOR ID \" + business_id, businessPurposes);\r\n\r\n    if (selected !== null) {\r\n      setActiveBusiness(selected);\r\n      setActiveBusinesPurpose(null);\r\n    }\r\n    setBusinessPurposes(null);\r\n    setCountBusinessPurposes(null);\r\n    setActivePageBusinessPurposes(newPage);\r\n    setActiveBusinessID(business_id);\r\n    return sendRequest({\r\n      req: \"get business purposes\",\r\n      data: {\r\n        business_id: business_id,\r\n        page: newPage,\r\n        limit: businessPurposesPerPage,\r\n      },\r\n    });\r\n  };\r\n\r\n  const getPurposeShareholders = (purpose_id, selected = null) => {\r\n    if (selected !== null) {\r\n      // setActiveBusinesPurpose(selected);\r\n      setActiveBusinesPurpose(purpose_id);\r\n    }\r\n    setPurposeShareholders(null);\r\n    return sendRequest({\r\n      req: \"get purpose shareholders\",\r\n      data: { purpose_id: purpose_id },\r\n    });\r\n  };\r\n\r\n  const getAccountData = () => {\r\n    if (accountNumber === null) return;\r\n    sendRequest({\r\n      req: \"get account data\",\r\n      data: { uid: accountNumber },\r\n    });\r\n  };\r\n\r\n  const getTransactionById = (id) => {\r\n    sendRequest({\r\n      req: \"get transaction by id\",\r\n      data: { id: id },\r\n    });\r\n  };\r\n\r\n  const getContainerClass = (signedIn) => {\r\n    return {\r\n      wrapperClass: signedIn\r\n        ? \"auth-wrapper auth-wrapper-summary\"\r\n        : \"auth-wrapper\",\r\n      innerClass: signedIn\r\n        ? \"auth-inner auth-inner-summary\"\r\n        : \"auth-inner autoWidth\",\r\n    };\r\n  };\r\n\r\n  const getRedirect = () => {\r\n    // if (redirectTo !== null) {\r\n    //   let link = redirectTo;\r\n\r\n    //   r = <Redirect push to={link} />;\r\n    // }\r\n    return redirectTo === null ? \"\" : <Redirect push to={redirectTo} />;\r\n  };\r\n\r\n  // const updateTimestamp = () => {\r\n  //   let tmr = setInterval(() => {\r\n  //     // console.log(timestamp);\r\n\r\n  //     setTimestamp(Math.floor(Date.now() / 1000));\r\n  //   }, 1000);\r\n  //   setTmrUpdateTimestamp(tmr);\r\n  // };\r\n\r\n  // const clearTimestamp = () => {\r\n  //   clearInterval(tmrUpdateTimestamp);\r\n  // };\r\n\r\n  const updateLastSeenUser = () => {\r\n    let data = { email: barrelGetters.userData.email };\r\n\r\n    return sendRequest({ req: \"update last seen user\", data });\r\n  };\r\n\r\n  const getReviser = () => {\r\n    return \"STA\";\r\n  };\r\n\r\n  const getWorkplace = () => {\r\n    return \"LAPSTA\";\r\n  };\r\n\r\n  /**\r\n   * Barrel: Functions\r\n   */\r\n  const barrelFunctions = {\r\n    sendRequest,\r\n    // processResponse,\r\n    showMessage,\r\n    hideMessage,\r\n    // startSessionTimeout,\r\n    // stopSessionTimeout,\r\n    changeLanguage,\r\n    format,\r\n    formatPerCent,\r\n    formatExchangeRate,\r\n    formatDate,\r\n    updateLastSeenUser,\r\n    sendEmailValidationRequest,\r\n    getUrlParam,\r\n    getAccountData,\r\n    getTransactionById,\r\n    getBusinesses,\r\n    getBusinessPurposes,\r\n    getPurposeShareholders,\r\n    getCurrencies,\r\n    getTransactions,\r\n    getShares,\r\n    parseLocaleNumber,\r\n    getReviser,\r\n    getWorkplace,\r\n    // updateTimestamp,\r\n  };\r\n\r\n  /** \r\n   * Event handlers\r\n   ============================================================================ */\r\n\r\n  /**\r\n   * On language change\r\n   */\r\n  i18n.on(\"languageChanged\", function (lng) {\r\n    setLanguage(lng);\r\n  });\r\n\r\n  /**\r\n   * On redirect\r\n   * @param {string} to Redirect path (e.g. \"/sign-in\")\r\n   */\r\n  const onRedirect = (to) => {\r\n    setRedirectTo(to);\r\n  };\r\n\r\n  // /**\r\n  //  * On login\r\n  //  * @param {object} data Login data\r\n  //  */\r\n  // const onLogin = (data) => {\r\n  //   setUserData(JSON.stringify(data));\r\n  //   sendRequest({ req: \"sign in user\", data: data });\r\n  //   // setAuthorizationStep(1); // authorized session request pending\r\n  // };\r\n\r\n  /**\r\n   * On signup\r\n   * @param {object} data Signup data\r\n   */\r\n  const onSignUp = (data) => {\r\n    // console.log(\"SIGN UP (data):\", data);\r\n    /// setUserData(JSON.stringify(data));\r\n    return sendRequest({ req: \"register user\", data });\r\n  };\r\n\r\n  const onSessionTimeout = () => {\r\n    // if (debug) return;\r\n    console.log(\"Session timed out...\");\r\n    // endSession(\"bye\", session);\r\n    setLoggingOut(true);\r\n    setRedirectTo(\"/sign-out\");\r\n    // Logout();\r\n  };\r\n\r\n  // const onIdleTimerReset = () => {\r\n  //   // console.log(\"tick:\", tick);\r\n  //   setIdleTimerTS(Date.now() / 1000);\r\n  // };\r\n\r\n  /**\r\n   * On account registration\r\n   * @param {object} data The account registration data\r\n   */\r\n  // const onAccountRegistration = (data) => {\r\n  //   // console.log(\"ACCOUNT REGISTRATION (data):\", data);\r\n  //   // setAccountNumber(data.personalID);\r\n  //   return sendRequest({ req: \"register account\", data });\r\n  // };\r\n\r\n  /**\r\n   * On transfer type change\r\n   * @param {string} id The transfer type id (\"U2S\", \"U2U\", \"U2B\" etc.)\r\n   */\r\n  const onTransferTypeChange = (id) => {\r\n    // console.log(\"setTransferType: \" + id);\r\n    setTransferType(id);\r\n  };\r\n\r\n  const onTransferSuccess = () => {\r\n    // console.log(\"ON TRANSFER SUCCESS\", barrels);\r\n  };\r\n\r\n  /**\r\n   * On transfer\r\n   * @param {object} data Transfer data\r\n   */\r\n  const onTransfer = (data) => {\r\n    // console.log(\"ON TRANSFER (data):\", data);\r\n    // sendRequest({ req: \"register account\", data: data });\r\n    sendRequest(data);\r\n  };\r\n\r\n  // const onBusinessRegistration = (data) => {\r\n  //   // console.log(\"ON BUSINESS REGISTRATION (data):\", data);\r\n  //   // sendRequest({ req: \"register account\", data: data });\r\n  //   sendRequest(data);\r\n  // };\r\n\r\n  const onPurposeRegistration = (data) => {\r\n    sendRequest(data);\r\n  };\r\n\r\n  // const onShareholderRegistration = (data) => {\r\n  //   console.log(\"ON SHAREHOLDER REGISTRATION (data):\", data);\r\n  //   // sendRequest({ req: \"register account\", data: data });\r\n  //   sendRequest(data);\r\n  //   // getBusinesses();\r\n  // };\r\n\r\n  /**\r\n   * On logout\r\n   */\r\n  const onLogOut = () => {\r\n    // setSession(null);\r\n    setUpdateInterval(-1);\r\n\r\n    // TODO: refactor this to separate function (as well as the startSession)\r\n    let data = {};\r\n    data.request = \"bye\";\r\n    data.instance = instance;\r\n    endSession(data, session, debug);\r\n    // setSession(null);\r\n\r\n    setSignedIn(false);\r\n    // setTimerActive(false);\r\n\r\n    setCurrencies(null);\r\n    setTransactions(null);\r\n    setShares(null);\r\n    setAccordionView(\"balance\");\r\n    setAccordionViewCurrency(null);\r\n    setAccountNumber(null);\r\n    setAccountType(null);\r\n    setTransferType(\"#u2s\");\r\n    setCountTransactions(null);\r\n    setUserData(null);\r\n    setUserBusinesses(null);\r\n    setUserBusinessesLoaded(false);\r\n    setActiveBusiness(null);\r\n    setBusinessPurposes(null);\r\n    setActiveBusinesPurpose(null);\r\n    setPurposeShareholders(null);\r\n    setAccountPhotoPath(\"\");\r\n    setPasswordResetTokenValidated(null);\r\n    setPasswordResetTokenEmail(null);\r\n    // setSharesPerPage(1);\r\n\r\n    // setCurrenciesPerPage(null);\r\n    // setTransactionsPerPage(null);\r\n    // setSharesPerPage(null);\r\n    // setBusinessesPerPage(null);\r\n    // setBusinessPurposesPerPage(null);\r\n\r\n    setError(null);\r\n    setInfo(null);\r\n    // setRedirectTo(\"/sign-in\"); // TODO: In production might disable that\r\n    // window.localStorage.clear(); // TODO: Remove in production remove\r\n  };\r\n\r\n  const onAlertClose = () => {\r\n    // setAlertVisible(false);\r\n    hideMessage();\r\n  };\r\n\r\n  /**\r\n   * Barrel: Event handlers\r\n   */\r\n  const barrelEventHandlers = {\r\n    onRedirect,\r\n    onSignUp,\r\n    onSessionTimeout,\r\n    // onIdleTimerReset,\r\n    // onAccountRegistration,\r\n    onTransferTypeChange,\r\n    onTransferSuccess,\r\n    onTransfer,\r\n    // onLastSeenUser,\r\n\r\n    // onBusinessRegistration,\r\n    onPurposeRegistration,\r\n    // onShareholderRegistration,\r\n    onLogOut,\r\n    onAlertClose,\r\n  };\r\n\r\n  /** \r\n   * Effect hooks\r\n   ============================================================================ */\r\n\r\n  useEffect(() => {\r\n    // console.log(\"MOUNTED\");\r\n\r\n    /**\r\n     * Clear local storage (URL param ?reset)\r\n     */\r\n    if (getUrlParam(\"reset\") !== null) {\r\n      window.localStorage.clear();\r\n      console.log(\"Local storage cleared\");\r\n    }\r\n\r\n    // if (!sessionInitialized) {\r\n    //   // setIdleTimerTS(Date.now());\r\n    //   setSessionInitialized(true);\r\n    //   console.log(\"INITIALIZE SESSION\");\r\n    //   checkSesstionTimeout();\r\n    // }\r\n\r\n    // checkSesstionTimeout();\r\n\r\n    // getAccountData();\r\n    // onLastSeenUser();\r\n\r\n    return () => {\r\n      // on unmount\r\n      // onLastSeenUser();\r\n    };\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useInterval(() => {\r\n    updateLastSeenUser();\r\n  }, updateInterval);\r\n\r\n  /**\r\n   * On session ID change\r\n   */\r\n  useEffect(() => {\r\n    if (session === null) return;\r\n    let data = {};\r\n    data.request = \"hello\";\r\n    data.instance = instance;\r\n    startSession(data, session, debug);\r\n    // eslint-disable-next-line\r\n  }, [session]);\r\n\r\n  useEffect(() => {\r\n    // if (connected === false) {\r\n    //   // anonymize session\r\n    //   setSession(uuidv4());\r\n    // }\r\n    // eslint-disable-next-line\r\n  }, [connected]);\r\n\r\n  /**\r\n   * On signed in status change\r\n   */\r\n  useEffect(() => {\r\n    if (!signedIn) return;\r\n\r\n    setUpdateInterval(-1);\r\n    getAccountData();\r\n\r\n    // eslint-disable-next-line\r\n  }, [signedIn]);\r\n\r\n  useEffect(() => {\r\n    // if (userData === null) return;\r\n    // const seconds_since_last_seen = JSON.parse(userData)\r\n    //   .seconds_since_last_seen;\r\n    // if (typeof seconds_since_last_seen === \"undefined\") return;\r\n    // console.log(\r\n    //   \"seconds_since_last_seen\",\r\n    //   seconds_since_last_seen,\r\n    //   sessionTimeout\r\n    // );\r\n    // if (seconds_since_last_seen > sessionTimeout) {\r\n    //   onSessionTimeout();\r\n    // } else {\r\n    //   onLastSeenUser();\r\n    // }\r\n    // onLastSeenUser();\r\n    // eslint-disable-next-line\r\n  }, [userData]);\r\n\r\n  // useEffect(() => {\r\n  //   if (timerActive) {\r\n  //     console.log(\"SET INTERVAL\");\r\n  //     updateTimestamp();\r\n  //   } else {\r\n  //     console.log(\"CLEAR INTERVAL\");\r\n\r\n  //     clearInterval(tmrUpdateTimestamp);\r\n  //   }\r\n  //   // eslint-disable-next-line\r\n  // }, [timerActive]);\r\n\r\n  /**\r\n   * On account number change\r\n   */\r\n  useEffect(() => {\r\n    if (accountNumber === null) return;\r\n\r\n    // eslint-disable-next-line\r\n  }, [accountNumber]);\r\n\r\n  /**\r\n   * On email validation token\r\n   */\r\n  useEffect(() => {\r\n    if (validateTokenEmail === null) return;\r\n\r\n    sendEmailValidationRequest(JSON.parse(validateTokenEmail));\r\n\r\n    // eslint-disable-next-line\r\n  }, [validateTokenEmail]);\r\n\r\n  // useEffect(() => {\r\n  //   // console.log(\"EVENT\");\r\n  //   // eslint-disable-next-line\r\n  // }, [useEventListener()]);\r\n\r\n  /**\r\n   * On email validation token\r\n   */\r\n  useEffect(() => {\r\n    if (passwordResetTokenValidated === null) return;\r\n\r\n    // console.log(\"Validate token:\", passwordResetTokenValidated);\r\n\r\n    // sendEmailValidationRequest(JSON.parse(validateTokenEmail));\r\n    onRedirect(\"/password\");\r\n\r\n    // eslint-disable-next-line\r\n  }, [passwordResetTokenValidated]);\r\n\r\n  /**\r\n   * On password reset validation token\r\n   */\r\n  useEffect(() => {\r\n    if (validateTokenPasswordReset === null) return;\r\n\r\n    // console.log(\"Validate password reset token:\", validateTokenPasswordReset);\r\n\r\n    sendPasswordResetRequest(JSON.parse(validateTokenPasswordReset));\r\n\r\n    // eslint-disable-next-line\r\n  }, [validateTokenPasswordReset]);\r\n\r\n  const { wrapperClass, innerClass } = getContainerClass(signedIn);\r\n\r\n  /**\r\n   * Barrel of barrels\r\n   */\r\n  const barrels = {\r\n    barrelGetters,\r\n    barrelSetters,\r\n    barrelFunctions,\r\n    barrelEventHandlers,\r\n  };\r\n\r\n  const appClass = signedIn ? \"App\" : \"App bg\";\r\n\r\n  return (\r\n    <>\r\n      <Router>\r\n        {getRedirect()}\r\n\r\n        <div className={appClass} style={{}}>\r\n          {/**\r\n           * Wrapper for the main window\r\n           */}\r\n          <div className={wrapperClass} style={{}}>\r\n            {/**\r\n             * Top margin of the main window (only for >= sm)\r\n             */}\r\n            <div className=\"d-none d-md-block\" style={{ height: \"1rem\" }}></div>\r\n\r\n            {/**\r\n             * The main window\r\n             */}\r\n            <div className={innerClass}>\r\n              {/**\r\n               * Top padding of the main window\r\n               */}\r\n              <div style={{ height: \"16px\" }}></div>\r\n\r\n              {/**\r\n               * The alert\r\n               */}\r\n              <div>\r\n                <Alert data={barrels} />\r\n              </div>\r\n\r\n              {/**\r\n               * Routes\r\n               */}\r\n              <Switch>\r\n                {/**\r\n                 * Route: Home\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/\"\r\n                  component={() => {\r\n                    return signedIn ? Summary(barrels) : Login(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Sign in\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/sign-in\"\r\n                  component={() => {\r\n                    return Login(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Sign up\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/sign-up\"\r\n                  component={() => {\r\n                    return SignUp(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Validate mail\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/validate-email\"\r\n                  component={() => {\r\n                    return ValidateEmail(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Change password\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/password\"\r\n                  component={() => {\r\n                    return ChangePassword(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: User profile\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/profile\"\r\n                  component={() => {\r\n                    return signedIn ? Summary(barrels) : Login(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Currency\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/currency\"\r\n                  component={() => {\r\n                    return signedIn ? Summary(barrels) : Login(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Sign out\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/sign-out\"\r\n                  component={() => {\r\n                    return Logout(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Password reset\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/reset\"\r\n                  component={() => {\r\n                    return PasswordReset(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Account registration\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/account-registration\"\r\n                  component={() => {\r\n                    return Summary(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Business registration\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/business-registration\"\r\n                  component={() => {\r\n                    return Summary(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: My business\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/my-business\"\r\n                  component={() => {\r\n                    return Summary(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Balance\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/balance\"\r\n                  component={() => {\r\n                    return Summary(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Transfer\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/transfer\"\r\n                  component={() => {\r\n                    return Summary(barrels);\r\n                  }}\r\n                />\r\n\r\n                {/**\r\n                 * Route: Summary\r\n                 */}\r\n                <Route\r\n                  exact\r\n                  path=\"/summary\"\r\n                  component={() => {\r\n                    return Summary(barrels);\r\n                  }}\r\n                />\r\n              </Switch>\r\n\r\n              {/**\r\n               * Language selector\r\n               */}\r\n              <div className=\"text-center\">\r\n                <LanguageSelector {...barrels} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Router>\r\n    </>\r\n  );\r\n};\r\n","import { sendData } from \"../utils/sockets\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   ============================================================================ */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n  const { req, data, session, uid, barrels } = props;\r\n\r\n  // console.log(\"RESPONSE HANDLER: \", props, barrels);\r\n\r\n  /**\r\n   * Barrels\r\n   ============================================================================ */\r\n  const { debug } = barrels.barrelGetters;\r\n  const {\r\n    setUserData,\r\n    setUID,\r\n    setAccountNumber,\r\n    // setUserBusinesses,\r\n  } = barrels.barrelSetters;\r\n  // const { sendRequest, showMessage } = barrels.barrelFunctions;\r\n  //   const {} = barrels.barrelEventHandlers;\r\n\r\n  let requestFound = false;\r\n\r\n  /** \r\n   * Request event dispatcher\r\n   ============================================================================ */\r\n  const onRequest = (req, callback) => {\r\n    if (requestFound) return;\r\n    if (req === props.req || req === \"default\") {\r\n      callback();\r\n      requestFound = true;\r\n    }\r\n  };\r\n\r\n  /** \r\n   * Request handlers\r\n  ============================================================================ */\r\n\r\n  onRequest(\"sign in user\", () => {\r\n    // console.log(\"REQUEST:\", req, data, session, uid, barrels);\r\n    // console.log(\"onRequest:\", data);\r\n\r\n    setUserData(JSON.stringify(data));\r\n    sendData({ req, data, uid, session }, debug);\r\n  });\r\n\r\n  onRequest(\"register account\", () => {\r\n    // console.log(\"REQUEST:\", req, data, session, uid, barrels);\r\n    setUID(data.personalID);\r\n    setAccountNumber(data.personalID);\r\n    sendData({ req, data, uid, session }, debug);\r\n  });\r\n\r\n  // onRequest(\"get user businesses\", () => {\r\n  //   // setUserBusinesses(null);\r\n  //   if (userBusinesses === null) {\r\n  //     sendData({ req, data, uid, session });\r\n  //   } else {\r\n  //     //\r\n  //   }\r\n  // });\r\n\r\n  // onRequest(\"register user\", () => {\r\n  //   // console.log(\"REQUEST:\", req, data, session, uid, barrels);\r\n  //   // setUserData(JSON.stringify(data));\r\n  //   sendData({ req, data, uid, session });\r\n  // });\r\n\r\n  // onRequest(\"register shareholder\", () => {\r\n  //   // console.log(\"REQUEST:\", req, data, session, uid, barrels);\r\n  //   // setUserData(JSON.stringify(data));\r\n  //   sendData({ req, data, uid, session });\r\n  // });\r\n\r\n  onRequest(\"default\", () => {\r\n    sendData({ req, data, uid, session }, debug);\r\n\r\n    return true;\r\n  });\r\n\r\n  // onRequest(\"unknown\", () => {\r\n  //   showMessage(`UNKNOWN REQUEST ${req}`, \"info\");\r\n\r\n  //   return true;\r\n  // });\r\n\r\n  return requestFound;\r\n};\r\n","// import { useTranslation } from \"react-i18next\";\r\n\r\nexport default ({ args, barrels }) => {\r\n  /**\r\n   * Default Properties\r\n   ============================================================================ */\r\n  let defaults = {};\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  const { debug } = barrels.barrelGetters;\r\n  const { setRequest, setUID, setAccountNumber } = barrels.barrelSetters;\r\n  const { showMessage } = barrels.barrelFunctions;\r\n  // const {} = barrels.barrelEventHandlers;\r\n\r\n  //   const { t } = useTranslation(\"Errors\");\r\n  const { req, error, context } = props;\r\n  if (debug) console.log(`ERROR: ${req}`, error, context, props, barrels);\r\n  // const { showMessage } = barrels.barrelFunctions;\r\n\r\n  let errorFound = false;\r\n\r\n  /** \r\n   * Request event dispatcher\r\n   ============================================================================ */\r\n  const onError = (data, callback) => {\r\n    if (errorFound) return;\r\n    const [res, status] = data;\r\n    // console.log(res, status);\r\n\r\n    if (\r\n      (res === req && status === error.code) ||\r\n      res === \"*\" ||\r\n      res === \"unknown\"\r\n    ) {\r\n      callback();\r\n      setRequest(null);\r\n      errorFound = true;\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /** \r\n   * Response handlers\r\n  ============================================================================ */\r\n\r\n  /**\r\n   * Transfer errors\r\n   */\r\n  onError([\"transfer U2S\", \"NO_ROWS_CHANGED\"], () => {\r\n    showMessage(\"INVALID_TRANSFER\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"transfer U2U\", \"NO_ROWS_CHANGED\"], () => {\r\n    showMessage(\"INVALID_TRANSFER\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"transfer U2B\", \"NO_ROWS_CHANGED\"], () => {\r\n    showMessage(\"INVALID_TRANSFER\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"register user\", \"NO_ROWS_CHANGED\"], () => {\r\n    showMessage(\"INVALID_USER_REGISTRATION\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"register user language\", \"NO_ROWS_CHANGED\"], () => {\r\n    // user selected the same language again - just ignore\r\n    return true;\r\n  });\r\n\r\n  onError([\"validate email token\", \"NO_ROWS_CHANGED\"], () => {\r\n    showMessage(\"TOKEN_VALIDATION_FAILED\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"validate password reset token\", \"NO_ROWS_CHANGED\"], () => {\r\n    showMessage(\"TOKEN_VALIDATION_FAILED\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"reset password\", \"NO_ROWS_CHANGED\"], () => {\r\n    // showMessage(\"REQUEST_ALREADY_SENT\", \"info\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"register user language\", \"NO_ROWS_CHANGED\"], () => {\r\n    // User selected the same language again - that's ok\r\n    return true;\r\n  });\r\n\r\n  onError([\"update user\", \"NO_ROWS_CHANGED\"], () => {\r\n    // User selected the same password again - that's ok\r\n    return true;\r\n  });\r\n\r\n  onError([\"update last seen user\", \"NO_ROWS_CHANGED\"], () => {\r\n    // Same last seen time was submitted (shouldn't be possible) - ignore for now\r\n    return true;\r\n  });\r\n\r\n  onError([\"sign in user\", \"NO_ROWS_CHANGED\"], () => {\r\n    showMessage(\"USER_NOT_FOUND\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"register account\", \"ER_DUP_ENTRY\"], () => {\r\n    setUID(null);\r\n    setAccountNumber(null);\r\n    showMessage(\"DUPLICATE_ACCOUNT_REGISTRATION\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError(\r\n    [\"register account\", \"ER_FOREIGN_DUPLICATE_KEY_WITH_CHILD_INFO\"],\r\n    () => {\r\n      setUID(null);\r\n      setAccountNumber(null);\r\n      showMessage(\"DUPLICATE_ACCOUNT_REGISTRATION\", \"error\");\r\n      return true;\r\n    }\r\n  );\r\n\r\n  onError([\"register shareholder\", \"ER_NO_REFERENCED_ROW_2\"], () => {\r\n    showMessage(\"USER_NOT_FOUND\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"*\", \"ER_CANT_CREATE_THREAD\"], () => {\r\n    showMessage(\"NO_RESPONSE_FROM_SERVER\", \"error\");\r\n    return true;\r\n  });\r\n\r\n  onError([\"unknown\"], () => {\r\n    showMessage(error.code, \"error\");\r\n    return true;\r\n  });\r\n\r\n  return false;\r\n};\r\n","export default ({ args, barrels }) => {\r\n  /**\r\n   * Default Properties\r\n   ============================================================================ */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  // console.log(\"RESPONSE HANDLER: \", props, barrels);\r\n\r\n  /**\r\n   * Barrels\r\n   ============================================================================ */\r\n  const {\r\n    debug,\r\n    // requestTS,\r\n    sessionTimeout,\r\n    instance,\r\n    currencies,\r\n    transactions,\r\n    shares,\r\n    // transactionsPerPage,\r\n    // sharesPerPage,\r\n    userData,\r\n    accountNumber,\r\n    // uid,\r\n    userBusinesses,\r\n    businessPurposes,\r\n    purposeShareholders,\r\n    activeBusinesPurpose,\r\n    lastInsertId,\r\n  } = barrels.barrelGetters;\r\n  const {\r\n    setRequest,\r\n    setSession,\r\n    setUpdateInterval,\r\n    setCurrencies,\r\n    setTransactions,\r\n    setShares,\r\n    setCountCurrencies,\r\n    setCountTransactions,\r\n    setCountShares,\r\n    setConnected,\r\n    // setLanguage,\r\n    setUserData,\r\n    setSignedIn,\r\n    setCurrencyAbbr,\r\n    setCurrencyRate,\r\n    // setCurrencyStatus,\r\n    // setTransferSuccess,\r\n    setRedirectTo,\r\n    setLastInsertId,\r\n    setAccountNumber,\r\n    setUID,\r\n    setUserBusinesses,\r\n    setCountBusinesses,\r\n    setUserBusinessesLoaded,\r\n    setBusinessPurposes,\r\n    setCountBusinessPurposes,\r\n    setPurposeShareholders,\r\n    // setBusinessLoaded,\r\n    setAccountPhotoPath,\r\n    setPasswordResetTokenValidated,\r\n    setPasswordResetTokenEmail,\r\n    // setRedirect,\r\n  } = barrels.barrelSetters;\r\n  const {\r\n    sendRequest,\r\n    // processResponse,\r\n    getBusinesses,\r\n    getAccountData,\r\n    getTransactionById,\r\n    getBusinessPurposes,\r\n    getPurposeShareholders,\r\n    showMessage,\r\n    changeLanguage,\r\n    updateLastSeenUser,\r\n    // updateTimestamp,\r\n    // hideMessage,\r\n  } = barrels.barrelFunctions;\r\n  const {\r\n    // onTransferSuccess,\r\n    onRedirect,\r\n    onSessionTimeout,\r\n    // onLogOut,\r\n  } = barrels.barrelEventHandlers;\r\n\r\n  /**\r\n   * Hooks\r\n   ============================================================================ */\r\n  const { req } = props; // req, status\r\n  // const { userData, accountNumber } = barrels.barrelGetters;\r\n\r\n  // const userDataParsed = JSON.parse(userData);\r\n  // const userDataParsed = userData;\r\n  // console.log(\"USER DATA PARSED:\", userDataParsed);\r\n\r\n  /**\r\n   * Log response\r\n   */\r\n  if (debug) console.log(`response: ${req}`, props, barrels);\r\n\r\n  let responseFound = false;\r\n\r\n  /** \r\n   * Request event dispatcher\r\n   ============================================================================ */\r\n  const onResponse = (data, callback) => {\r\n    if (responseFound) return;\r\n    const [res, status] = data;\r\n    // console.log(\"INSTANCE: \", instance, props.reqData.instance);\r\n\r\n    // if (instance !== props.reqData.instance)\r\n    //   console.log(\"WRONG INSTANCE:\", instance, props.reqData.instance);\r\n\r\n    if (\r\n      (instance === props.reqData.instance &&\r\n        res === props.req &&\r\n        status === props.status) ||\r\n      res === \"unknown\"\r\n    ) {\r\n      if (callback()) {\r\n        setRequest(null);\r\n      }\r\n      responseFound = true;\r\n      // return true;\r\n    }\r\n    // return false;\r\n  };\r\n\r\n  /** \r\n   * Response handlers\r\n  ============================================================================ */\r\n\r\n  /**\r\n   * Start session (success)\r\n   */\r\n  onResponse([\"start session\", \"success\"], () => {\r\n    setConnected(true);\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * End session (success)\r\n   */\r\n  onResponse([\"end session\", \"success\"], () => {\r\n    // console.log(\"ON END SESSION\");\r\n\r\n    setConnected(false);\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Register user (pending)\r\n   */\r\n  onResponse([\"register user\", \"pending\"], () => {\r\n    // Might show some user feedback\r\n    return false;\r\n  });\r\n\r\n  onResponse([\"register user\", \"continue\"], () => {\r\n    if (props.name === \"INSERT INTO users\") {\r\n      if (props.results.insertId > 0) {\r\n        // setLastInsertId(props.results.insertId);\r\n        return false;\r\n      } else {\r\n        // No row was inserted - an error was returned\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Register user (success)\r\n   */\r\n  onResponse([\"register user\", \"success\"], () => {\r\n    // console.log(\"REGISTER USER PROPS:\", props);\r\n    const noEmailValidation = false;\r\n\r\n    if (noEmailValidation) {\r\n      setSignedIn(true);\r\n      setSession(props.email); // TODO: Might restore\r\n      onRedirect(\"/account-registration\");\r\n      sendRequest({ req: \"get user\", data: { email: props.email } }); // to not require a log in\r\n      return false;\r\n    } else {\r\n      onRedirect(\"/validate-email\");\r\n      return true;\r\n    }\r\n  });\r\n\r\n  onResponse([\"validate email token\", \"continue\"], () => {\r\n    if (props.name === \"UPDATE validation tokens\") {\r\n      if (props.results.affectedRows > 0) {\r\n        // setLastInsertId(props.results.insertId);\r\n        // onRedirect(\"/sign-in\");\r\n        return false;\r\n      } else {\r\n        // No row was inserted - an error was returned\r\n        return true;\r\n      }\r\n    }\r\n\r\n    if (props.name === \"UPDATE users\") {\r\n      if (props.results.affectedRows > 0) {\r\n        // setLastInsertId(props.results.insertId);\r\n        onRedirect(\"/sign-in\");\r\n        return true;\r\n      } else {\r\n        // No row was inserted - an error was returned\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  // onResponse([\"validate password reset token\", \"continue\"], () => {\r\n  //   if (props.name === \"UPDATE validation tokens\") {\r\n  //     if (props.results.affectedRows > 0) {\r\n  //       // onRedirect(\"/password\");\r\n  //       setPasswordResetTokenValidated(true);\r\n  //       return true;\r\n  //     } else {\r\n  //       // No row was inserted - an error was returned\r\n  //       return true;\r\n  //     }\r\n  //   }\r\n\r\n  //   return false;\r\n  // });\r\n\r\n  onResponse([\"validate password reset token\", \"success\"], () => {\r\n    setPasswordResetTokenValidated(true);\r\n\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Sign in user (continue)\r\n   */\r\n  onResponse([\"sign in user\", \"continue\"], () => {\r\n    // console.log(\"REDIRECT TO SUMMARY: \", props.name);\r\n    if (props.name === \"SELECT users\") {\r\n      // console.log(\"REDIRECT TO SUMMARY: SELECT users\");\r\n      /**\r\n       * Validated user\r\n       */\r\n      if (props.results.status === 1) {\r\n        // console.log(\"REDIRECT TO SUMMARY: props.results.status\");\r\n        setUserData(JSON.stringify(props.results));\r\n        setAccountNumber(props.results.uid);\r\n        setSession(props.results.email); // TODO: Might restore\r\n        setCurrencyAbbr(props.results.currency_abbr);\r\n        setCurrencyRate(\r\n          isNaN(props.results.currency_rate) ? 1 : props.results.currency_rate\r\n        );\r\n        changeLanguage(props.results.language);\r\n        setSignedIn(true);\r\n        // console.log(\"REDIRECT TO SUMMARY\");\r\n\r\n        onRedirect(\"/summary\");\r\n        return false;\r\n\r\n        /**\r\n         * Not yet validated user\r\n         */\r\n      } else if (props.results.status === 0) {\r\n        onRedirect(\"/validate-email\");\r\n        return true;\r\n\r\n        /**\r\n         * Suspended user\r\n         */\r\n      } else if (props.results.status === 2) {\r\n        setRedirectTo(\"/sign-out\");\r\n        showMessage(\"ACCOUNT_SUSPENDED\", \"error\");\r\n        return true;\r\n\r\n        /**\r\n         * Deleted user\r\n         */\r\n      } else if (props.results.status === 3) {\r\n        setRedirectTo(\"/sign-out\");\r\n        showMessage(\"ACCOUNT_DELETED\", \"error\");\r\n        return true;\r\n      }\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Sign in user (finished)\r\n   */\r\n  onResponse([\"sign in user\", \"finished\"], () => {\r\n    if (props.queryCnt > 0) {\r\n      return true;\r\n    } else {\r\n      showMessage(\"INVALID_SIGN_IN\", \"error\");\r\n      setRedirectTo(\"/sign-out\");\r\n      return true;\r\n    }\r\n  });\r\n\r\n  onResponse([\"sign in user\", \"success\"], () => {\r\n    // updateLastSeenUser();\r\n\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Update user (success)\r\n   */\r\n  onResponse([\"update user\", \"success\"], () => {\r\n    sendRequest({ req: \"get user\", data: { email: userData.email } });\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get user (continue)\r\n   */\r\n  onResponse([\"get user\", \"continue\"], () => {\r\n    if (props.name === \"SELECT users\") {\r\n      setUserData(JSON.stringify(props.results));\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get user (finished)\r\n   */\r\n  onResponse([\"get user\", \"finished\"], () => {\r\n    if (props.name === \"SELECT users\") {\r\n      if (props.queryCnt === 1) {\r\n        // exactly one user found - all is good\r\n        return false;\r\n      } else if (props.queryCnt === 0) {\r\n        // Something wrong with (accessing) the user data\r\n        // Probable causes:\r\n        // - user was deleted from the DB\r\n        // - user status was set to >= 2\r\n        // - multiple users with the same email address, most improbable (db constraint)\r\n        // - user changed the email address or password\r\n        // onLogOut();\r\n        setRedirectTo(\"/sign-out\");\r\n        // showMessage(\"INVALID_DATA\", \"error\");\r\n        return true;\r\n      }\r\n      return true;\r\n    }\r\n    if (props.rowNum === 1) {\r\n      return true;\r\n    } else {\r\n      // Something wrong with (accessing) the user data\r\n      // Probable causes:\r\n      // - user was deleted from the DB\r\n      // - user status was set to >= 2\r\n      // - multiple users with the same email address, most improbable (db constraint)\r\n      // - user changed the email address or password\r\n      // onLogOut();\r\n      setRedirectTo(\"/sign-out\");\r\n      // showMessage(\"INVALID_DATA\", \"error\");\r\n      return true;\r\n    }\r\n  });\r\n\r\n  onResponse([\"get user\", \"success\"], () => {\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get user businesses (continue)\r\n   */\r\n  onResponse([\"get user businesses\", \"continue\"], () => {\r\n    if (props.name === \"SELECT businesses\") {\r\n      const business = props.results;\r\n      const { business_id } = business;\r\n      if (userBusinesses === null) {\r\n        setUserBusinesses(JSON.stringify([business]));\r\n        getBusinessPurposes(business_id, 0, 1);\r\n      } else {\r\n        setUserBusinesses(JSON.stringify([...userBusinesses, business]));\r\n      }\r\n    } else if (props.name === \"COUNT businesses\") {\r\n      setCountBusinesses(props.results.count_businesses);\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get user businesses (finished)\r\n   */\r\n  onResponse([\"get user businesses\", \"finished\"], () => {\r\n    // if (instance !== props.reqData.instance) return true;\r\n    setUserBusinessesLoaded(true);\r\n    setRedirectTo(\"/my-business\");\r\n    return false;\r\n  });\r\n\r\n  onResponse([\"get user businesses\", \"success\"], () => {\r\n    // if (instance !== props.reqData.instance) return true;\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get business purposes (continue)\r\n   */\r\n  onResponse([\"get business purposes\", \"continue\"], () => {\r\n    // if (props.name === \"SELECT purposes\") {\r\n    //   if (businessPurposes === null) {\r\n    //     setBusinessPurposes(JSON.stringify([props.results]));\r\n    //   } else {\r\n    //     setBusinessPurposes(\r\n    //       JSON.stringify([...businessPurposes, props.results])\r\n    //     );\r\n    //   }\r\n    // }\r\n\r\n    if (props.name === \"SELECT purposes\") {\r\n      if (businessPurposes === null) {\r\n        setBusinessPurposes(JSON.stringify([props.results]));\r\n      } else {\r\n        setBusinessPurposes(\r\n          JSON.stringify([...businessPurposes, props.results])\r\n        );\r\n      }\r\n    } else if (props.name === \"COUNT purposes\") {\r\n      setCountBusinessPurposes(props.results.count_purposes);\r\n    }\r\n\r\n    // getPurposeShareholders(props.results.purpose_id);\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get business purposes (finished)\r\n   */\r\n  onResponse([\"get business purposes\", \"finished\"], () => {\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get purpose shareholders (continue)\r\n   */\r\n  onResponse([\"get purpose shareholders\", \"continue\"], () => {\r\n    if (props.name === \"SELECT shares\") {\r\n      if (purposeShareholders === null) {\r\n        setPurposeShareholders(JSON.stringify([props.results]));\r\n      } else {\r\n        setPurposeShareholders(\r\n          JSON.stringify([...purposeShareholders, props.results])\r\n        );\r\n      }\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get purpose shareholders (finished)\r\n   */\r\n  onResponse([\"get purpose shareholders\", \"finished\"], () => {\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get user business by id (continue)\r\n   */\r\n  // onResponse([\"get business by id\", \"continue\"], () => {\r\n  //   if (userBusinesses === null) {\r\n  //     setUserBusinesses(JSON.stringify([props.results]));\r\n  //   } else {\r\n  //     setUserBusinesses(JSON.stringify([...userBusinesses, props.results]));\r\n  //   }\r\n\r\n  //   return false;\r\n  // });\r\n\r\n  onResponse([\"get business by id\", \"continue\"], () => {\r\n    // if (instance !== props.reqData.instance) return true;\r\n\r\n    if (props.name === \"SELECT businesses\") {\r\n      if (userBusinesses === null) {\r\n        setUserBusinesses(JSON.stringify([props.results]));\r\n      } else {\r\n        setUserBusinesses(JSON.stringify([...userBusinesses, props.results]));\r\n      }\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get business by id (finished)\r\n   */\r\n  onResponse([\"get business by id\", \"finished\"], () => {\r\n    // if (instance !== props.reqData.instance) return true;\r\n\r\n    if (props.queryCnt > 0) {\r\n      // getting business was successful - query returned results\r\n      return false;\r\n    } else {\r\n      console.log(\"Error getting business by id\");\r\n\r\n      return true;\r\n    }\r\n  });\r\n\r\n  onResponse([\"get business by id\", \"success\"], () => {\r\n    // if (instance !== props.reqData.instance) return true;\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get purpose by id (continue)\r\n   */\r\n  onResponse([\"get purpose by id\", \"continue\"], () => {\r\n    if (props.name === \"SELECT purposes\") {\r\n      if (businessPurposes === null) {\r\n        setBusinessPurposes(JSON.stringify([props.results]));\r\n      } else {\r\n        setBusinessPurposes(\r\n          JSON.stringify([...businessPurposes, props.results])\r\n        );\r\n      }\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get purpose by id (finished)\r\n   */\r\n  onResponse([\"get purpose by id\", \"finished\"], () => {\r\n    if (props.queryCnt < 1) {\r\n      // Something went wrong\r\n      return true;\r\n    }\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get purpose by id (success)\r\n   */\r\n  onResponse([\"get purpose by id\", \"success\"], () => {\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get shareholder by id (continue)\r\n   */\r\n  onResponse([\"get shareholder by id\", \"continue\"], () => {\r\n    if (purposeShareholders === null) {\r\n      setPurposeShareholders(JSON.stringify([props.results]));\r\n    } else {\r\n      setPurposeShareholders(\r\n        JSON.stringify([...purposeShareholders, props.results])\r\n      );\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get shareholder by id (finished)\r\n   */\r\n  onResponse([\"get shareholder by id\", \"finished\"], () => {\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Upload file (ready)\r\n   */\r\n  onResponse([\"upload file\", \"continue\"], () => {\r\n    console.log(\"UPLOAD FILE =========== \");\r\n\r\n    // if (props.name === \"SELECT 1\") {\r\n    // setAccountPhotoPath(props + \"?r=\" + Math.random());\r\n    setAccountPhotoPath(Date.now()); // ok\r\n    return false;\r\n    // }\r\n    // return true;\r\n  });\r\n\r\n  onResponse([\"upload file\", \"finished\"], () => {\r\n    if (props.name === \"SELECT 1\") {\r\n      if (props.queryCnt === 0) {\r\n        // something went wrong\r\n        // setAccountPhotoPath(\"ok\");\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  });\r\n\r\n  onResponse([\"upload file\", \"success\"], () => {\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Register account (success)\r\n   */\r\n  onResponse([\"register account\", \"continue\"], () => {\r\n    if (props.results.affectedRows < 1) {\r\n      // error registering account\r\n      setUID(null);\r\n      setAccountNumber(null);\r\n      showMessage(\"INVALID_DATA\", \"error\");\r\n      return true;\r\n    }\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Register account (success)\r\n   */\r\n  onResponse([\"register account\", \"success\"], () => {\r\n    // setAccountNumber(props.uid);\r\n    // setUID(props.uid);\r\n    // sendRequest({\r\n    //   req: \"get account data\",\r\n    //   data: { uid: accountNumber },\r\n    // });\r\n    getAccountData();\r\n    // onRedirect(\"/balance\");\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get account data (continue)\r\n   */\r\n  onResponse([\"get account data\", \"continue\"], () => {\r\n    if (props.name === \"SELECT users\") {\r\n      setUserData(JSON.stringify(props.results));\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Get account data (finished)\r\n   */\r\n  onResponse([\"get account data\", \"finished\"], () => {\r\n    if (props.name === \"SELECT users\") {\r\n      if (props.queryCnt === 0) {\r\n        // Account not reachable\r\n        showMessage(\"INVALID_DATA\", \"error\");\r\n        return true;\r\n      }\r\n    }\r\n    // if (props.rowNum === 1) {\r\n    //   // all is good\r\n    //   return true;\r\n    // } else {\r\n    //   // Account not reachable\r\n    //   showMessage(\"INVALID_DATA\", \"error\");\r\n    //   return true;\r\n    // }\r\n    return true;\r\n  });\r\n\r\n  onResponse([\"get account data\", \"success\"], () => {\r\n    if (userData === null) return true;\r\n\r\n    // console.log(\"seconds_since_last_seen:\", userData.seconds_since_last_seen);\r\n    if (userData.seconds_since_last_seen >= sessionTimeout) {\r\n      setUpdateInterval(-1);\r\n      onSessionTimeout();\r\n    } else {\r\n      setUpdateInterval(60000);\r\n    }\r\n\r\n    // updateLastSeenUser();\r\n  });\r\n\r\n  /**\r\n   * Transfer U2S (pending)\r\n   ============================================================================================*/\r\n  onResponse([\"transfer U2S\", \"pending\"], () => {\r\n    // might show some pending state feedback\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Transfer U2S (continue)\r\n   */\r\n  onResponse([\"transfer U2S\", \"continue\"], () => {\r\n    if (props.name === \"INSERT INTO transactions\") {\r\n      if (props.results.insertId > 0) {\r\n        setLastInsertId(props.results.insertId);\r\n        return false;\r\n      } else {\r\n        // No row was inserted - an error was returned\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Transfer U2S (success)\r\n   */\r\n  onResponse([\"transfer U2S\", \"success\"], () => {\r\n    getTransactionById(lastInsertId);\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Transfer U2U (pending)\r\n   ============================================================================================*/\r\n  onResponse([\"transfer U2U\", \"pending\"], () => {\r\n    // might show some pending state feedback\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Transfer U2U (continue)\r\n   */\r\n  onResponse([\"transfer U2U\", \"continue\"], () => {\r\n    if (props.name === \"INSERT INTO transactions\") {\r\n      if (props.results.insertId > 0) {\r\n        setLastInsertId(props.results.insertId);\r\n        return false;\r\n      } else {\r\n        // No row was inserted - an error was returned\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Transfer U2U (success)\r\n   */\r\n  onResponse([\"transfer U2U\", \"success\"], () => {\r\n    getTransactionById(lastInsertId);\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Transfer U2B (pending)\r\n   ============================================================================================*/\r\n  onResponse([\"transfer U2B\", \"pending\"], () => {\r\n    // might show some pending state feedback\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Transfer U2B (continue)\r\n   */\r\n  onResponse([\"transfer U2B\", \"continue\"], () => {\r\n    if (props.name === \"INSERT INTO transactions\") {\r\n      if (props.results.insertId > 0) {\r\n        setLastInsertId(props.results.insertId);\r\n        return false;\r\n      } else {\r\n        // No row was inserted - an error was returned\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Transfer U2B (success)\r\n   */\r\n  onResponse([\"transfer U2B\", \"success\"], () => {\r\n    getTransactionById(lastInsertId);\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Register business\r\n   ============================================================================================*/\r\n  onResponse([\"register business\", \"continue\"], () => {\r\n    // if (instance !== props.reqData.instance) return true;\r\n    if (props.name === \"INSERT INTO businesses\") {\r\n      if (props.results.insertId > 0) {\r\n        setLastInsertId(props.results.insertId);\r\n        return false;\r\n      } else {\r\n        // No row was inserted - an error was returned\r\n        return true;\r\n      }\r\n    }\r\n  });\r\n\r\n  onResponse([\"register business\", \"success\"], () => {\r\n    // if (instance !== props.reqData.instance) return true;\r\n    // console.log(\"RESPONSE register business:\", props);\r\n\r\n    // <ModalConfirm\r\n    //   title=\"Add Shareholders\"\r\n    //   message=\"Do you want to add yourself as a shareholder?\"\r\n    // />;\r\n\r\n    sendRequest({\r\n      req: \"get business by id\",\r\n      data: { id: lastInsertId },\r\n    });\r\n    // getBusinesses();\r\n    return false;\r\n    // return true;\r\n  });\r\n\r\n  onResponse([\"register currency\", \"continue\"], () => {\r\n    // console.log(\"RESPONSE register business:\", props);\r\n\r\n    if (props.results.insertId > 0) {\r\n      setLastInsertId(props.results.insertId);\r\n\r\n      return false;\r\n    } else {\r\n      // No row was inserted - an error was returned\r\n      return true;\r\n    }\r\n  });\r\n\r\n  onResponse([\"register currency\", \"success\"], () => {\r\n    sendRequest({\r\n      req: \"get currency by id\",\r\n      data: { id: lastInsertId },\r\n    });\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get currencies (continue)\r\n   */\r\n  onResponse([\"get currencies\", \"continue\"], () => {\r\n    // console.log(\"PROPS NAME:\", props.name);\r\n\r\n    if (props.name === \"SELECT currencies\") {\r\n      if (currencies === null) {\r\n        setCurrencies(JSON.stringify([props.results]));\r\n      } else {\r\n        setCurrencies(JSON.stringify([...currencies, props.results]));\r\n      }\r\n    } else if (props.name === \"COUNT currencies\") {\r\n      setCountCurrencies(props.results.count_currencies);\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get currencies (finished)\r\n   */\r\n  onResponse([\"get currencies\", \"finished\"], () => {\r\n    setRedirectTo(\"/currency\");\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get currency by id (continue)\r\n   */\r\n  onResponse([\"get currency by id\", \"continue\"], () => {\r\n    if (props.name === \"SELECT currencies\") {\r\n      if (currencies === null) {\r\n        setCurrencies(JSON.stringify([props.results]));\r\n      } else {\r\n        setCurrencies(JSON.stringify([...currencies, props.results]));\r\n      }\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get currency by id (finished)\r\n   */\r\n  onResponse([\"get currency by id\", \"finished\"], () => {\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get transactions (continue)\r\n   */\r\n  onResponse([\"get transactions\", \"continue\"], () => {\r\n    // console.log(\"PROPS NAME:\", props.name);\r\n\r\n    if (props.name === \"SELECT transactions\") {\r\n      if (transactions === null) {\r\n        setTransactions(JSON.stringify([props.results]));\r\n      } else {\r\n        setTransactions(JSON.stringify([...transactions, props.results]));\r\n      }\r\n    } else if (props.name === \"COUNT transactions\") {\r\n      setCountTransactions(props.results.count_transaction_positions);\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get transactions (finished)\r\n   */\r\n  onResponse([\"get transactions\", \"finished\"], () => {\r\n    setRedirectTo(\"/balance\");\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get shares (continue)\r\n   */\r\n  onResponse([\"get shares\", \"continue\"], () => {\r\n    // console.log(\"PROPS NAME:\", props.name);\r\n\r\n    if (props.name === \"SELECT shares\") {\r\n      if (shares === null) {\r\n        setShares(JSON.stringify([props.results]));\r\n      } else {\r\n        setShares(JSON.stringify([...shares, props.results]));\r\n      }\r\n    } else if (props.name === \"COUNT shares\") {\r\n      setCountShares(props.results.count_shares);\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get shares (finished)\r\n   */\r\n  onResponse([\"get shares\", \"finished\"], () => {\r\n    // setRedirectTo(\"/balance\");\r\n    return true;\r\n  });\r\n\r\n  /**\r\n   * Get transaction by id (continue)\r\n   */\r\n  onResponse([\"get transaction by id\", \"continue\"], () => {\r\n    if (transactions === null) {\r\n      setTransactions(JSON.stringify([props.results]));\r\n    } else {\r\n      setTransactions(JSON.stringify([...transactions, props.results]));\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  /**\r\n   * Get currency by id (finished)\r\n   */\r\n  onResponse([\"get transaction by id\", \"finished\"], () => {\r\n    getAccountData();\r\n    return false;\r\n  });\r\n\r\n  onResponse([\"register purpose\", \"continue\"], () => {\r\n    // sendRequest({\r\n    //   req: \"get purpose by id\",\r\n    //   data: { id: props.results.insertId },\r\n    // });\r\n    if (props.name === \"INSERT INTO purposes\") {\r\n      if (props.results.insertId > 0) {\r\n        setLastInsertId(props.results.insertId);\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n  });\r\n\r\n  onResponse([\"register purpose\", \"success\"], () => {\r\n    sendRequest({\r\n      req: \"get purpose by id\",\r\n      data: { id: lastInsertId },\r\n    });\r\n    return false;\r\n  });\r\n\r\n  onResponse([\"register shareholder\", \"continue\"], () => {\r\n    if (props.results.insertId > 0) {\r\n      // showMessage(\"REGISTER_SHAREHOLDER_SUCCESS\", \"info\");\r\n\r\n      // return sendRequest({\r\n      //   req: \"get shareholder by id\",\r\n      //   data: { id: props.results.insertId },\r\n      // });\r\n      setLastInsertId(props.results.insertId);\r\n    } else {\r\n      // No row was inserted - an error was returned\r\n      return true;\r\n    }\r\n  });\r\n\r\n  onResponse([\"register shareholder\", \"success\"], () => {\r\n    // sendRequest({\r\n    //   req: \"get shareholder by id\",\r\n    //   data: { id: lastInsertId },\r\n    // });\r\n\r\n    getPurposeShareholders(activeBusinesPurpose);\r\n    return false;\r\n  });\r\n\r\n  onResponse([\"change share\", \"success\"], () => {\r\n    // sendRequest({\r\n    //   req: \"get shareholder by id\",\r\n    //   data: { id: lastInsertId },\r\n    // });\r\n\r\n    // getPurposeShareholders(activeBusinesPurpose);\r\n    return true;\r\n  });\r\n\r\n  onResponse([\"remove shareholder\", \"success\"], () => {\r\n    // sendRequest({\r\n    //   req: \"get shareholder by id\",\r\n    //   data: { id: lastInsertId },\r\n    // });\r\n\r\n    getPurposeShareholders(activeBusinesPurpose);\r\n    return false;\r\n  });\r\n\r\n  onResponse([\"reset password\", \"success\"], () => {\r\n    setPasswordResetTokenValidated(false);\r\n    return true;\r\n  });\r\n\r\n  onResponse([\"change password\", \"success\"], () => {\r\n    // TOTO: If NO_ROWS_CHANGE - probably the currently saved password was submitted\r\n    setPasswordResetTokenValidated(null);\r\n    setPasswordResetTokenEmail(null);\r\n    onRedirect(\"/sign-in\");\r\n    showMessage(\"PASSWORD_CHANGE_SUCCESS\", \"info\");\r\n    return true;\r\n  });\r\n\r\n  // onResponse([\"unknown\"], () => {\r\n  //   if (\r\n  //     status === \"pending\" ||\r\n  //     status === \"continue\" ||\r\n  //     status === \"finished\" ||\r\n  //     status === \"success\"\r\n  //   ) {\r\n  //     return false;\r\n  //   } else {\r\n  //     showMessage(`${req}: ${status}`, \"info\");\r\n  //     return true;\r\n  //   }\r\n  // });\r\n\r\n  onResponse([\"unknown\"], () => {\r\n    return false;\r\n  });\r\n\r\n  return responseFound;\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React, { useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n// import { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport { Spinner } from \"react-bootstrap\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\n// import Card from \"../card\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = { namespace: \"ValidateEmail\" };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  // const {  } = props.barrelGetters;\r\n  const { setValidateTokenEmail } = props.barrelSetters;\r\n  const { getUrlParam } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n    * Destructured vars\r\n    ============================================================================ */\r\n  const { t } = useTranslation([props.namespace]);\r\n\r\n  /**\r\n    * Hooks\r\n    ============================================================================ */\r\n\r\n  // setToken(getUrlParam(\"token\"));\r\n  // setEmail(getUrlParam(\"email\"));\r\n\r\n  const token = getUrlParam(\"token\");\r\n  const email = getUrlParam(\"email\");\r\n\r\n  /**\r\n    * Effects\r\n    ============================================================================ */\r\n  useEffect(() => {\r\n    if (token === null || email === null) return;\r\n\r\n    setValidateTokenEmail(\r\n      JSON.stringify({\r\n        token,\r\n        email,\r\n      })\r\n    );\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  /**\r\n    * Functions\r\n    ============================================================================ */\r\n  const getJSX = () => {\r\n    // const queryString = window.location.search;\r\n    // const urlParams = new URLSearchParams(queryString);\r\n\r\n    return token === null ? (\r\n      <>\r\n        <h4>{t(\"A verification link has been sent to your email account.\")}</h4>\r\n        <hr />\r\n        <p>\r\n          {t(\r\n            \"Please click on the link that has just been sent to your email account\"\r\n          )}\r\n        </p>\r\n      </>\r\n    ) : (\r\n      <div className=\"text-center\">\r\n        <Spinner\r\n          as=\"span\"\r\n          animation=\"border\"\r\n          size=\"sm\"\r\n          role=\"status\"\r\n          aria-hidden=\"true\"\r\n          hidden={false}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n    * Return\r\n    ============================================================================ */\r\n  return <>{getJSX()}</>;\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React, { useState } from \"react\";\r\nimport { Form, InputGroup } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\n/**\r\n   * User imports\r\n   ============================================================================ */\r\nimport SubmitButton from \"../submitButton\";\r\n// import Card from \"../card\";\r\n\r\n/**\r\n * Default export\r\n */\r\nexport default (args) => {\r\n  /**\r\n     * Default Properties\r\n     ============================================================================ */\r\n  let defaults = {\r\n    namespace: \"ChangePassword\",\r\n    request: \"change password\",\r\n    email: null,\r\n  };\r\n\r\n  /**\r\n     * Properties\r\n     ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n     * Barrels\r\n     ============================================================================ */\r\n  const {\r\n    passwordResetTokenValidated,\r\n    passwordResetTokenEmail,\r\n  } = props.barrelGetters;\r\n  // const {} = props.barrelSetters;\r\n  const { sendRequest } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n     * Destructured vars\r\n     ============================================================================ */\r\n  const { t } = useTranslation([\r\n    passwordResetTokenValidated === true ? \"SignUp\" : \"ChangePassword\",\r\n  ]); // adjust namespace\r\n\r\n  /**\r\n   * Hooks\r\n   */\r\n  const [passwordVisible, setPasswordVisible] = useState(false);\r\n\r\n  /**\r\n     * Functions\r\n     ============================================================================ */\r\n  const onSubmit = (data) => {\r\n    data.email = passwordResetTokenEmail;\r\n    // console.log(data);\r\n    return sendRequest({ req: props.request, data });\r\n  };\r\n\r\n  const togglePassword = () => {\r\n    setPasswordVisible(!passwordVisible);\r\n  };\r\n\r\n  /** \r\n     * Yup schema\r\n     ============================================================================ */\r\n  const schema = yup.object({\r\n    password: yup\r\n      .string()\r\n      .required(t(\"No password provided\"))\r\n      .min(8, t(\"Password is too short\"))\r\n      // .matches(/[a-zA-Z]/, \"Password can only contain Latin letters.\")\r\n      .matches(\r\n        /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#_?&])[A-Za-z\\d@$!%*#_?&]{8,}$/,\r\n        t(\"Password is too weak\")\r\n      ),\r\n  });\r\n\r\n  /**\r\n     * Form\r\n     ============================================================================ */\r\n  const ChangePasswordForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    errors,\r\n  }) => (\r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      {/* Password */}\r\n      <Form.Group controlId=\"validationFormikPassword\">\r\n        <Form.Label>{t(\"New password\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            type={passwordVisible ? \"text\" : \"password\"}\r\n            placeholder={t(\"Enter password\")}\r\n            name=\"password\"\r\n            value={values.password}\r\n            onChange={handleChange}\r\n            // onBlur={handleChange}\r\n            isInvalid={!!errors.password && touched.password}\r\n          />\r\n          <InputGroup.Append>\r\n            <InputGroup.Text\r\n              id=\"inputGroupAppend\"\r\n              onClick={togglePassword}\r\n              style={{\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              {passwordVisible ? (\r\n                <VisibilityOff\r\n                  fontSize=\"small\"\r\n                  style={{ color: \"var(--dark)\" }}\r\n                />\r\n              ) : (\r\n                <Visibility fontSize=\"small\" style={{ color: \"var(--dark)\" }} />\r\n              )}\r\n            </InputGroup.Text>\r\n          </InputGroup.Append>\r\n\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.password}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      <SubmitButton\r\n        {...args}\r\n        caption={t(\"Submit\")}\r\n        request={props.request}\r\n        namespace={props.namespace}\r\n      />\r\n    </Form>\r\n  );\r\n\r\n  /**\r\n     * Return\r\n     ============================================================================ */\r\n  if (passwordResetTokenValidated === true) {\r\n    // if (true) {\r\n    return (\r\n      <Formik\r\n        component={ChangePasswordForm}\r\n        validationSchema={schema}\r\n        onSubmit={onSubmit}\r\n        initialValues={{\r\n          password: \"\",\r\n        }}\r\n      />\r\n    );\r\n  } else {\r\n    // if (passwordResetTokenValidated === false)\r\n    return <>{t(\"Awaiting validation\")}</>;\r\n    // } else {\r\n    //   // null\r\n    //   return <>How did you land here???</>;\r\n  }\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport default (args) => {\r\n  /**\r\n   * Default Properties\r\n   */\r\n  let defaults = {};\r\n\r\n  /**\r\n   * Properties\r\n   */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n   * Custom hooks\r\n   */\r\n  const { t } = useTranslation(\"Logout\");\r\n\r\n  // console.log(\"ALERT DATA\", props);\r\n\r\n  /**\r\n   * Barrels\r\n   */\r\n  const { error, language } = props.barrelGetters;\r\n  const { setLanguage } = props.barrelSetters;\r\n  const { showMessage } = props.barrelFunctions;\r\n  const { onLogOut } = props.barrelEventHandlers;\r\n\r\n  /**\r\n   * Default Properties\r\n   */\r\n  // let defaults = {};\r\n  // const props = Object.assign(defaults, authorizedData);\r\n\r\n  // const [logOut] = useState(true);\r\n\r\n  // console.log(\"sendUserLogOutRequest\", props);\r\n\r\n  useEffect(() => {\r\n    // if (logOut !== true) return;\r\n    // console.log(\"LOG OUT =============\");\r\n\r\n    const tempError = error;\r\n    const tempLanguage = language;\r\n\r\n    onLogOut();\r\n\r\n    setLanguage(tempLanguage);\r\n\r\n    if (tempError !== null) {\r\n      showMessage(tempError, \"error\");\r\n    }\r\n    // eslint-disable-next-line\r\n  }, []); // logOut\r\n\r\n  return (\r\n    <>\r\n      <h4>{t(\"See you soon\")}</h4>\r\n      <hr />\r\n\r\n      <br />\r\n      <p className=\"text-center\">\r\n        <a href=\"/\">{t(\"Sign in\")}</a>\r\n      </p>\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * System imports\r\n ============================================================================ */\r\nimport React, { useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Form, InputGroup, Spinner } from \"react-bootstrap\";\r\nimport { Formik } from \"formik\";\r\nimport * as yup from \"yup\";\r\n\r\n/**\r\n  * User imports\r\n  ============================================================================ */\r\nimport SubmitButton from \"../submitButton\";\r\n\r\n/**\r\n  * Default export\r\n  ============================================================================ */\r\nexport default (args) => {\r\n  /**\r\n    * Default Properties\r\n    ============================================================================ */\r\n  let defaults = { namespace: \"ResetPassword\", request: \"reset password\" };\r\n\r\n  /**\r\n    * Properties\r\n    ============================================================================ */\r\n  const props = Object.assign(defaults, args);\r\n\r\n  /**\r\n    * Barrels\r\n    ============================================================================ */\r\n  const { language } = props.barrelGetters;\r\n  const { setValidateTokenPasswordReset } = props.barrelSetters;\r\n  const { sendRequest, getUrlParam } = props.barrelFunctions;\r\n  // const {} = props.barrelEventHandlers;\r\n\r\n  /**\r\n    * Destructured vars\r\n    ============================================================================ */\r\n  const { t } = useTranslation(props.namespace);\r\n\r\n  const token = getUrlParam(\"token\");\r\n  const email = getUrlParam(\"email\");\r\n\r\n  /**\r\n    * Effects\r\n    ============================================================================ */\r\n  useEffect(() => {\r\n    if (token === null || email === null) return;\r\n\r\n    setValidateTokenPasswordReset(\r\n      JSON.stringify({\r\n        token,\r\n        email,\r\n      })\r\n    );\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  /**\r\n    * Event listeners\r\n    ============================================================================ */\r\n\r\n  /**\r\n   * Event listener: On Form Submit\r\n   * @param {object} data Form data\r\n   */\r\n  const onSubmit = (data) => {\r\n    // console.log(data);\r\n    data.language = language;\r\n    sendRequest({\r\n      req: props.request,\r\n      data: data,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Yup schema\r\n   */\r\n  const schema = yup.object({\r\n    email: yup\r\n      .string()\r\n      .email(t(\"Invalid email address\"))\r\n      .required(t(\"Email is required\")),\r\n  });\r\n\r\n  const passwordResetForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    handleBlur,\r\n    values,\r\n    touched,\r\n    isValid,\r\n    validateForm,\r\n    errors,\r\n  }) => (\r\n    <Form noValidate onSubmit={handleSubmit}>\r\n      <h3>{t(\"Reset password\")}</h3>\r\n\r\n      {/* Email */}\r\n      <Form.Group controlId=\"validationFormikEmail\">\r\n        <Form.Label>{t(\"Email address\")}</Form.Label>\r\n        <InputGroup>\r\n          <Form.Control\r\n            placeholder={t(\"Enter email\")}\r\n            name=\"email\"\r\n            value={values.email}\r\n            onChange={handleChange}\r\n            // onBlur={handleChange}\r\n            isInvalid={!!errors.email && touched.email}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {errors.email}\r\n          </Form.Control.Feedback>\r\n        </InputGroup>\r\n      </Form.Group>\r\n\r\n      <Form.Group controlId=\"validationFormikPassword\">\r\n        <SubmitButton\r\n          {...args}\r\n          caption={t(\"Submit\")}\r\n          request={props.request}\r\n          namespace={props.namespace}\r\n        />\r\n      </Form.Group>\r\n    </Form>\r\n  );\r\n\r\n  // return (\r\n  //   <Formik\r\n  //     component={passwordResetForm}\r\n  //     validationSchema={schema}\r\n  //     onSubmit={onSubmit}\r\n  //     initialValues={{\r\n  //       email: \"\",\r\n  //     }}\r\n  //   />\r\n  // );\r\n\r\n  return token === null ? (\r\n    <Formik\r\n      component={passwordResetForm}\r\n      validationSchema={schema}\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        email: \"\",\r\n      }}\r\n    />\r\n  ) : (\r\n    <div className=\"text-center\">\r\n      <Spinner\r\n        as=\"span\"\r\n        animation=\"border\"\r\n        size=\"sm\"\r\n        role=\"status\"\r\n        aria-hidden=\"true\"\r\n        hidden={false}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","// import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./Loading.css\";\r\nimport React from \"react\";\r\n// import MainSkeleton from \"../pages/main\";\r\n\r\nexport default () => {\r\n  //\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <div className=\"lds-hourglass\"></div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import React, { Suspense } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./normalize.css\";\r\nimport \"./index.css\";\r\n// import UnderConstruction from \"./components/pages/underConstruction\";\r\nimport Main from \"./components/pages/main\";\r\nimport Loading from \"./components/loading\";\r\n\r\n// const Main = React.lazy(() => import(\"./components/pages/main\"));\r\n\r\nReactDOM.render(\r\n  <Suspense fallback={<Loading />}>\r\n    <Main />\r\n  </Suspense>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}